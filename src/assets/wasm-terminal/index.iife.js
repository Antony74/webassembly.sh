/*
 *****************************************************************************
 Copyright (c) Microsoft Corporation. All rights reserved.
 Licensed under the Apache License, Version 2.0 (the "License"); you may not use
 this file except in compliance with the License. You may obtain a copy of the
 License at http://www.apache.org/licenses/LICENSE-2.0

 THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
 WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
 MERCHANTABLITY OR NON-INFRINGEMENT.

 See the Apache Version 2.0 License for specific language governing permissions
 and limitations under the License.
*****************************************************************************/
'use strict';var WasmTerminal=function(Td){function E(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}function C(a,b){return b={exports:{}},a(b,b.exports),b.exports}function xj(a,b){function c(){this.constructor=a}Ud(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}function da(a,b,c,d){return new (c||(c=Promise))(function(e,f){function g(a){try{k(d.next(a))}catch(p){f(p)}}function h(a){try{k(d["throw"](a))}catch(p){f(p)}}function k(a){a.done?
e(a.value):(new c(function(b){b(a.value)})).then(g,h)}k((d=d.apply(a,b||[])).next())})}function ea(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(f)throw new TypeError("Generator is already executing.");for(;e;)try{if(f=1,g&&(h=c[0]&2?g["return"]:c[0]?g["throw"]||((h=g["return"])&&h.call(g),0):g.next)&&!(h=h.call(g,c[1])).done)return h;if(g=0,h)c=[c[0]&2,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;g=c[1];c=[0];
continue;case 7:c=e.ops.pop();e.trys.pop();continue;default:if(!(h=e.trys,h=0<h.length&&h[h.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!h||c[1]>h[0]&&c[1]<h[3]))e.label=c[1];else if(6===c[0]&&e.label<h[1])e.label=h[1],h=c;else if(h&&e.label<h[2])e.label=h[2],e.ops.push(c);else{h[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(p){c=[6,p],g=0}finally{f=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},
trys:[],ops:[]},f,g,h,k;return k={next:c(0),"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function Jf(a){var b="function"===typeof Symbol&&a[Symbol.iterator],c=0;return b?b.call(a):{next:function(){a&&c>=a.length&&(a=void 0);return{value:a&&a[c++],done:!a}}}}function sb(a,b){var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[];try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(g){var f=
{error:g}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error;}}return e}function Tc(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(sb(arguments[b]));return a}function fb(a,b,c){for(var d=0,e=0,f=0;f<b;++f)"\n"===a.charAt(f)?(e=0,d+=1):(e+=1,e>c&&(e=0,d+=1));return{row:d,col:e}}function yj(a,b,c){var d=a.match(/((?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>]))|((\\['"|&;()<> \t]|[^\s'"|&;()<> \t])+|"((\\"|[^"])*?)"|'((\\'|[^'])*?)')*/g).filter(Boolean),e=!1;if(!d)return[];
b||(b={});c||(c={});return d.map(function(a,g){function f(){u+=1;if("{"===a.charAt(u)){u+=1;if("}"===a.charAt(u))throw Error("Bad substitution: "+a.substr(u-2,3));var c=a.indexOf("}",u);if(0>c)throw Error("Bad substitution: "+a.substr(u));var d=a.substr(u,c-u);u=c}else/[*@#?$!_\-]/.test(a.charAt(u))?(d=a.charAt(u),u+=1):(c=a.substr(u).match(/[^\w\d_]/))?(d=a.substr(u,c.index),u+=c.index-1):(d=a.substr(u),u=a.length);c=d;d="function"===typeof b?b(c):b[c];void 0===d&&""!=c?d="":void 0===d&&(d="$");
c="object"===typeof d?""+Db+JSON.stringify(d)+Db:""+d;return c}if(!e){if(/^(?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>])$/.test(a))return{op:a};for(var k=c.escape||"\\",n=!1,p=!1,q="",y=!1,u=0,r=a.length;u<r;u++){var H=a.charAt(u);y=y||!n&&("*"===H||"?"===H);if(p)q+=H,p=!1;else if(n)H===n?n=!1:"'"==n?q+=H:H===k?(u+=1,H=a.charAt(u),q='"'===H||H===k||"$"===H?q+H:q+(k+H)):q="$"===H?q+f():q+H;else if('"'===H||"'"===H)n=H;else{if(/^(?:\|\||\&\&|;;|\|\&|\<\(|>>|>\&|[&;()|<>])$/.test(H))return{op:a};if(/^#$/.test(H))return e=
!0,q.length?[q,{comment:a.slice(u+1)+d.slice(g+1).join(" ")}]:[{comment:a.slice(u+1)+d.slice(g+1).join(" ")}];H===k?p=!0:q="$"===H?q+f():q+H}}return y?{op:"glob",pattern:q}:q}}).reduce(function(a,b){return void 0===b?a:a.concat(b)},[])}function Kf(a,b){void 0===b&&(b=!0);var c,d=[],e=/\w+/g;for(c=e.exec(a);c;)b?d.push(c.index):d.push(c.index+c[0].length),c=e.exec(a);return d}function Lf(a,b){a=Kf(a,!0).reverse().find(function(a){return a<b});return void 0===a?0:a}function zj(a,b){var c=Kf(a,!1).find(function(a){return a>
b});return void 0===c?a.length:c}function Aj(a){return""===a.trim()?!1:0!==(a.match(/'/g)||[]).length%2||0!==(a.match(/"/g)||[]).length%2||""===a.split(/(\|\||\||&&)/g).pop().trim()||a.endsWith("\\")&&!a.endsWith("\\\\")?!0:!1}function Vd(a){return null!==a.match(/[^\\][ \t]$/m)}function Bj(a){return""===a.trim()||Vd(a)?"":Mf(a).pop()||""}function Cj(a,b){var c=Mf(b),d=c.length-1,e=c[d]||"";""===b.trim()?(d=0,e=""):Vd(b)&&(d+=1,e="");return a.reduce(function(a,b){try{var e=b(d,c);return a.concat(e)}catch(k){return console.error("Auto-complete error:",
k),a}},[]).filter(function(a){return a.startsWith(e)})}function Nf(a,b){var c=this;void 0===b&&(b=self);b.addEventListener("message",function(d){return da(c,void 0,void 0,function(){var c,f,g,h,k,n,p,q,y,u,r,H,fa,t,v,x,A;return ea(this,function(e){switch(e.label){case 0:if(!d||!d.data)return[2];c=Qa({path:[]},d.data);f=c.id;g=c.type;h=c.path;k=(d.data.argumentList||[]).map(gb);e.label=1;case 1:e.trys.push([1,12,,13]);p=h.slice(0,-1).reduce(function(a,b){return a[b]},a);q=h.reduce(function(a,b){return a[b]},
a);y=g;switch(y){case 0:return[3,2];case 1:return[3,4];case 2:return[3,5];case 3:return[3,7];case 4:return[3,9]}return[3,10];case 2:return[4,q];case 3:return n=e.sent(),[3,11];case 4:return p[h.slice(-1)[0]]=gb(d.data.value),n=!0,[3,11];case 5:return[4,q.apply(p,k)];case 6:return n=e.sent(),[3,11];case 7:return[4,new (q.bind.apply(q,Tc([void 0],k)))];case 8:return u=e.sent(),n=tc(u),[3,11];case 9:return r=new MessageChannel,H=r.port1,fa=r.port2,Nf(a,fa),n=Dj(H,[H]),[3,11];case 10:console.warn("Unrecognized message",
d.data),e.label=11;case 11:return[3,13];case 12:return n=t=e.sent(),Of.add(t),[3,13];case 13:return v=sb(Wd(n),2),x=v[0],A=v[1],b.postMessage(Qa(Qa({},x),{id:f}),A),[2]}})})});b.start&&b.start()}function Uc(a,b){void 0===b&&(b=[]);var c=new Proxy(function(){},{get:function(d,e){if("then"===e){if(0===b.length)return{then:function(){return c}};d=uc(a,{type:0,path:b.map(function(a){return a.toString()})}).then(gb);return d.then.bind(d)}return Uc(a,Tc(b,[e]))},set:function(c,e,f){f=sb(Wd(f),2);c=f[0];
f=f[1];return uc(a,{type:1,path:Tc(b,[e]).map(function(a){return a.toString()}),value:c},f).then(gb)},apply:function(c,e,f){c=b[b.length-1];if(c===Ej)return uc(a,{type:4}).then(gb);if("bind"===c)return Uc(a,b.slice(0,-1));c=sb(Pf(f),2);f=c[0];c=c[1];return uc(a,{type:2,path:b.map(function(a){return a.toString()}),argumentList:f},c).then(gb)},construct:function(c,e){e=sb(Pf(e),2);c=e[0];e=e[1];return uc(a,{type:3,path:b.map(function(a){return a.toString()}),argumentList:c},e).then(gb)}});return c}
function Pf(a){a=a.map(Wd);return[a.map(function(a){return a[0]}),Array.prototype.concat.apply([],a.map(function(a){return a[1]}))]}function Dj(a,b){Qf.set(a,b);return a}function tc(a){var b;return Object.assign(a,(b={},b[Rf]=!0,b))}function Wd(a){var b;try{for(var c=Jf(Sf),d=c.next();!d.done;d=c.next()){var e=sb(d.value,2),f=e[0],g=e[1];if(g.canHandle(a)){var h=sb(g.serialize(a),2);return[{type:3,name:f,value:h[0]},h[1]]}}}catch(n){var k={error:n}}finally{try{d&&!d.done&&(b=c.return)&&b.call(c)}finally{if(k)throw k.error;
}}return[{type:0,value:a},Qf.get(a)||[]]}function gb(a){switch(a.type){case 3:return Sf.get(a.name).deserialize(a.value);case 0:return a.value}}function uc(a,b,c){return new Promise(function(d){var e=Fj();a.addEventListener("message",function h(b){b.data&&b.data.id&&b.data.id===e&&(a.removeEventListener("message",h),d(b.data))});a.start&&a.start();a.postMessage(Qa({id:e},b),c)})}function Fj(){return Array(4).fill(0).map(function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)}).join("-")}
function Xd(a,b){Xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return Xd(a,b)}function Tf(a,b){function c(){this.constructor=a}Xd(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}function Uf(a){var b="function"===typeof Symbol&&a[Symbol.iterator],c=0;return b?b.call(a):{next:function(){a&&c>=a.length&&(a=void 0);return{value:a&&a[c++],done:!a}}}}function Vc(a,b){var c=
"function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[];try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(g){var f={error:g}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(f)throw f.error;}}return e}function Yd(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(Vc(arguments[b]));return a}function Vf(){Zd=!0;for(var a=0;64>a;++a)Ha[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],Ia["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=
a;Ia[45]=62;Ia[95]=63}function Gj(a,b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(Ha[b>>18&63]+Ha[b>>12&63]+Ha[b>>6&63]+Ha[b&63]);return d.join("")}function Wf(a){Zd||Vf();for(var b=a.length,c=b%3,d="",e=[],f=0,g=b-c;f<g;f+=16383)e.push(Gj(a,f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=Ha[a>>2],d+=Ha[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=Ha[a>>10],d+=Ha[a>>4&63],d+=Ha[a<<2&63],d+="=");e.push(d);return e.join("")}function Wc(a,b,c,d,e){var f=8*e-d-1,g=(1<<f)-1,h=g>>
1,k=-7;e=c?e-1:0;var n=c?-1:1,p=a[b+e];e+=n;c=p&(1<<-k)-1;p>>=-k;for(k+=f;0<k;c=256*c+a[b+e],e+=n,k-=8);f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;f=256*f+a[b+e],e+=n,k-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(p?-1:1);f+=Math.pow(2,d);c-=h}return(p?-1:1)*f*Math.pow(2,c-d)}function Xc(a,b,c,d,e,f){var g,h=8*f-e-1,k=(1<<h)-1,n=k>>1,p=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var q=d?1:-1,y=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);for(isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=k):(d=Math.floor(Math.log(b)/
Math.LN2),1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+n?b+p/g:b+p*Math.pow(2,1-n),2<=b*g&&(d++,g/=2),d+n>=k?(b=0,d=k):1<=d+n?(b=(b*g-1)*Math.pow(2,e),d+=n):(b=b*Math.pow(2,n-1)*Math.pow(2,e),d=0));8<=e;a[c+f]=b&255,f+=q,b/=256,e-=8);d=d<<e|b;for(h+=e;0<h;a[c+f]=d&255,f+=q,d/=256,h-=8);a[c+f-q]|=128*y}function hb(a,b){if((B.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");B.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=B.prototype):(null===a&&(a=
new B(b)),a.length=b);return a}function B(a,b,c){if(!(B.TYPED_ARRAY_SUPPORT||this instanceof B))return new B(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return $d(this,a)}return Xf(this,a,b,c)}function Xf(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");
if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);B.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=B.prototype):a=ae(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!B.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=Yf(b,a)|0;d=hb(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return Hj(a,b)}function Zf(a){if("number"!==
typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function $d(a,b){Zf(b);a=hb(a,0>b?0:be(b)|0);if(!B.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function ae(a,b){var c=0>b.length?0:be(b.length)|0;a=hb(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function Hj(a,b){if(Ba(b)){var c=be(b.length)|0;a=hb(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof
ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||(c=b.length,c=c!==c),c?hb(a,0):ae(a,b);if("Buffer"===b.type&&$f(b.data))return ae(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function be(a){if(a>=(B.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(B.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function Ba(a){return!(null==
a||!a._isBuffer)}function Yf(a,b){if(Ba(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return Yc(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return ag(a).length;
default:if(d)return Yc(a).length;b=(""+b).toLowerCase();d=!0}}function Ij(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return bg(this,b,c);case "ascii":a="";for(c=Math.min(this.length,
c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?Wf(this):Wf(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function Eb(a,b,c){var d=
a[b];a[b]=a[c];a[c]=d}function cg(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=B.from(b,d));if(Ba(b))return 0===b.length?-1:dg(a,b,c,d,e);if("number"===typeof b)return b&=255,B.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,
b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):dg(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function dg(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,k=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;h/=2;k/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===k)return d*g}else-1!==d&&(c-=c-d),d=
-1;else for(c+k>h&&(c=h-k);0<=c;c--){h=!0;for(d=0;d<k;d++)if(f(a,c+d)!==f(b,d)){h=!1;break}if(h)return c}return-1}function bg(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?4:223<e?3:191<e?2:1;if(b+g<=c)switch(g){case 1:128>e&&(f=e);break;case 2:var h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=a[b+1];var k=a[b+2];128===(h&192)&&128===(k&192)&&(e=(e&15)<<12|(h&63)<<6|k&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=a[b+1];k=a[b+2];var n=a[b+
3];128===(h&192)&&128===(k&192)&&128===(n&192)&&(e=(e&15)<<18|(h&63)<<12|(k&63)<<6|n&63,65535<e&&1114112>e&&(f=e))}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);b+=g}a=d.length;if(a<=eg)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=eg));d=c}return d}function ka(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");
}function na(a,b,c,d,e,f){if(!Ba(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");}function Zc(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function $c(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function ad(a,b,c,d){if(c+
d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function Yc(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;
f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function fg(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function ag(a){a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(Jj,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";Zd||Vf();
var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");var c="="===a[b-2]?2:"="===a[b-1]?1:0,d=new Kj(3*b/4-c),e=0<c?b-4:b,f=0;for(b=0;b<e;b+=4){var g=Ia[a.charCodeAt(b)]<<18|Ia[a.charCodeAt(b+1)]<<12|Ia[a.charCodeAt(b+2)]<<6|Ia[a.charCodeAt(b+3)];d[f++]=g>>16&255;d[f++]=g>>8&255;d[f++]=g&255}2===c?(g=Ia[a.charCodeAt(b)]<<2|Ia[a.charCodeAt(b+1)]>>4,d[f++]=g&255):1===c&&(g=Ia[a.charCodeAt(b)]<<10|Ia[a.charCodeAt(b+1)]<<4|Ia[a.charCodeAt(b+2)]>>2,d[f++]=g>>8&255,d[f++]=
g&255);return d}function vc(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function gg(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function ce(a,b){return b={exports:{}},a(b,b.exports),b.exports}function hg(){throw Error("setTimeout has not been defined");}function ig(){throw Error("clearTimeout has not been defined");}function jg(a){if(tb===setTimeout)return setTimeout(a,0);if((tb===hg||!tb)&&setTimeout)return tb=
setTimeout,setTimeout(a,0);try{return tb(a,0)}catch(b){try{return tb.call(null,a,0)}catch(c){return tb.call(this,a,0)}}}function Lj(a){if(bb===clearTimeout)return clearTimeout(a);if((bb===ig||!bb)&&clearTimeout)return bb=clearTimeout,clearTimeout(a);try{return bb(a)}catch(b){try{return bb.call(null,a)}catch(c){return bb.call(this,a)}}}function Mj(){fc&&Tb&&(fc=!1,Tb.length?Ra=Tb.concat(Ra):bd=-1,Ra.length&&kg())}function kg(){if(!fc){var a=jg(Mj);fc=!0;for(var b=Ra.length;b;){Tb=Ra;for(Ra=[];++bd<
b;)Tb&&Tb[bd].run();bd=-1;b=Ra.length}Tb=null;fc=!1;Lj(a)}}function lg(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];Ra.push(new mg(a,b));1!==Ra.length||fc||jg(kg)}function mg(a,b){this.fun=a;this.array=b}function Ub(){}function ng(){de=!0;for(var a=0;64>a;++a)ib[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],Sa["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;Sa[45]=62;Sa[95]=
63}function Nj(a,b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(ib[b>>18&63]+ib[b>>12&63]+ib[b>>6&63]+ib[b&63]);return d.join("")}function og(a){de||ng();for(var b=a.length,c=b%3,d="",e=[],f=0,g=b-c;f<g;f+=16383)e.push(Nj(a,f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=ib[a>>2],d+=ib[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=ib[a>>10],d+=ib[a>>4&63],d+=ib[a<<2&63],d+="=");e.push(d);return e.join("")}function cd(a,b,c,d,e){var f=8*e-d-1,g=(1<<f)-1,h=g>>1,k=-7;e=c?e-1:0;
var n=c?-1:1,p=a[b+e];e+=n;c=p&(1<<-k)-1;p>>=-k;for(k+=f;0<k;c=256*c+a[b+e],e+=n,k-=8);f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;f=256*f+a[b+e],e+=n,k-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(p?-1:1);f+=Math.pow(2,d);c-=h}return(p?-1:1)*f*Math.pow(2,c-d)}function dd(a,b,c,d,e,f){var g,h=8*f-e-1,k=(1<<h)-1,n=k>>1,p=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var q=d?1:-1,y=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);for(isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=k):(d=Math.floor(Math.log(b)/Math.LN2),
1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+n?b+p/g:b+p*Math.pow(2,1-n),2<=b*g&&(d++,g/=2),d+n>=k?(b=0,d=k):1<=d+n?(b=(b*g-1)*Math.pow(2,e),d+=n):(b=b*Math.pow(2,n-1)*Math.pow(2,e),d=0));8<=e;a[c+f]=b&255,f+=q,b/=256,e-=8);d=d<<e|b;for(h+=e;0<h;a[c+f]=d&255,f+=q,d/=256,h-=8);a[c+f-q]|=128*y}function Ta(a,b){if((A.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");A.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=A.prototype):(null===a&&(a=new A(b)),
a.length=b);return a}function A(a,b,c){if(!(A.TYPED_ARRAY_SUPPORT||this instanceof A))return new A(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return ee(this,a)}return pg(this,a,b,c)}function pg(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");
if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);A.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=A.prototype):a=fe(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!A.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=qg(b,a)|0;d=Ta(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return Oj(a,b)}function rg(a){if("number"!==
typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function ee(a,b){rg(b);a=Ta(a,0>b?0:ge(b)|0);if(!A.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function fe(a,b){var c=0>b.length?0:ge(b.length)|0;a=Ta(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function Oj(a,b){if(jb(b)){var c=ge(b.length)|0;a=Ta(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof
ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||(c=b.length,c=c!==c),c?Ta(a,0):fe(a,b);if("Buffer"===b.type&&sg(b.data))return fe(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function ge(a){if(a>=(A.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(A.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function jb(a){return!(null==
a||!a._isBuffer)}function qg(a,b){if(jb(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return ed(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return tg(a).length;
default:if(d)return ed(a).length;b=(""+b).toLowerCase();d=!0}}function Pj(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return ug(this,b,c);case "ascii":a="";for(c=Math.min(this.length,
c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?og(this):og(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function Vb(a,b,c){var d=
a[b];a[b]=a[c];a[c]=d}function vg(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=A.from(b,d));if(jb(b))return 0===b.length?-1:wg(a,b,c,d,e);if("number"===typeof b)return b&=255,A.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,
b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):wg(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function wg(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,k=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;h/=2;k/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===k)return d*g}else-1!==d&&(c-=c-d),d=
-1;else for(c+k>h&&(c=h-k);0<=c;c--){h=!0;for(d=0;d<k;d++)if(f(a,c+d)!==f(b,d)){h=!1;break}if(h)return c}return-1}function ug(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?4:223<e?3:191<e?2:1;if(b+g<=c)switch(g){case 1:128>e&&(f=e);break;case 2:var h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=a[b+1];var k=a[b+2];128===(h&192)&&128===(k&192)&&(e=(e&15)<<12|(h&63)<<6|k&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=a[b+1];k=a[b+2];var n=a[b+
3];128===(h&192)&&128===(k&192)&&128===(n&192)&&(e=(e&15)<<18|(h&63)<<12|(k&63)<<6|n&63,65535<e&&1114112>e&&(f=e))}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);b+=g}a=d.length;if(a<=xg)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=xg));d=c}return d}function oa(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");
}function pa(a,b,c,d,e,f){if(!jb(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");}function fd(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function gd(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function hd(a,b,c,d){if(c+
d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function ed(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;
f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function yg(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function tg(a){a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(Qj,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";de||ng();
var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");var c="="===a[b-2]?2:"="===a[b-1]?1:0,d=new Rj(3*b/4-c),e=0<c?b-4:b,f=0;for(b=0;b<e;b+=4){var g=Sa[a.charCodeAt(b)]<<18|Sa[a.charCodeAt(b+1)]<<12|Sa[a.charCodeAt(b+2)]<<6|Sa[a.charCodeAt(b+3)];d[f++]=g>>16&255;d[f++]=g>>8&255;d[f++]=g&255}2===c?(g=Sa[a.charCodeAt(b)]<<2|Sa[a.charCodeAt(b+1)]>>4,d[f++]=g&255):1===c&&(g=Sa[a.charCodeAt(b)]<<10|Sa[a.charCodeAt(b+1)]<<4|Sa[a.charCodeAt(b+2)]>>2,d[f++]=g>>8&255,d[f++]=
g&255);return d}function wc(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function zg(a){return null!=a&&(!!a._isBuffer||Ag(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&Ag(a.slice(0,0)))}function Ag(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Ua(a){if("string"!==typeof a)throw new TypeError("Path must be a string. Received "+JSON.stringify(a));}function Bg(a,b){for(var c="",d=0,e=
-1,f=0,g,h=0;h<=a.length;++h){if(h<a.length)g=a.charCodeAt(h);else if(47===g)break;else g=47;if(47===g){if(e!==h-1&&1!==f)if(e!==h-1&&2===f){if(2>c.length||2!==d||46!==c.charCodeAt(c.length-1)||46!==c.charCodeAt(c.length-2))if(2<c.length){if(e=c.lastIndexOf("/"),e!==c.length-1){-1===e?(c="",d=0):(c=c.slice(0,e),d=c.length-1-c.lastIndexOf("/"));e=h;f=0;continue}}else if(2===c.length||1===c.length){c="";d=0;e=h;f=0;continue}b&&(c=0<c.length?c+"/..":"..",d=2)}else c=0<c.length?c+("/"+a.slice(e+1,h)):
a.slice(e+1,h),d=h-e-1;e=h;f=0}else 46===g&&-1!==f?++f:f=-1}return c}function gc(a){var b=Math.trunc(a);a=F(Math.round(1E3*(a-b)));return F(b)*F(1E3)+a}function J(a){return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];try{return a.apply(void 0,Yd(b))}catch(d){if("number"===typeof d)return d;if(d&&d.errno)return Sj[d.code]||28;throw d;}}}function Cg(a,b){var c=a.FD_MAP.get(b);if(!c)throw 8;if(void 0===c.filetype){var d=a.bindings.fs.fstatSync(c.real);a=Dg(a,b,d);b=a.rightsBase;
d=a.rightsInheriting;c.filetype=a.filetype;c.rights||(c.rights={base:b,inheriting:d})}return c}function Dg(a,b,c){switch(!0){case c.isBlockDevice():return{filetype:1,rightsBase:hc,rightsInheriting:hc};case c.isCharacterDevice():return void 0!==b&&a.bindings.isTTY(b)?{filetype:2,rightsBase:Tj,rightsInheriting:Uj}:{filetype:2,rightsBase:hc,rightsInheriting:hc};case c.isDirectory():return{filetype:3,rightsBase:he,rightsInheriting:Eg};case c.isFIFO():return{filetype:6,rightsBase:Fg,rightsInheriting:hc};
case c.isFile():return{filetype:4,rightsBase:xc,rightsInheriting:Vj};case c.isSocket():return{filetype:6,rightsBase:Fg,rightsInheriting:hc};case c.isSymbolicLink():return{filetype:7,rightsBase:F(0),rightsInheriting:F(0)};default:return{filetype:0,rightsBase:F(0),rightsInheriting:F(0)}}}function Wj(a,b,c,d){return new (c||(c=Promise))(function(e,f){function g(a){try{k(d.next(a))}catch(p){f(p)}}function h(a){try{k(d["throw"](a))}catch(p){f(p)}}function k(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(g,
h)}k((d=d.apply(a,b||[])).next())})}function Xj(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(f)throw new TypeError("Generator is already executing.");for(;e;)try{if(f=1,g&&(h=c[0]&2?g["return"]:c[0]?g["throw"]||((h=g["return"])&&h.call(g),0):g.next)&&!(h=h.call(g,c[1])).done)return h;if(g=0,h)c=[c[0]&2,h.value];switch(c[0]){case 0:case 1:h=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;g=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;
default:if(!(h=e.trys,h=0<h.length&&h[h.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!h||c[1]>h[0]&&c[1]<h[3]))e.label=c[1];else if(6===c[0]&&e.label<h[1])e.label=h[1],h=c;else if(h&&e.label<h[2])e.label=h[2],e.ops.push(c);else{h[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(p){c=[6,p],g=0}finally{f=h=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},f,g,h,k;return k={next:c(0),
"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k}function qa(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a["default"]:a}function W(a,b){return b={exports:{}},a(b,b.exports),b.exports}function Gg(){ie=!0;for(var a=0;64>a;++a)Va[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],Ca["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=a;Ca[45]=62;Ca[95]=63}function Yj(a,
b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(Va[b>>18&63]+Va[b>>12&63]+Va[b>>6&63]+Va[b&63]);return d.join("")}function Hg(a){ie||Gg();for(var b=a.length,c=b%3,d="",e=[],f=0,g=b-c;f<g;f+=16383)e.push(Yj(a,f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=Va[a>>2],d+=Va[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=Va[a>>10],d+=Va[a>>4&63],d+=Va[a<<2&63],d+="=");e.push(d);return e.join("")}function id(a,b,c,d,e){var f=8*e-d-1,g=(1<<f)-1,h=g>>1,k=-7;e=c?e-1:0;var n=c?-1:1,p=a[b+
e];e+=n;c=p&(1<<-k)-1;p>>=-k;for(k+=f;0<k;c=256*c+a[b+e],e+=n,k-=8);f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;f=256*f+a[b+e],e+=n,k-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(p?-1:1);f+=Math.pow(2,d);c-=h}return(p?-1:1)*f*Math.pow(2,c-d)}function jd(a,b,c,d,e,f){var g,h=8*f-e-1,k=(1<<h)-1,n=k>>1,p=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var q=d?1:-1,y=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);for(isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=k):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,
-d))&&(d--,g*=2),b=1<=d+n?b+p/g:b+p*Math.pow(2,1-n),2<=b*g&&(d++,g/=2),d+n>=k?(b=0,d=k):1<=d+n?(b=(b*g-1)*Math.pow(2,e),d+=n):(b=b*Math.pow(2,n-1)*Math.pow(2,e),d=0));8<=e;a[c+f]=b&255,f+=q,b/=256,e-=8);d=d<<e|b;for(h+=e;0<h;a[c+f]=d&255,f+=q,d/=256,h-=8);a[c+f-q]|=128*y}function ub(a,b){if((t.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");t.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=t.prototype):(null===a&&(a=new t(b)),a.length=b);return a}
function t(a,b,c){if(!(t.TYPED_ARRAY_SUPPORT||this instanceof t))return new t(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return je(this,a)}return Ig(this,a,b,c)}function Ig(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");
if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);t.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=t.prototype):a=ke(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!t.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=Jg(b,a)|0;d=ub(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return Zj(a,b)}function Kg(a){if("number"!==
typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function je(a,b){Kg(b);a=ub(a,0>b?0:le(b)|0);if(!t.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function ke(a,b){var c=0>b.length?0:le(b.length)|0;a=ub(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function Zj(a,b){if(kb(b)){var c=le(b.length)|0;a=ub(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof
ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||(c=b.length,c=c!==c),c?ub(a,0):ke(a,b);if("Buffer"===b.type&&Lg(b.data))return ke(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function le(a){if(a>=(t.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(t.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function kb(a){return!(null==
a||!a._isBuffer)}function Jg(a,b){if(kb(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return kd(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return Mg(a).length;
default:if(d)return kd(a).length;b=(""+b).toLowerCase();d=!0}}function ak(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return Ng(this,b,c);case "ascii":a="";for(c=Math.min(this.length,
c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?Hg(this):Hg(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function Wb(a,b,c){var d=
a[b];a[b]=a[c];a[c]=d}function Og(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=t.from(b,d));if(kb(b))return 0===b.length?-1:Pg(a,b,c,d,e);if("number"===typeof b)return b&=255,t.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,
b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):Pg(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function Pg(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,k=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;h/=2;k/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===k)return d*g}else-1!==d&&(c-=c-d),d=
-1;else for(c+k>h&&(c=h-k);0<=c;c--){h=!0;for(d=0;d<k;d++)if(f(a,c+d)!==f(b,d)){h=!1;break}if(h)return c}return-1}function Ng(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?4:223<e?3:191<e?2:1;if(b+g<=c)switch(g){case 1:128>e&&(f=e);break;case 2:var h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=a[b+1];var k=a[b+2];128===(h&192)&&128===(k&192)&&(e=(e&15)<<12|(h&63)<<6|k&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=a[b+1];k=a[b+2];var n=a[b+
3];128===(h&192)&&128===(k&192)&&128===(n&192)&&(e=(e&15)<<18|(h&63)<<12|(k&63)<<6|n&63,65535<e&&1114112>e&&(f=e))}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);b+=g}a=d.length;if(a<=Qg)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=Qg));d=c}return d}function la(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");
}function ua(a,b,c,d,e,f){if(!kb(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");}function ld(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function md(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function nd(a,b,c,d){if(c+
d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function kd(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;
f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function Rg(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function Mg(a){a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(bk,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";ie||Gg();
var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");var c="="===a[b-2]?2:"="===a[b-1]?1:0,d=new ck(3*b/4-c),e=0<c?b-4:b,f=0;for(b=0;b<e;b+=4){var g=Ca[a.charCodeAt(b)]<<18|Ca[a.charCodeAt(b+1)]<<12|Ca[a.charCodeAt(b+2)]<<6|Ca[a.charCodeAt(b+3)];d[f++]=g>>16&255;d[f++]=g>>8&255;d[f++]=g&255}2===c?(g=Ca[a.charCodeAt(b)]<<2|Ca[a.charCodeAt(b+1)]>>4,d[f++]=g&255):1===c&&(g=Ca[a.charCodeAt(b)]<<10|Ca[a.charCodeAt(b+1)]<<4|Ca[a.charCodeAt(b+2)]>>2,d[f++]=g>>8&255,d[f++]=
g&255);return d}function yc(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Wa(a){return null!=a&&(!!a._isBuffer||Sg(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&Sg(a.slice(0,0)))}function Sg(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function Tg(){throw Error("setTimeout has not been defined");}function Ug(){throw Error("clearTimeout has not been defined");}function Vg(a){if(vb===
setTimeout)return setTimeout(a,0);if((vb===Tg||!vb)&&setTimeout)return vb=setTimeout,setTimeout(a,0);try{return vb(a,0)}catch(b){try{return vb.call(null,a,0)}catch(c){return vb.call(this,a,0)}}}function dk(a){if(wb===clearTimeout)return clearTimeout(a);if((wb===Ug||!wb)&&clearTimeout)return wb=clearTimeout,clearTimeout(a);try{return wb(a)}catch(b){try{return wb.call(null,a)}catch(c){return wb.call(this,a)}}}function ek(){ic&&Fb&&(ic=!1,Fb.length?lb=Fb.concat(lb):od=-1,lb.length&&Wg())}function Wg(){if(!ic){var a=
Vg(ek);ic=!0;for(var b=lb.length;b;){Fb=lb;for(lb=[];++od<b;)Fb&&Fb[od].run();od=-1;b=lb.length}Fb=null;ic=!1;dk(a)}}function Da(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];lb.push(new Xg(a,b));1!==lb.length||ic||Vg(Wg)}function Xg(a,b){this.fun=a;this.array=b}function Xb(){}function me(a){if(!pd(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(mb(arguments[c]));return b.join(" ")}c=1;var d=arguments,e=d.length;b=String(a).replace(fk,
function(a){if("%%"===a)return"%";if(c>=e)return a;switch(a){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":try{return JSON.stringify(d[c++])}catch(h){return"[Circular]"}default:return a}});for(var f=d[c];c<e;f=d[++c])b=null!==f&&Yb(f)?b+(" "+mb(f)):b+(" "+f);return b}function ne(a,b){if(La(Gb.process))return function(){return ne(a,b).apply(this,arguments)};if(!0===xb.noDeprecation)return a;var c=!1;return function(){if(!c){if(xb.throwDeprecation)throw Error(b);xb.traceDeprecation?
console.trace(b):console.error(b);c=!0}return a.apply(this,arguments)}}function Yg(a){La(oe)&&(oe=xb.env.NODE_DEBUG||"");a=a.toUpperCase();qd[a]||((new RegExp("\\b"+a+"\\b","i")).test(oe)?qd[a]=function(){var b=me.apply(null,arguments);console.error("%s %d: %s",a,0,b)}:qd[a]=function(){});return qd[a]}function mb(a,b){var c={seen:[],stylize:gk};3<=arguments.length&&(c.depth=arguments[2]);4<=arguments.length&&(c.colors=arguments[3]);pe(b)?c.showHidden=b:b&&Zg(c,b);La(c.showHidden)&&(c.showHidden=!1);
La(c.depth)&&(c.depth=2);La(c.colors)&&(c.colors=!1);La(c.customInspect)&&(c.customInspect=!0);c.colors&&(c.stylize=hk);return rd(c,a,c.depth)}function hk(a,b){return(b=mb.styles[b])?"\u001b["+mb.colors[b][0]+"m"+a+"\u001b["+mb.colors[b][1]+"m":a}function gk(a){return a}function ik(a){var b={};a.forEach(function(a){b[a]=!0});return b}function rd(a,b,c){if(a.customInspect&&b&&jc(b.inspect)&&b.inspect!==mb&&(!b.constructor||b.constructor.prototype!==b)){var d=b.inspect(c,a);pd(d)||(d=rd(a,d,c));return d}if(d=
jk(a,b))return d;var e=Object.keys(b),f=ik(e);a.showHidden&&(e=Object.getOwnPropertyNames(b));if(zc(b)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return qe(b);if(0===e.length){if(jc(b))return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(Zb(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(Ac(b))return a.stylize(Date.prototype.toString.call(b),"date");if(zc(b))return qe(b)}d="";var g=!1,h=["{","}"];$g(b)&&(g=!0,h=["[","]"]);jc(b)&&(d=" [Function"+(b.name?
": "+b.name:"")+"]");Zb(b)&&(d=" "+RegExp.prototype.toString.call(b));Ac(b)&&(d=" "+Date.prototype.toUTCString.call(b));zc(b)&&(d=" "+qe(b));if(0===e.length&&(!g||0==b.length))return h[0]+d+h[1];if(0>c)return Zb(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);e=g?kk(a,b,c,f,e):e.map(function(d){return re(a,b,c,f,d,g)});a.seen.pop();return lk(e,d,h)}function jk(a,b){if(La(b))return a.stylize("undefined","undefined");if(pd(b))return b="'"+JSON.stringify(b).replace(/^"|"$/g,
"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if(ah(b))return a.stylize(""+b,"number");if(pe(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function qe(a){return"["+Error.prototype.toString.call(a)+"]"}function kk(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)Object.prototype.hasOwnProperty.call(b,String(g))?f.push(re(a,b,c,d,String(g),!0)):f.push("");e.forEach(function(e){e.match(/^\d+$/)||f.push(re(a,b,c,d,e,!0))});return f}function re(a,
b,c,d,e,f){var g,h;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?h=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(h=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(d,e)||(g="["+e+"]");h||(0>a.seen.indexOf(b.value)?(h=null===c?rd(a,b.value,null):rd(a,b.value,c-1),-1<h.indexOf("\n")&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]",
"special"));if(La(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e);g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function lk(a,b,c){return 60<a.reduce(function(a,b){b.indexOf("\n");return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function $g(a){return Array.isArray(a)}
function pe(a){return"boolean"===typeof a}function ah(a){return"number"===typeof a}function pd(a){return"string"===typeof a}function La(a){return void 0===a}function Zb(a){return Yb(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}function Yb(a){return"object"===typeof a&&null!==a}function Ac(a){return Yb(a)&&"[object Date]"===Object.prototype.toString.call(a)}function zc(a){return Yb(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function jc(a){return"function"===
typeof a}function se(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a}function te(a){return 10>a?"0"+a.toString(10):a.toString(10)}function mk(){var a=new Date,b=[te(a.getHours()),te(a.getMinutes()),te(a.getSeconds())].join(":");return[a.getDate(),nk[a.getMonth()],b].join(" ")}function Zg(a,b){if(!b||!Yb(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}function bh(a,b){if(a===b)return 0;for(var c=
a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0}function ch(){return"undefined"!==typeof ue?ue:ue=function(){return"foo"===function(){}.name}()}function dh(a){return Wa(a)||"function"!==typeof Gb.ArrayBuffer?!1:"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a?a instanceof DataView||a.buffer&&a.buffer instanceof ArrayBuffer?!0:!1:!1}function sa(a,b){a||ra(a,!0,b,"==",ve)}function eh(a){if(jc(a))return ch()?a.name:(a=a.toString().match(ok))&&
a[1]}function we(a){this.name="AssertionError";this.actual=a.actual;this.expected=a.expected;this.operator=a.operator;a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=fh(gh(this.actual),128)+" "+this.operator+" "+fh(gh(this.expected),128),this.generatedMessage=!0);var b=a.stackStartFunction||ra;Error.captureStackTrace?Error.captureStackTrace(this,b):(a=Error(),a.stack&&(a=a.stack,b=eh(b),b=a.indexOf("\n"+b),0<=b&&(b=a.indexOf("\n",b+1),a=a.substring(b+1)),this.stack=a))}function fh(a,
b){return"string"===typeof a?a.length<b?a:a.slice(0,b):a}function gh(a){if(ch()||!jc(a))return mb(a);a=eh(a);return"[Function"+(a?": "+a:"")+"]"}function ra(a,b,c,d,e){throw new we({message:c,actual:a,expected:b,operator:d,stackStartFunction:e});}function ve(a,b){a||ra(a,!0,b,"==",ve)}function hh(a,b,c){a!=b&&ra(a,b,c,"==",hh)}function ih(a,b,c){a==b&&ra(a,b,c,"!=",ih)}function jh(a,b,c){kc(a,b,!1)||ra(a,b,c,"deepEqual",jh)}function kh(a,b,c){kc(a,b,!0)||ra(a,b,c,"deepStrictEqual",kh)}function kc(a,
b,c,d){if(a===b)return!0;if(Wa(a)&&Wa(b))return 0===bh(a,b);if(Ac(a)&&Ac(b))return a.getTime()===b.getTime();if(Zb(a)&&Zb(b))return a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase;if(null!==a&&"object"===typeof a||null!==b&&"object"===typeof b){if(!dh(a)||!dh(b)||Object.prototype.toString.call(a)!==Object.prototype.toString.call(b)||a instanceof Float32Array||a instanceof Float64Array){if(Wa(a)!==Wa(b))return!1;d=d||{actual:[],
expected:[]};var e=d.actual.indexOf(a);if(-1!==e&&e===d.expected.indexOf(b))return!0;d.actual.push(a);d.expected.push(b);return pk(a,b,c,d)}return 0===bh(new Uint8Array(a.buffer),new Uint8Array(b.buffer))}return c?a===b:a==b}function pk(a,b,c,d){if(null===a||void 0===a||null===b||void 0===b)return!1;if(se(a)||se(b))return a===b;if(c&&Object.getPrototypeOf(a)!==Object.getPrototypeOf(b))return!1;var e="[object Arguments]"==Object.prototype.toString.call(a),f="[object Arguments]"==Object.prototype.toString.call(b);
if(e&&!f||!e&&f)return!1;if(e)return a=lh.call(a),b=lh.call(b),kc(a,b,c);e=mh(a);var g=mh(b);if(e.length!==g.length)return!1;e.sort();g.sort();for(f=e.length-1;0<=f;f--)if(e[f]!==g[f])return!1;for(f=e.length-1;0<=f;f--)if(g=e[f],!kc(a[g],b[g],c,d))return!1;return!0}function nh(a,b,c){kc(a,b,!1)&&ra(a,b,c,"notDeepEqual",nh)}function oh(a,b,c){kc(a,b,!0)&&ra(a,b,c,"notDeepStrictEqual",oh)}function ph(a,b,c){a!==b&&ra(a,b,c,"===",ph)}function qh(a,b,c){a===b&&ra(a,b,c,"!==",qh)}function rh(a,b){if(!a||
!b)return!1;if("[object RegExp]"==Object.prototype.toString.call(b))return b.test(a);try{if(a instanceof b)return!0}catch(c){}return Error.isPrototypeOf(b)?!1:!0===b.call({},a)}function sh(a,b,c,d){if("function"!==typeof b)throw new TypeError('"block" argument must be a function');"string"===typeof c&&(d=c,c=null);try{b()}catch(h){var e=h}b=e;d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:".");a&&!b&&ra(b,c,"Missing expected exception"+d);e="string"===typeof d;var f=!a&&zc(b),g=!a&&b&&!c;(f&&e&&rh(b,
c)||g)&&ra(b,c,"Got unwanted exception"+d);if(a&&b&&c&&!rh(b,c)||!a&&b)throw b;}function qk(a,b){for(var c=0,d=a.length-1;0<=d;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function xe(){for(var a="",b=!1,c=arguments.length-1;-1<=c&&!b;c--){var d=0<=c?arguments[c]:"/";if("string"!==typeof d)throw new TypeError("Arguments to path.resolve must be strings");d&&(a=d+"/"+a,b="/"===d.charAt(0))}a=qk(rk(a.split("/"),function(a){return!!a}),
!b).join("/");return(b?"/":"")+a||"."}function rk(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}function yb(){}function O(){O.init.call(this)}function th(a,b,c,d){var e;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');if(e=a._events){e.newListener&&(a.emit("newListener",b,c.listener?c.listener:c),e=a._events);var f=e[b]}else e=a._events=new yb,a._eventsCount=0;f?("function"===typeof f?f=e[b]=d?[c,f]:[f,
c]:d?f.unshift(c):f.push(c),f.warned||(c=void 0===a._maxListeners?O.defaultMaxListeners:a._maxListeners)&&0<c&&f.length>c&&(f.warned=!0,c=Error("Possible EventEmitter memory leak detected. "+f.length+" "+b+" listeners added. Use emitter.setMaxListeners() to increase limit"),c.name="MaxListenersExceededWarning",c.emitter=a,c.type=b,c.count=f.length,"function"===typeof console.warn?console.warn(c):console.log(c))):(e[b]=c,++a._eventsCount);return a}function uh(a,b,c){function d(){a.removeListener(b,
d);e||(e=!0,c.apply(a,arguments))}var e=!1;d.listener=c;return d}function vh(a){var b=this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function Bc(a,b){for(var c=Array(b);b--;)c[b]=a[b];return c}function $b(){this.tail=this.head=null;this.length=0}function sk(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;
default:if(b)return;a=(""+a).toLowerCase();b=!0}}function Cc(a){var b=sk(a);if("string"!==typeof b&&(ye.isEncoding===wh||!wh(a)))throw Error("Unknown encoding: "+a);this.encoding=b||a;switch(this.encoding){case "utf16le":this.text=tk;this.end=uk;a=4;break;case "utf8":this.fillLast=vk;a=4;break;case "base64":this.text=wk;this.end=xk;a=3;break;default:this.write=yk;this.end=zk;return}this.lastTotal=this.lastNeed=0;this.lastChar=ye.allocUnsafe(a)}function ze(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:
30===a>>3?4:2===a>>6?-1:-2}function Ak(a,b,c){var d=b.length-1;if(d<c)return 0;var e=ze(b[d]);if(0<=e)return 0<e&&(a.lastNeed=e-1),e;if(--d<c||-2===e)return 0;e=ze(b[d]);if(0<=e)return 0<e&&(a.lastNeed=e-2),e;if(--d<c||-2===e)return 0;e=ze(b[d]);return 0<=e?(0<e&&(2===e?e=0:a.lastNeed=e-3),e):0}function vk(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&
2<a.length&&128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function tk(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-
1],b.slice(0,-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function uk(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function wk(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",
b,a.length-c)}function xk(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function yk(a){return a.toString(this.encoding)}function zk(a){return a&&a.length?this.write(a):""}function Bk(a,b,c){if("function"===typeof a.prependListener)return a.prependListener(b,c);if(a._events&&a._events[b])Array.isArray(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]];else a.on(b,c)}function xh(a,b){a=a||{};this.objectMode=!!a.objectMode;
b instanceof Ma&&(this.objectMode=this.objectMode||!!a.readableObjectMode);b=a.highWaterMark;var c=this.objectMode?16:16384;this.highWaterMark=b||0===b?b:c;this.highWaterMark=~~this.highWaterMark;this.buffer=new $b;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=
0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(this.decoder=new yh(a.encoding),this.encoding=a.encoding)}function K(a){if(!(this instanceof K))return new K(a);this._readableState=new xh(a,this);this.readable=!0;a&&"function"===typeof a.read&&(this._read=a.read);O.call(this)}function zh(a,b,c,d,e){var f=c,g=null;Wa(f)||"string"===typeof f||null===f||void 0===f||b.objectMode||(g=new TypeError("Invalid non-string/buffer chunk"));if(f=g)a.emit("error",f);else if(null===c)b.reading=
!1,b.ended||(b.decoder&&(c=b.decoder.end())&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length),b.ended=!0,sd(a));else if(b.objectMode||c&&0<c.length)if(b.ended&&!e)a.emit("error",Error("stream.push() after EOF"));else if(b.endEmitted&&e)a.emit("error",Error("stream.unshift() after end event"));else{if(b.decoder&&!e&&!d){c=b.decoder.write(c);var h=!b.objectMode&&0===c.length}e||(b.reading=!1);h||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,
e?b.buffer.unshift(c):b.buffer.push(c),b.needReadable&&sd(a)));b.readingMore||(b.readingMore=!0,Da(Ck,a,b))}else e||(b.reading=!1);return!b.ended&&(b.needReadable||b.length<b.highWaterMark||0===b.length)}function Ah(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var c=a;8388608<=c?c=8388608:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++);b.highWaterMark=c}return a<=b.length?
a:b.ended?b.length:(b.needReadable=!0,0)}function sd(a){var b=a._readableState;b.needReadable=!1;b.emittedReadable||(T("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?Da(Bh,a):Bh(a))}function Bh(a){T("emit readable");a.emit("readable");Ae(a)}function Ck(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(T("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function Dk(a){return function(){var b=a._readableState;T("pipeOnDrain",b.awaitDrain);
b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,Ae(a))}}function Ek(a){T("readable nexttick read 0");a.read(0)}function Fk(a,b){b.reading||(T("resume read 0"),a.read(0));b.resumeScheduled=!1;b.awaitDrain=0;a.emit("resume");Ae(a);b.flowing&&!b.reading&&a.read(0)}function Ae(a){var b=a._readableState;for(T("flow",b.flowing);b.flowing&&null!==a.read(););}function Ch(a,b){if(0===b.length)return null;if(b.objectMode)var c=b.buffer.shift();else if(!a||a>=b.length)c=
b.decoder?b.buffer.join(""):1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear();else{c=b.buffer;b=b.decoder;if(a<c.head.data.length)b=c.head.data.slice(0,a),c.head.data=c.head.data.slice(a);else{if(a===c.head.data.length)c=c.shift();else if(b){b=c.head;var d=1,e=b.data;for(a-=e.length;b=b.next;){var f=b.data,g=a>f.length?f.length:a;e=g===f.length?e+f:e+f.slice(0,a);a-=g;if(0===a){g===f.length?(++d,c.head=b.next?b.next:c.tail=null):(c.head=b,b.data=f.slice(g));break}++d}c.length-=
d;c=e}else{b=t.allocUnsafe(a);d=c.head;e=1;d.data.copy(b);for(a-=d.data.length;d=d.next;){f=d.data;g=a>f.length?f.length:a;f.copy(b,b.length-a,0,g);a-=g;if(0===a){g===f.length?(++e,c.head=d.next?d.next:c.tail=null):(c.head=d,d.data=f.slice(g));break}++e}c.length-=e;c=b}b=c}c=b}return c}function Be(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,Da(Gk,b,a))}function Gk(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=
!1,b.emit("end"))}function Hk(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function Dh(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function Ik(){}function Jk(a,b,c){this.chunk=a;this.encoding=b;this.callback=c;this.next=null}function Ce(a,b){Object.defineProperty(this,"buffer",{get:ne(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")});a=a||{};this.objectMode=!!a.objectMode;b instanceof Ma&&(this.objectMode=this.objectMode||
!!a.writableObjectMode);var c=a.highWaterMark,d=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:d;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var c=b._writableState,d=c.sync,e=c.writecb;c.writing=!1;c.writecb=null;c.length-=c.writelen;c.writelen=0;a?
(--c.pendingcb,d?Da(e,a):e(a),b._writableState.errorEmitted=!0,b.emit("error",a)):((a=Eh(c))||c.corked||c.bufferProcessing||!c.bufferedRequest||Fh(b,c),d?Da(Gh,b,c,a,e):Gh(b,c,a,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new Hh(this)}function ta(a){if(!(this instanceof ta||this instanceof Ma))return new ta(a);this._writableState=new Ce(a,this);this.writable=
!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev));O.call(this)}function De(a,b,c,d,e,f,g){b.writelen=d;b.writecb=g;b.writing=!0;b.sync=!0;c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite);b.sync=!1}function Gh(a,b,c,d){!c&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;d();Ih(a,b)}function Fh(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=Array(b.bufferedRequestCount),e=b.corkedRequestsFree;
e.entry=c;for(var f=0;c;)d[f]=c,c=c.next,f+=1;De(a,b,!0,b.length,d,"",e.finish);b.pendingcb++;b.lastBufferedRequest=null;e.next?(b.corkedRequestsFree=e.next,e.next=null):b.corkedRequestsFree=new Hh(b)}else{for(;c&&(d=c.chunk,De(a,b,!1,b.objectMode?1:d.length,d,c.encoding,c.callback),c=c.next,!b.writing););null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0;b.bufferedRequest=c;b.bufferProcessing=!1}function Eh(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}
function Ih(a,b){var c=Eh(b);c&&(0===b.pendingcb?(b.prefinished||(b.prefinished=!0,a.emit("prefinish")),b.finished=!0,a.emit("finish")):b.prefinished||(b.prefinished=!0,a.emit("prefinish")));return c}function Hh(a){var b=this;this.entry=this.next=null;this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--;e(c);d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}function Ma(a){if(!(this instanceof Ma))return new Ma(a);K.call(this,a);
ta.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",Kk)}function Kk(){this.allowHalfOpen||this._writableState.ended||Da(Lk,this)}function Lk(a){a.end()}function Mk(a){this.afterTransform=function(b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;e?(d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b),b=a._readableState,b.reading=!1,(b.needReadable||
b.length<b.highWaterMark)&&a._read(b.highWaterMark),b=void 0):b=a.emit("error",Error("no writecb in Transform class"));return b};this.transforming=this.needTransform=!1;this.writeencoding=this.writechunk=this.writecb=null}function cb(a){if(!(this instanceof cb))return new cb(a);Ma.call(this,a);this._transformState=new Mk(this);var b=this;this._readableState.needReadable=!0;this._readableState.sync=!1;a&&("function"===typeof a.transform&&(this._transform=a.transform),"function"===typeof a.flush&&(this._flush=
a.flush));this.once("prefinish",function(){"function"===typeof this._flush?this._flush(function(a){Jh(b,a)}):Jh(b)})}function Jh(a,b){if(b)return a.emit("error",b);b=a._transformState;if(a._writableState.length)throw Error("Calling transform done when ws.length != 0");if(b.transforming)throw Error("Calling transform done when still transforming");return a.push(null)}function Dc(a){if(!(this instanceof Dc))return new Dc(a);cb.call(this,a)}function ia(){O.call(this)}function Na(a,b){for(var c in b)a[c]=
b[c];return 3>arguments.length?a:Na.apply(null,[a].concat(Nk.call(arguments,2)))}function Ok(a,b,c,d){c=c||"=";var e={};if("string"!==typeof a||0===a.length)return e;var f=/\+/g;a=a.split(b||"&");b=1E3;d&&"number"===typeof d.maxKeys&&(b=d.maxKeys);d=a.length;0<b&&d>b&&(d=b);for(b=0;b<d;++b){var g=a[b].replace(f,"%20"),h=g.indexOf(c);if(0<=h){var k=g.substr(0,h);g=g.substr(h+1)}else k=g,g="";k=decodeURIComponent(k);g=decodeURIComponent(g);Object.prototype.hasOwnProperty.call(e,k)?Array.isArray(e[k])?
e[k].push(g):e[k]=[e[k],g]:e[k]=g}return e}function Ec(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}}function Pk(a,b,c,d){b=b||"&";c=c||"=";null===a&&(a=void 0);return"object"===typeof a?Object.keys(a).map(function(d){var e=encodeURIComponent(Ec(d))+c;return Array.isArray(a[d])?a[d].map(function(a){return e+encodeURIComponent(Ec(a))}).join(b):e+encodeURIComponent(Ec(a[d]))}).join(b):d?encodeURIComponent(Ec(d))+
c+encodeURIComponent(Ec(a)):""}function ba(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function Fc(a,b,c){if(a&&db.isObject(a)&&a instanceof ba)return a;var d=new ba;d.parse(a,b,c);return d}function Hb(){}function L(){L.init.call(this)}function Kh(a,b,c,d){var e;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');if(e=a._events){e.newListener&&(a.emit("newListener",
b,c.listener?c.listener:c),e=a._events);var f=e[b]}else e=a._events=new Hb,a._eventsCount=0;f?("function"===typeof f?f=e[b]=d?[c,f]:[f,c]:d?f.unshift(c):f.push(c),f.warned||(c=void 0===a._maxListeners?L.defaultMaxListeners:a._maxListeners)&&0<c&&f.length>c&&(f.warned=!0,c=Error("Possible EventEmitter memory leak detected. "+f.length+" "+b+" listeners added. Use emitter.setMaxListeners() to increase limit"),c.name="MaxListenersExceededWarning",c.emitter=a,c.type=b,c.count=f.length,"function"===typeof console.warn?
console.warn(c):console.log(c))):(e[b]=c,++a._eventsCount);return a}function Lh(a,b,c){function d(){a.removeListener(b,d);e||(e=!0,c.apply(a,arguments))}var e=!1;d.listener=c;return d}function Mh(a){var b=this._events;if(b){a=b[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function Gc(a,b){for(var c=Array(b);b--;)c[b]=a[b];return c}function Nh(){Ee=!0;for(var a=0;64>a;++a)Xa[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[a],Ya["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(a)]=
a;Ya[45]=62;Ya[95]=63}function Qk(a,b,c){for(var d=[],e=b;e<c;e+=3)b=(a[e]<<16)+(a[e+1]<<8)+a[e+2],d.push(Xa[b>>18&63]+Xa[b>>12&63]+Xa[b>>6&63]+Xa[b&63]);return d.join("")}function Oh(a){Ee||Nh();for(var b=a.length,c=b%3,d="",e=[],f=0,g=b-c;f<g;f+=16383)e.push(Qk(a,f,f+16383>g?g:f+16383));1===c?(a=a[b-1],d+=Xa[a>>2],d+=Xa[a<<4&63],d+="=="):2===c&&(a=(a[b-2]<<8)+a[b-1],d+=Xa[a>>10],d+=Xa[a>>4&63],d+=Xa[a<<2&63],d+="=");e.push(d);return e.join("")}function td(a,b,c,d,e){var f=8*e-d-1;var g=(1<<f)-1,
h=g>>1,k=-7;e=c?e-1:0;var n=c?-1:1,p=a[b+e];e+=n;c=p&(1<<-k)-1;p>>=-k;for(k+=f;0<k;c=256*c+a[b+e],e+=n,k-=8);f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;f=256*f+a[b+e],e+=n,k-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(p?-1:1);f+=Math.pow(2,d);c-=h}return(p?-1:1)*f*Math.pow(2,c-d)}function ud(a,b,c,d,e,f){var g,h=8*f-e-1,k=(1<<h)-1,n=k>>1,p=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=d?0:f-1;var q=d?1:-1,y=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=k):(d=Math.floor(Math.log(b)/
Math.LN2),1>b*(g=Math.pow(2,-d))&&(d--,g*=2),b=1<=d+n?b+p/g:b+p*Math.pow(2,1-n),2<=b*g&&(d++,g/=2),d+n>=k?(b=0,d=k):1<=d+n?(b=(b*g-1)*Math.pow(2,e),d+=n):(b=b*Math.pow(2,n-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+f]=b&255,f+=q,b/=256,e-=8);d=d<<e|b;for(h+=e;0<h;a[c+f]=d&255,f+=q,d/=256,h-=8);a[c+f-q]|=128*y}function nb(a,b){if((x.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");x.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=x.prototype):(null===a&&
(a=new x(b)),a.length=b);return a}function x(a,b,c){if(!(x.TYPED_ARRAY_SUPPORT||this instanceof x))return new x(a,b,c);if("number"===typeof a){if("string"===typeof b)throw Error("If encoding is specified then the first argument must be a string");return Fe(this,a)}return Ph(this,a,b,c)}function Ph(a,b,c,d){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>c||b.byteLength<c)throw new RangeError("'offset' is out of bounds");
if(b.byteLength<c+(d||0))throw new RangeError("'length' is out of bounds");b=void 0===c&&void 0===d?new Uint8Array(b):void 0===d?new Uint8Array(b,c):new Uint8Array(b,c,d);x.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=x.prototype):a=Ge(a,b);return a}if("string"===typeof b){d=a;a=c;if("string"!==typeof a||""===a)a="utf8";if(!x.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');c=Qh(b,a)|0;d=nb(d,c);b=d.write(b,a);b!==c&&(d=d.slice(0,b));return d}return Rk(a,b)}function Rh(a){if("number"!==
typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function Fe(a,b){Rh(b);a=nb(a,0>b?0:He(b)|0);if(!x.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function Ge(a,b){var c=0>b.length?0:He(b.length)|0;a=nb(a,c);for(var d=0;d<c;d+=1)a[d]=b[d]&255;return a}function Rk(a,b){if(Za(b)){var c=He(b.length)|0;a=nb(a,c);if(0===a.length)return a;b.copy(a,0,0,c);return a}if(b){if("undefined"!==typeof ArrayBuffer&&b.buffer instanceof
ArrayBuffer||"length"in b)return(c="number"!==typeof b.length)||(c=b.length,c=c!==c),c?nb(a,0):Ge(a,b);if("Buffer"===b.type&&Sh(b.data))return Ge(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function He(a){if(a>=(x.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(x.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return a|0}function Za(a){return!(null==
a||!a._isBuffer)}function Qh(a,b){if(Za(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return vd(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;case "base64":return Th(a).length;
default:if(d)return vd(a).length;b=(""+b).toLowerCase();d=!0}}function Sk(a,b,c){var d=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;d="";for(c=a;c<b;++c)a=d,d=this[c],d=16>d?"0"+d.toString(16):d.toString(16),d=a+d;return d;case "utf8":case "utf-8":return Uh(this,b,c);case "ascii":a="";for(c=Math.min(this.length,
c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?Oh(this):Oh(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();d=!0}}function Ib(a,b,c){var d=
a[b];a[b]=a[c];a[c]=d}function Vh(a,b,c,d,e){if(0===a.length)return-1;"string"===typeof c?(d=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=e?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(e)return-1;c=a.length-1}else if(0>c)if(e)c=0;else return-1;"string"===typeof b&&(b=x.from(b,d));if(Za(b))return 0===b.length?-1:Wh(a,b,c,d,e);if("number"===typeof b)return b&=255,x.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?e?Uint8Array.prototype.indexOf.call(a,
b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):Wh(a,[b],c,d,e);throw new TypeError("val must be string, number or Buffer");}function Wh(a,b,c,d,e){function f(a,b){return 1===g?a[b]:a.readUInt16BE(b*g)}var g=1,h=a.length,k=b.length;if(void 0!==d&&(d=String(d).toLowerCase(),"ucs2"===d||"ucs-2"===d||"utf16le"===d||"utf-16le"===d)){if(2>a.length||2>b.length)return-1;g=2;h/=2;k/=2;c/=2}if(e)for(d=-1;c<h;c++)if(f(a,c)===f(b,-1===d?0:c-d)){if(-1===d&&(d=c),c-d+1===k)return d*g}else-1!==d&&(c-=c-d),d=
-1;else for(c+k>h&&(c=h-k);0<=c;c--){h=!0;for(d=0;d<k;d++)if(f(a,c+d)!==f(b,d)){h=!1;break}if(h)return c}return-1}function Uh(a,b,c){c=Math.min(a.length,c);for(var d=[];b<c;){var e=a[b],f=null,g=239<e?4:223<e?3:191<e?2:1;if(b+g<=c)switch(g){case 1:128>e&&(f=e);break;case 2:var h=a[b+1];128===(h&192)&&(e=(e&31)<<6|h&63,127<e&&(f=e));break;case 3:h=a[b+1];var k=a[b+2];128===(h&192)&&128===(k&192)&&(e=(e&15)<<12|(h&63)<<6|k&63,2047<e&&(55296>e||57343<e)&&(f=e));break;case 4:h=a[b+1];k=a[b+2];var n=a[b+
3];128===(h&192)&&128===(k&192)&&128===(n&192)&&(e=(e&15)<<18|(h&63)<<12|(k&63)<<6|n&63,65535<e&&1114112>e&&(f=e))}null===f?(f=65533,g=1):65535<f&&(f-=65536,d.push(f>>>10&1023|55296),f=56320|f&1023);d.push(f);b+=g}a=d.length;if(a<=Xh)d=String.fromCharCode.apply(String,d);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,d.slice(b,b+=Xh));d=c}return d}function Z(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");
}function ya(a,b,c,d,e,f){if(!Za(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>e||b<f)throw new RangeError('"value" argument is out of bounds');if(c+d>a.length)throw new RangeError("Index out of range");}function wd(a,b,c,d){0>b&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;++e)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function xd(a,b,c,d){0>b&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;++e)a[c+e]=b>>>8*(d?e:3-e)&255}function yd(a,b,c,d,e,f){if(c+
d>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function vd(a,b){b=b||Infinity;for(var c,d=a.length,e=null,f=[],g=0;g<d;++g){c=a.charCodeAt(g);if(55295<c&&57344>c){if(!e){if(56319<c){-1<(b-=3)&&f.push(239,191,189);continue}else if(g+1===d){-1<(b-=3)&&f.push(239,191,189);continue}e=c;continue}if(56320>c){-1<(b-=3)&&f.push(239,191,189);e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&-1<(b-=3)&&f.push(239,191,189);e=null;if(128>c){if(0>--b)break;
f.push(c)}else if(2048>c){if(0>(b-=2))break;f.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(b-=3))break;f.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return f}function Yh(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function Th(a){a=(a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")).replace(Tk,"");if(2>a.length)a="";else for(;0!==a.length%4;)a+="=";Ee||Nh();
var b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");var c="="===a[b-2]?2:"="===a[b-1]?1:0;var d=new Uk(3*b/4-c);var e=0<c?b-4:b;var f=0;for(b=0;b<e;b+=4){var g=Ya[a.charCodeAt(b)]<<18|Ya[a.charCodeAt(b+1)]<<12|Ya[a.charCodeAt(b+2)]<<6|Ya[a.charCodeAt(b+3)];d[f++]=g>>16&255;d[f++]=g>>8&255;d[f++]=g&255}2===c?(g=Ya[a.charCodeAt(b)]<<2|Ya[a.charCodeAt(b+1)]>>4,d[f++]=g&255):1===c&&(g=Ya[a.charCodeAt(b)]<<10|Ya[a.charCodeAt(b+1)]<<4|Ya[a.charCodeAt(b+2)]>>2,d[f++]=g>>
8&255,d[f++]=g&255);return d}function Hc(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);++e)b[e+c]=a[e];return e}function Ie(a){return null!=a&&(!!a._isBuffer||Zh(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&Zh(a.slice(0,0)))}function Zh(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}function $h(){throw Error("setTimeout has not been defined");}function ai(){throw Error("clearTimeout has not been defined");}function bi(a){if(Jb===
setTimeout)return setTimeout(a,0);if((Jb===$h||!Jb)&&setTimeout)return Jb=setTimeout,setTimeout(a,0);try{return Jb(a,0)}catch(b){try{return Jb.call(null,a,0)}catch(c){return Jb.call(this,a,0)}}}function Vk(a){if(Kb===clearTimeout)return clearTimeout(a);if((Kb===ai||!Kb)&&clearTimeout)return Kb=clearTimeout,clearTimeout(a);try{return Kb(a)}catch(b){try{return Kb.call(null,a)}catch(c){return Kb.call(this,a)}}}function Wk(){ac&&bc&&(ac=!1,bc.length?ob=bc.concat(ob):zd=-1,ob.length&&ci())}function ci(){if(!ac){var a=
bi(Wk);ac=!0;for(var b=ob.length;b;){bc=ob;for(ob=[];++zd<b;)bc&&bc[zd].run();zd=-1;b=ob.length}bc=null;ac=!1;Vk(a)}}function $a(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];ob.push(new di(a,b));1!==ob.length||ac||bi(ci)}function di(a,b){this.fun=a;this.array=b}function Xk(a){if("string"!==typeof a){for(var b=[],c=0;c<arguments.length;c++)b.push(zb(arguments[c]));return b.join(" ")}c=1;var d=arguments,e=d.length;b=String(a).replace(Yk,
function(a){if("%%"===a)return"%";if(c>=e)return a;switch(a){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":try{return JSON.stringify(d[c++])}catch(h){return"[Circular]"}default:return a}});for(var f=d[c];c<e;f=d[++c])b=null!==f&&Ic(f)?b+(" "+zb(f)):b+(" "+f);return b}function ei(a,b){if(Ab(za.process))return function(){return ei(a,b).apply(this,arguments)};var c=!1;return function(){c||(console.error(b),c=!0);return a.apply(this,arguments)}}function zb(a,b){var c={seen:[],
stylize:Zk};3<=arguments.length&&(c.depth=arguments[2]);4<=arguments.length&&(c.colors=arguments[3]);if("boolean"===typeof b)c.showHidden=b;else if(b&&b&&Ic(b))for(var d=Object.keys(b),e=d.length;e--;)c[d[e]]=b[d[e]];Ab(c.showHidden)&&(c.showHidden=!1);Ab(c.depth)&&(c.depth=2);Ab(c.colors)&&(c.colors=!1);Ab(c.customInspect)&&(c.customInspect=!0);c.colors&&(c.stylize=$k);return Ad(c,a,c.depth)}function $k(a,b){return(b=zb.styles[b])?"\u001b["+zb.colors[b][0]+"m"+a+"\u001b["+zb.colors[b][1]+"m":a}function Zk(a,
b){return a}function al(a){var b={};a.forEach(function(a,d){b[a]=!0});return b}function Ad(a,b,c){if(a.customInspect&&b&&Je(b.inspect)&&b.inspect!==zb&&(!b.constructor||b.constructor.prototype!==b)){var d=b.inspect(c,a);"string"!==typeof d&&(d=Ad(a,d,c));return d}if(d=bl(a,b))return d;var e=Object.keys(b),f=al(e);a.showHidden&&(e=Object.getOwnPropertyNames(b));if(Ke(b)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return Le(b);if(0===e.length){if(Je(b))return a.stylize("[Function"+(b.name?
": "+b.name:"")+"]","special");if(Me(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(fi(b))return a.stylize(Date.prototype.toString.call(b),"date");if(Ke(b))return Le(b)}d="";var g=!1,h=["{","}"];Array.isArray(b)&&(g=!0,h=["[","]"]);Je(b)&&(d=" [Function"+(b.name?": "+b.name:"")+"]");Me(b)&&(d=" "+RegExp.prototype.toString.call(b));fi(b)&&(d=" "+Date.prototype.toUTCString.call(b));Ke(b)&&(d=" "+Le(b));if(0===e.length&&(!g||0==b.length))return h[0]+d+h[1];if(0>c)return Me(b)?a.stylize(RegExp.prototype.toString.call(b),
"regexp"):a.stylize("[Object]","special");a.seen.push(b);e=g?cl(a,b,c,f,e):e.map(function(d){return Ne(a,b,c,f,d,g)});a.seen.pop();return dl(e,d,h)}function bl(a,b){if(Ab(b))return a.stylize("undefined","undefined");if("string"===typeof b)return b="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",a.stylize(b,"string");if("number"===typeof b)return a.stylize(""+b,"number");if("boolean"===typeof b)return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null",
"null")}function Le(a){return"["+Error.prototype.toString.call(a)+"]"}function cl(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)Object.prototype.hasOwnProperty.call(b,String(g))?f.push(Ne(a,b,c,d,String(g),!0)):f.push("");e.forEach(function(e){e.match(/^\d+$/)||f.push(Ne(a,b,c,d,e,!0))});return f}function Ne(a,b,c,d,e,f){var g,h;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?h=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(h=a.stylize("[Setter]",
"special"));Object.prototype.hasOwnProperty.call(d,e)||(g="["+e+"]");h||(0>a.seen.indexOf(b.value)?(h=null===c?Ad(a,b.value,null):Ad(a,b.value,c-1),-1<h.indexOf("\n")&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special"));if(Ab(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e);g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,
"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function dl(a,b,c){return 60<a.reduce(function(a,b){b.indexOf("\n");return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function Ab(a){return void 0===a}function Me(a){return Ic(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}function Ic(a){return"object"===typeof a&&null!==a}function fi(a){return Ic(a)&&"[object Date]"===
Object.prototype.toString.call(a)}function Ke(a){return Ic(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function Je(a){return"function"===typeof a}function Lb(){this.tail=this.head=null;this.length=0}function el(a){if(!a)return"utf8";for(var b;;)switch(a){case "utf8":case "utf-8":return"utf8";case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return"utf16le";case "latin1":case "binary":return"latin1";case "base64":case "ascii":case "hex":return a;default:if(b)return;
a=(""+a).toLowerCase();b=!0}}function Jc(a){var b=el(a);if("string"!==typeof b&&(Oe.isEncoding===gi||!gi(a)))throw Error("Unknown encoding: "+a);this.encoding=b||a;switch(this.encoding){case "utf16le":this.text=fl;this.end=gl;a=4;break;case "utf8":this.fillLast=hl;a=4;break;case "base64":this.text=il;this.end=jl;a=3;break;default:this.write=kl;this.end=ll;return}this.lastTotal=this.lastNeed=0;this.lastChar=Oe.allocUnsafe(a)}function Pe(a){return 127>=a?0:6===a>>5?2:14===a>>4?3:30===a>>3?4:2===a>>
6?-1:-2}function ml(a,b,c){var d=b.length-1;if(d<c)return 0;var e=Pe(b[d]);if(0<=e)return 0<e&&(a.lastNeed=e-1),e;if(--d<c||-2===e)return 0;e=Pe(b[d]);if(0<=e)return 0<e&&(a.lastNeed=e-2),e;if(--d<c||-2===e)return 0;e=Pe(b[d]);return 0<=e?(0<e&&(2===e?e=0:a.lastNeed=e-3),e):0}function hl(a){var b=this.lastTotal-this.lastNeed;a:if(128!==(a[0]&192)){this.lastNeed=0;var c="\ufffd"}else{if(1<this.lastNeed&&1<a.length){if(128!==(a[1]&192)){this.lastNeed=1;c="\ufffd";break a}if(2<this.lastNeed&&2<a.length&&
128!==(a[2]&192)){this.lastNeed=2;c="\ufffd";break a}}c=void 0}if(void 0!==c)return c;if(this.lastNeed<=a.length)return a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,b,0,a.length);this.lastNeed-=a.length}function fl(a,b){if(0===(a.length-b)%2){if(b=a.toString("utf16le",b)){var c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,
-1)}return b}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=a[a.length-1];return a.toString("utf16le",b,a.length-1)}function gl(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):a}function il(a,b){var c=(a.length-b)%3;if(0===c)return a.toString("base64",b);this.lastNeed=3-c;this.lastTotal=3;1===c?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]);return a.toString("base64",b,a.length-
c)}function jl(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function kl(a){return a.toString(this.encoding)}function ll(a){return a&&a.length?this.write(a):""}function nl(a,b,c){if("function"===typeof a.prependListener)return a.prependListener(b,c);if(a._events&&a._events[b])Array.isArray(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]];else a.on(b,c)}function hi(a,b){a=a||{};this.objectMode=!!a.objectMode;b instanceof
Oa&&(this.objectMode=this.objectMode||!!a.readableObjectMode);b=a.highWaterMark;var c=this.objectMode?16:16384;this.highWaterMark=b||0===b?b:c;this.highWaterMark=~~this.highWaterMark;this.buffer=new Lb;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.resumeScheduled=this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=
!1;this.encoding=this.decoder=null;a.encoding&&(this.decoder=new ii(a.encoding),this.encoding=a.encoding)}function Y(a){if(!(this instanceof Y))return new Y(a);this._readableState=new hi(a,this);this.readable=!0;a&&"function"===typeof a.read&&(this._read=a.read);L.call(this)}function ji(a,b,c,d,e){var f=c;var g=null;Ie(f)||"string"===typeof f||null===f||void 0===f||b.objectMode||(g=new TypeError("Invalid non-string/buffer chunk"));if(f=g)a.emit("error",f);else if(null===c)b.reading=!1,b.ended||(b.decoder&&
(c=b.decoder.end())&&c.length&&(b.buffer.push(c),b.length+=b.objectMode?1:c.length),b.ended=!0,Bd(a));else if(b.objectMode||c&&0<c.length)if(b.ended&&!e)a.emit("error",Error("stream.push() after EOF"));else if(b.endEmitted&&e)a.emit("error",Error("stream.unshift() after end event"));else{if(b.decoder&&!e&&!d){c=b.decoder.write(c);var h=!b.objectMode&&0===c.length}e||(b.reading=!1);h||(b.flowing&&0===b.length&&!b.sync?(a.emit("data",c),a.read(0)):(b.length+=b.objectMode?1:c.length,e?b.buffer.unshift(c):
b.buffer.push(c),b.needReadable&&Bd(a)));b.readingMore||(b.readingMore=!0,$a(ol,a,b))}else e||(b.reading=!1);return!b.ended&&(b.needReadable||b.length<b.highWaterMark||0===b.length)}function ki(a,b){if(0>=a||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(a!==a)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(a>b.highWaterMark){var c=a;8388608<=c?c=8388608:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++);b.highWaterMark=c}return a<=b.length?a:b.ended?b.length:(b.needReadable=
!0,0)}function Bd(a){var b=a._readableState;b.needReadable=!1;b.emittedReadable||(P("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?$a(li,a):li(a))}function li(a){P("emit readable");a.emit("readable");Qe(a)}function ol(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(P("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function pl(a){return function(){var b=a._readableState;P("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;
0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,Qe(a))}}function ql(a){P("readable nexttick read 0");a.read(0)}function rl(a,b){b.reading||(P("resume read 0"),a.read(0));b.resumeScheduled=!1;b.awaitDrain=0;a.emit("resume");Qe(a);b.flowing&&!b.reading&&a.read(0)}function Qe(a){var b=a._readableState;for(P("flow",b.flowing);b.flowing&&null!==a.read(););}function mi(a,b){if(0===b.length)return null;if(b.objectMode)var c=b.buffer.shift();else if(!a||a>=b.length)c=b.decoder?b.buffer.join(""):
1===b.buffer.length?b.buffer.head.data:b.buffer.concat(b.length),b.buffer.clear();else{c=b.buffer;b=b.decoder;if(a<c.head.data.length)b=c.head.data.slice(0,a),c.head.data=c.head.data.slice(a);else{if(a===c.head.data.length)c=c.shift();else if(b){b=c.head;var d=1,e=b.data;for(a-=e.length;b=b.next;){var f=b.data,g=a>f.length?f.length:a;e=g===f.length?e+f:e+f.slice(0,a);a-=g;if(0===a){g===f.length?(++d,c.head=b.next?b.next:c.tail=null):(c.head=b,b.data=f.slice(g));break}++d}c.length-=d;c=e}else{b=x.allocUnsafe(a);
d=c.head;e=1;d.data.copy(b);for(a-=d.data.length;d=d.next;){f=d.data;g=a>f.length?f.length:a;f.copy(b,b.length-a,0,g);a-=g;if(0===a){g===f.length?(++e,c.head=d.next?d.next:c.tail=null):(c.head=d,d.data=f.slice(g));break}++e}c.length-=e;c=b}b=c}c=b}return c}function Re(a){var b=a._readableState;if(0<b.length)throw Error('"endReadable()" called on non-empty stream');b.endEmitted||(b.ended=!0,$a(sl,b,a))}function sl(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function tl(a,
b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)}function ni(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function ul(){}function vl(a,b,c){this.chunk=a;this.encoding=b;this.callback=c;this.next=null}function Se(a,b){Object.defineProperty(this,"buffer",{get:ei(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")});a=a||{};this.objectMode=!!a.objectMode;b instanceof Oa&&(this.objectMode=this.objectMode||!!a.writableObjectMode);
var c=a.highWaterMark,d=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:d;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var c=b._writableState,d=c.sync,e=c.writecb;c.writing=!1;c.writecb=null;c.length-=c.writelen;c.writelen=0;a?(--c.pendingcb,d?$a(e,a):
e(a),b._writableState.errorEmitted=!0,b.emit("error",a)):((a=oi(c))||c.corked||c.bufferProcessing||!c.bufferedRequest||pi(b,c),d?$a(qi,b,c,a,e):qi(b,c,a,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1;this.bufferedRequestCount=0;this.corkedRequestsFree=new ri(this)}function va(a){if(!(this instanceof va||this instanceof Oa))return new va(a);this._writableState=new Se(a,this);this.writable=!0;a&&("function"===
typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev));L.call(this)}function Te(a,b,c,d,e,f,g){b.writelen=d;b.writecb=g;b.writing=!0;b.sync=!0;c?a._writev(e,b.onwrite):a._write(e,f,b.onwrite);b.sync=!1}function qi(a,b,c,d){!c&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;d();si(a,b)}function pi(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){var d=Array(b.bufferedRequestCount),e=b.corkedRequestsFree;e.entry=
c;for(var f=0;c;)d[f]=c,c=c.next,f+=1;Te(a,b,!0,b.length,d,"",e.finish);b.pendingcb++;b.lastBufferedRequest=null;e.next?(b.corkedRequestsFree=e.next,e.next=null):b.corkedRequestsFree=new ri(b)}else{for(;c&&(d=c.chunk,Te(a,b,!1,b.objectMode?1:d.length,d,c.encoding,c.callback),c=c.next,!b.writing););null===c&&(b.lastBufferedRequest=null)}b.bufferedRequestCount=0;b.bufferedRequest=c;b.bufferProcessing=!1}function oi(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}
function si(a,b){var c=oi(b);c&&(0===b.pendingcb?(b.prefinished||(b.prefinished=!0,a.emit("prefinish")),b.finished=!0,a.emit("finish")):b.prefinished||(b.prefinished=!0,a.emit("prefinish")));return c}function ri(a){var b=this;this.entry=this.next=null;this.finish=function(c){var d=b.entry;for(b.entry=null;d;){var e=d.callback;a.pendingcb--;e(c);d=d.next}a.corkedRequestsFree?a.corkedRequestsFree.next=b:a.corkedRequestsFree=b}}function Oa(a){if(!(this instanceof Oa))return new Oa(a);Y.call(this,a);
va.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&(this.allowHalfOpen=!1);this.once("end",wl)}function wl(){this.allowHalfOpen||this._writableState.ended||$a(xl,this)}function xl(a){a.end()}function yl(a){this.afterTransform=function(b,c){var d=a._transformState;d.transforming=!1;var e=d.writecb;e?(d.writechunk=null,d.writecb=null,null!==c&&void 0!==c&&a.push(c),e(b),b=a._readableState,b.reading=!1,(b.needReadable||
b.length<b.highWaterMark)&&a._read(b.highWaterMark),b=void 0):b=a.emit("error",Error("no writecb in Transform class"));return b};this.transforming=this.needTransform=!1;this.writeencoding=this.writechunk=this.writecb=null}function eb(a){if(!(this instanceof eb))return new eb(a);Oa.call(this,a);this._transformState=new yl(this);var b=this;this._readableState.needReadable=!0;this._readableState.sync=!1;a&&("function"===typeof a.transform&&(this._transform=a.transform),"function"===typeof a.flush&&(this._flush=
a.flush));this.once("prefinish",function(){"function"===typeof this._flush?this._flush(function(a){ti(b,a)}):ti(b)})}function ti(a,b){if(b)return a.emit("error",b);b=a._transformState;if(a._writableState.length)throw Error("Calling transform done when ws.length != 0");if(b.transforming)throw Error("Calling transform done when still transforming");return a.push(null)}function lc(a){if(!(this instanceof lc))return new lc(a);eb.call(this,a)}function ab(){L.call(this)}var I="undefined"!==typeof globalThis?
globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},U=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this._listeners=[]}Object.defineProperty(a.prototype,"event",{get:function(){var a=this;this._event||(this._event=function(b){a._listeners.push(b);return{dispose:function(){for(var c=0;c<a._listeners.length;c++)if(a._listeners[c]===b){a._listeners.splice(c,1);break}}}});return this._event},enumerable:!0,
configurable:!0});a.prototype.fire=function(a){for(var b=[],c=0;c<this._listeners.length;c++)b.push(this._listeners[c]);for(c=0;c<b.length;c++)b[c].call(void 0,a)};return a}();b.EventEmitter2=a});E(U);var ui=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a){this._maxLength=a;this.onDeleteEmitter=new U.EventEmitter2;this.onInsertEmitter=new U.EventEmitter2;this.onTrimEmitter=new U.EventEmitter2;this._array=Array(this._maxLength);this._length=this._startIndex=
0}Object.defineProperty(a.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxLength",{get:function(){return this._maxLength},set:function(a){if(this._maxLength!==
a){for(var b=Array(a),c=0;c<Math.min(a,this.length);c++)b[c]=this._array[this._getCyclicIndex(c)];this._array=b;this._maxLength=a;this._startIndex=0}},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)for(var b=this._length;b<a;b++)this._array[b]=void 0;this._length=a},enumerable:!0,configurable:!0});a.prototype.get=function(a){return this._array[this._getCyclicIndex(a)]};a.prototype.set=function(a,b){this._array[this._getCyclicIndex(a)]=
b};a.prototype.push=function(a){this._array[this._getCyclicIndex(this._length)]=a;this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++};a.prototype.recycle=function(){if(this._length!==this._maxLength)throw Error("Can only recycle when the buffer is full");this._startIndex=++this._startIndex%this._maxLength;this.onTrimEmitter.fire(1);return this._array[this._getCyclicIndex(this._length-1)]};Object.defineProperty(a.prototype,
"isFull",{get:function(){return this._length===this._maxLength},enumerable:!0,configurable:!0});a.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length-- -1)]};a.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(b){for(d=a;d<this._length-b;d++)this._array[this._getCyclicIndex(d)]=this._array[this._getCyclicIndex(d+b)];this._length-=b}for(d=this._length-1;d>=a;d--)this._array[this._getCyclicIndex(d+c.length)]=this._array[this._getCyclicIndex(d)];
for(d=0;d<c.length;d++)this._array[this._getCyclicIndex(a+d)]=c[d];this._length+c.length>this._maxLength?(c=this._length+c.length-this._maxLength,this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)):this._length+=c.length};a.prototype.trimStart=function(a){a>this._length&&(a=this._length);this._startIndex+=a;this._length-=a;this.onTrimEmitter.fire(a)};a.prototype.shiftElements=function(a,b,c){if(!(0>=b)){if(0>a||a>=this._length)throw Error("start argument out of range");if(0>
a+c)throw Error("Cannot shift elements in list beyond index 0");if(0<c){for(var d=b-1;0<=d;d--)this.set(a+d+c,this.get(a+d));a=a+b+c-this._length;if(0<a)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(d=0;d<b;d++)this.set(a+d+c,this.get(a+d))}};a.prototype._getCyclicIndex=function(a){return(this._startIndex+a)%this._maxLength};return a}();b.CircularList=a});E(ui);var Aa=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});
b.stringFromCodePoint=function(a){return 65535<a?(a-=65536,String.fromCharCode((a>>10)+55296)+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)};b.utf32ToString=function(a,b,e){void 0===b&&(b=0);void 0===e&&(e=a.length);for(var c="";b<e;++b){var d=a[b];65535<d?(d-=65536,c+=String.fromCharCode((d>>10)+55296)+String.fromCharCode(d%1024+56320)):c+=String.fromCharCode(d)}return c};a=function(){function a(){this._interim=0}a.prototype.clear=function(){this._interim=0};a.prototype.decode=function(a,
b){var c=a.length;if(!c)return 0;var d=0,e=0;if(this._interim){var k=a.charCodeAt(e++);56320<=k&&57343>=k?b[d++]=1024*(this._interim-55296)+k-56320+65536:(b[d++]=this._interim,b[d++]=k);this._interim=0}for(;e<c;++e){var n=a.charCodeAt(e);if(55296<=n&&56319>=n){if(++e>=c){this._interim=n;break}k=a.charCodeAt(e);56320<=k&&57343>=k?b[d++]=1024*(n-55296)+k-56320+65536:(b[d++]=n,b[d++]=k)}else b[d++]=n}return d};return a}();b.StringToUtf32=a;a=function(){function a(){this.interim=new Uint8Array(3)}a.prototype.clear=
function(){this.interim.fill(0)};a.prototype.decode=function(a,b){var c=a.length;if(!c)return 0;var d=0,e,k,n,p,q=0,y=0;if(this.interim[0]){var u=!1,r=this.interim[0];r&=192===(r&224)?31:224===(r&240)?15:7;for(var H=0,fa;(fa=this.interim[++H]&63)&&4>H;)r<<=6,r|=fa;for(var t=192===(this.interim[0]&224)?2:224===(this.interim[0]&240)?3:4,v=t-H;y<v;){if(y>=c)return 0;fa=a[y++];if(128!==(fa&192)){y--;u=!0;break}else this.interim[H++]=fa,r<<=6,r|=fa&63}u||(2===t?128>r?y--:b[d++]=r:3===t?2048>r||55296<=
r&&57343>=r||(b[d++]=r):65536>q||1114111<q||(b[d++]=r));this.interim.fill(0)}for(u=c-4;y<c;){for(;!(!(y<u)||(e=a[y])&128||(k=a[y+1])&128||(n=a[y+2])&128||(p=a[y+3])&128);)b[d++]=e,b[d++]=k,b[d++]=n,b[d++]=p,y+=4;e=a[y++];if(128>e)b[d++]=e;else if(192===(e&224)){if(y>=c){this.interim[0]=e;break}k=a[y++];128!==(k&192)?y--:(q=(e&31)<<6|k&63,128>q?y--:b[d++]=q)}else if(224===(e&240)){if(y>=c){this.interim[0]=e;break}k=a[y++];if(128!==(k&192))y--;else{if(y>=c){this.interim[0]=e;this.interim[1]=k;break}n=
a[y++];128!==(n&192)?y--:(q=(e&15)<<12|(k&63)<<6|n&63,2048>q||55296<=q&&57343>=q||(b[d++]=q))}}else if(240===(e&248)){if(y>=c){this.interim[0]=e;break}k=a[y++];if(128!==(k&192))y--;else{if(y>=c){this.interim[0]=e;this.interim[1]=k;break}n=a[y++];if(128!==(n&192))y--;else{if(y>=c){this.interim[0]=e;this.interim[1]=k;this.interim[2]=n;break}p=a[y++];128!==(p&192)?y--:(q=(e&7)<<18|(k&63)<<12|(n&63)<<6|p&63,65536>q||1114111<q||(b[d++]=q))}}}}return d};return a}();b.Utf8ToUtf32=a});E(Aa);var Mb=C(function(a,
b){Object.defineProperty(b,"__esModule",{value:!0});b.DEFAULT_COLOR=256});E(Mb);var D=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});
b.DEFAULT_ATTR=Mb.DEFAULT_COLOR<<9|256;b.CHAR_DATA_ATTR_INDEX=0;b.CHAR_DATA_CHAR_INDEX=1;b.CHAR_DATA_WIDTH_INDEX=2;b.CHAR_DATA_CODE_INDEX=3;b.NULL_CELL_CHAR="";b.NULL_CELL_WIDTH=1;b.NULL_CELL_CODE=0;b.WHITESPACE_CELL_CHAR=" ";b.WHITESPACE_CELL_WIDTH=1;b.WHITESPACE_CELL_CODE=32;a=function(){function a(){this.bg=this.fg=0}a.toColorRGB=function(a){return[a>>>16&255,a>>>8&255,a&255]};a.fromColorRGB=function(a){return(a[0]&255)<<16|(a[1]&255)<<8|a[2]&255};a.prototype.clone=function(){var b=new a;b.fg=
this.fg;b.bg=this.bg;return b};a.prototype.isInverse=function(){return this.fg&67108864};a.prototype.isBold=function(){return this.fg&134217728};a.prototype.isUnderline=function(){return this.fg&268435456};a.prototype.isBlink=function(){return this.fg&536870912};a.prototype.isInvisible=function(){return this.fg&1073741824};a.prototype.isItalic=function(){return this.bg&67108864};a.prototype.isDim=function(){return this.bg&134217728};a.prototype.getFgColorMode=function(){return this.fg&50331648};a.prototype.getBgColorMode=
function(){return this.bg&50331648};a.prototype.isFgRGB=function(){return 50331648===(this.fg&50331648)};a.prototype.isBgRGB=function(){return 50331648===(this.bg&50331648)};a.prototype.isFgPalette=function(){return 16777216===(this.fg&50331648)||33554432===(this.fg&50331648)};a.prototype.isBgPalette=function(){return 16777216===(this.bg&50331648)||33554432===(this.bg&50331648)};a.prototype.isFgDefault=function(){return 0===(this.fg&50331648)};a.prototype.isBgDefault=function(){return 0===(this.bg&
50331648)};a.prototype.getFgColor=function(){switch(this.fg&50331648){case 16777216:case 33554432:return this.fg&255;case 50331648:return this.fg&16777215;default:return-1}};a.prototype.getBgColor=function(){switch(this.bg&50331648){case 16777216:case 33554432:return this.bg&255;case 50331648:return this.bg&16777215;default:return-1}};return a}();b.AttributeData=a;b.DEFAULT_ATTR_DATA=Object.freeze(new a);var d=function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b.content=0;b.fg=
0;b.bg=0;b.combinedData="";return b}c(d,a);d.fromCharData=function(a){var b=new d;b.setFromCharData(a);return b};d.prototype.isCombined=function(){return this.content&2097152};d.prototype.getWidth=function(){return this.content>>22};d.prototype.getChars=function(){return this.content&2097152?this.combinedData:this.content&2097151?Aa.stringFromCodePoint(this.content&2097151):""};d.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):this.content&
2097151};d.prototype.setFromCharData=function(a){this.fg=a[b.CHAR_DATA_ATTR_INDEX];this.bg=0;var c=!1;if(2<a[b.CHAR_DATA_CHAR_INDEX].length)c=!0;else if(2===a[b.CHAR_DATA_CHAR_INDEX].length){var d=a[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&56319>=d){var e=a[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=e&&57343>=e?this.content=1024*(d-55296)+e-56320+65536|a[b.CHAR_DATA_WIDTH_INDEX]<<22:c=!0}else c=!0}else this.content=a[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|a[b.CHAR_DATA_WIDTH_INDEX]<<22;
c&&(this.combinedData=a[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|a[b.CHAR_DATA_WIDTH_INDEX]<<22)};d.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]};return d}(a);b.CellData=d;a=function(){function a(a,c,e){void 0===e&&(e=!1);this.isWrapped=e;this._combined={};this._data=new Uint32Array(3*a);c=c||d.fromCharData([0,b.NULL_CELL_CHAR,b.NULL_CELL_WIDTH,b.NULL_CELL_CODE]);for(e=0;e<a;++e)this.setCell(e,c);this.length=a}a.prototype.get=function(a){var b=
this._data[3*a],c=b&2097151;return[this._data[3*a+1],b&2097152?this._combined[a]:c?Aa.stringFromCodePoint(c):"",b>>22,b&2097152?this._combined[a].charCodeAt(this._combined[a].length-1):c]};a.prototype.set=function(a,c){this._data[3*a+1]=c[b.CHAR_DATA_ATTR_INDEX];1<c[b.CHAR_DATA_CHAR_INDEX].length?(this._combined[a]=c[1],this._data[3*a]=a|2097152|c[b.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a]=c[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[b.CHAR_DATA_WIDTH_INDEX]<<22};a.prototype.getWidth=function(a){return this._data[3*
a]>>22};a.prototype.hasWidth=function(a){return this._data[3*a]&12582912};a.prototype.getFg=function(a){return this._data[3*a+1]};a.prototype.getBg=function(a){return this._data[3*a+2]};a.prototype.hasContent=function(a){return this._data[3*a]&4194303};a.prototype.getCodePoint=function(a){var b=this._data[3*a];return b&2097152?this._combined[a].charCodeAt(this._combined[a].length-1):b&2097151};a.prototype.isCombined=function(a){return this._data[3*a]&2097152};a.prototype.getString=function(a){var b=
this._data[3*a];return b&2097152?this._combined[a]:b&2097151?Aa.stringFromCodePoint(b&2097151):""};a.prototype.loadCell=function(a,b){var c=3*a;b.content=this._data[c+0];b.fg=this._data[c+1];b.bg=this._data[c+2];b.content&2097152&&(b.combinedData=this._combined[a]);return b};a.prototype.setCell=function(a,b){b.content&2097152&&(this._combined[a]=b.combinedData);this._data[3*a]=b.content;this._data[3*a+1]=b.fg;this._data[3*a+2]=b.bg};a.prototype.setCellFromCodePoint=function(a,b,c,d,e){this._data[3*
a]=b|c<<22;this._data[3*a+1]=d;this._data[3*a+2]=e};a.prototype.addCodepointToCell=function(a,b){var c=this._data[3*a];c&2097152?this._combined[a]+=Aa.stringFromCodePoint(b):(c&2097151?(this._combined[a]=Aa.stringFromCodePoint(c&2097151)+Aa.stringFromCodePoint(b),c=c&-2097152|2097152):c=b|4194304,this._data[3*a]=c)};a.prototype.insertCells=function(a,b,c){a%=this.length;if(b<this.length-a){for(var e=new d,f=this.length-a-b-1;0<=f;--f)this.setCell(a+b+f,this.loadCell(a+f,e));for(f=0;f<b;++f)this.setCell(a+
f,c)}else for(f=a;f<this.length;++f)this.setCell(f,c)};a.prototype.deleteCells=function(a,b,c){a%=this.length;if(b<this.length-a){for(var e=new d,f=0;f<this.length-a-b;++f)this.setCell(a+f,this.loadCell(a+b+f,e));f=this.length-b}else f=a;for(;f<this.length;++f)this.setCell(f,c)};a.prototype.replaceCells=function(a,b,c){for(;a<b&&a<this.length;)this.setCell(a++,c)};a.prototype.resize=function(a,b){if(a!==this.length){if(a>this.length){var c=new Uint32Array(3*a);this.length&&(3*a<this._data.length?
c.set(this._data.subarray(0,3*a)):c.set(this._data));this._data=c;for(c=this.length;c<a;++c)this.setCell(c,b)}else if(a)for(c=new Uint32Array(3*a),c.set(this._data.subarray(0,3*a)),this._data=c,b=Object.keys(this._combined),c=0;c<b.length;c++){var d=parseInt(b[c],10);d>=a&&delete this._combined[d]}else this._data=new Uint32Array(0),this._combined={};this.length=a}};a.prototype.fill=function(a){this._combined={};for(var b=0;b<this.length;++b)this.setCell(b,a)};a.prototype.copyFrom=function(a){this.length!==
a.length?this._data=new Uint32Array(a._data):this._data.set(a._data);this.length=a.length;this._combined={};for(var b in a._combined)this._combined[b]=a._combined[b];this.isWrapped=a.isWrapped};a.prototype.clone=function(){var b=new a(0);b._data=new Uint32Array(this._data);b.length=this.length;for(var c in this._combined)b._combined[c]=this._combined[c];b.isWrapped=this.isWrapped;return b};a.prototype.getTrimmedLength=function(){for(var a=this.length-1;0<=a;--a)if(this._data[3*a]&4194303)return a+
(this._data[3*a]>>22);return 0};a.prototype.copyCellsFrom=function(a,b,c,d,e){var f=a._data;if(e)for(var g=d-1;0<=g;g--)for(e=0;3>e;e++)this._data[3*(c+g)+e]=f[3*(b+g)+e];else for(g=0;g<d;g++)for(e=0;3>e;e++)this._data[3*(c+g)+e]=f[3*(b+g)+e];d=Object.keys(a._combined);for(e=0;e<d.length;e++)f=parseInt(d[e],10),f>=b&&(this._combined[f-b+c]=a._combined[f])};a.prototype.translateToString=function(a,c,d){void 0===a&&(a=!1);void 0===c&&(c=0);void 0===d&&(d=this.length);a&&(d=Math.min(d,this.getTrimmedLength()));
for(a="";c<d;){var e=this._data[3*c],f=e&2097151;a+=e&2097152?this._combined[c]:f?Aa.stringFromCodePoint(f):b.WHITESPACE_CELL_CHAR;c+=e>>22||1}return a};return a}();b.BufferLine=a});E(D);var pb=C(function(a,b){function c(a,b,c){if(b===a.length-1)return a[b].getTrimmedLength();var d=!a[b].hasContent(c-1)&&1===a[b].getWidth(c-1);a=2===a[b+1].getWidth(0);return d&&a?c-1:c}Object.defineProperty(b,"__esModule",{value:!0});b.reflowLargerGetLinesToRemove=function(a,b,f,g,h){for(var d=[],e=0;e<a.length-1;e++){var p=
e,q=a.get(++p);if(q.isWrapped){for(var y=[a.get(e)];p<a.length&&q.isWrapped;)y.push(q),q=a.get(++p);if(!(g>=e&&g<p)){p=0;q=c(y,p,b);for(var u=1,r=0;u<y.length;){var H=c(y,u,b),fa=Math.min(H-r,f-q);y[p].copyCellsFrom(y[u],r,q,fa,!1);q+=fa;q===f&&(p++,q=0);r+=fa;r===H&&(u++,r=0);0===q&&0!==p&&2===y[p-1].getWidth(f-1)&&(y[p].copyCellsFrom(y[p-1],f-1,q++,1,!1),y[p-1].setCell(f-1,h))}y[p].replaceCells(q,f,h);q=0;for(u=y.length-1;0<u;u--)if(u>p||0===y[u].getTrimmedLength())q++;else break;0<q&&(d.push(e+
y.length-q),d.push(q))}e+=y.length-1}}return d};b.reflowLargerCreateNewLayout=function(a,b){for(var c=[],d=0,e=b[d],k=0,n=0;n<a.length;n++)e===n?(e=b[++d],a.onDeleteEmitter.fire({index:n-k,amount:e}),n+=e-1,k+=e,e=b[++d]):c.push(n);return{layout:c,countRemoved:k}};b.reflowLargerApplyNewLayout=function(a,b){for(var c=[],d=0;d<b.length;d++)c.push(a.get(b[d]));for(d=0;d<c.length;d++)a.set(d,c[d]);a.length=b.length};b.reflowSmallerGetNewLineLengths=function(a,b,f){for(var d=[],e=a.map(function(d,e){return c(a,
e,b)}).reduce(function(a,b){return a+b}),k=0,n=0,p=0;p<e;){if(e-p<f){d.push(e-p);break}k+=f;var q=c(a,n,b);k>q&&(k-=q,n++);(q=2===a[n].getWidth(k-1))&&k--;q=q?f-1:f;d.push(q);p+=q}return d};b.getWrappedLineTrimmedLength=c});E(pb);var Pa=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this._disposables=[];this._isDisposed=!1}a.prototype.dispose=function(){this._isDisposed=!0;this._disposables.forEach(function(a){return a.dispose()});this._disposables.length=
0};a.prototype.register=function(a){this._disposables.push(a)};a.prototype.unregister=function(a){a=this._disposables.indexOf(a);-1!==a&&this._disposables.splice(a,1)};return a}();b.Disposable=a});E(Pa);var vi=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,
c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(c){var d=a.call(this)||this;d.line=c;d._id=b._nextId++;d.isDisposed=!1;d._onDispose=new U.EventEmitter2;return d}c(b,a);Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!0,configurable:!0});b.prototype.dispose=
function(){this.isDisposed||(this.isDisposed=!0,this._onDispose.fire())};b._nextId=1;return b}(Pa.Disposable);b.Marker=a});E(vi);var Cd=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.MAX_BUFFER_SIZE=4294967295;a=function(){function a(a,b){this._terminal=a;this._hasScrollback=b;this.savedCurAttrData=D.DEFAULT_ATTR_DATA.clone();this.markers=[];this._nullCell=D.CellData.fromCharData([0,D.NULL_CELL_CHAR,D.NULL_CELL_WIDTH,D.NULL_CELL_CODE]);this._whitespaceCell=D.CellData.fromCharData([0,
D.WHITESPACE_CELL_CHAR,D.WHITESPACE_CELL_WIDTH,D.WHITESPACE_CELL_CODE]);this._cols=this._terminal.cols;this._rows=this._terminal.rows;this.clear()}a.prototype.getNullCell=function(a){a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg):(this._nullCell.fg=0,this._nullCell.bg=0);return this._nullCell};a.prototype.getWhitespaceCell=function(a){a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0);return this._whitespaceCell};a.prototype.getBlankLine=
function(a,b){return new D.BufferLine(this._terminal.cols,this.getNullCell(a),b)};Object.defineProperty(a.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isCursorInViewport",{get:function(){var a=this.ybase+this.y-this.ydisp;return 0<=a&&a<this._rows},enumerable:!0,configurable:!0});a.prototype._getCorrectBufferLength=function(a){if(!this._hasScrollback)return a;a+=this._terminal.options.scrollback;
return a>b.MAX_BUFFER_SIZE?b.MAX_BUFFER_SIZE:a};a.prototype.fillViewportRows=function(a){if(0===this.lines.length){void 0===a&&(a=D.DEFAULT_ATTR_DATA);for(var b=this._rows;b--;)this.lines.push(this.getBlankLine(a))}};a.prototype.clear=function(){this.x=this.y=this.ybase=this.ydisp=0;this.lines=new ui.CircularList(this._getCorrectBufferLength(this._rows));this.scrollTop=0;this.scrollBottom=this._rows-1;this.setupTabStops()};a.prototype.resize=function(a,b){var c=this.getNullCell(D.DEFAULT_ATTR_DATA),
d=this._getCorrectBufferLength(b);d>this.lines.maxLength&&(this.lines.maxLength=d);if(0<this.lines.length){if(this._cols<a)for(var e=0;e<this.lines.length;e++)this.lines.get(e).resize(a,c);e=0;if(this._rows<b)for(var f=this._rows;f<b;f++)this.lines.length<b+this.ybase&&(0<this.ybase&&this.lines.length<=this.ybase+this.y+e+1?(this.ybase--,e++,0<this.ydisp&&this.ydisp--):this.lines.push(new D.BufferLine(a,c)));else for(f=this._rows;f>b;f--)this.lines.length>b+this.ybase&&(this.lines.length>this.ybase+
this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));d<this.lines.maxLength&&(f=this.lines.length-d,0<f&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0)),this.lines.maxLength=d);this.x=Math.min(this.x,a-1);this.y=Math.min(this.y,b-1);e&&(this.y+=e);this.savedY=Math.min(this.savedY,b-1);this.savedX=Math.min(this.savedX,a-1);this.scrollTop=0}this.scrollBottom=b-1;if(this._isReflowEnabled&&(this._reflow(a,b),this._cols>a))for(e=0;e<this.lines.length;e++)this.lines.get(e).resize(a,
c);this._cols=a;this._rows=b};Object.defineProperty(a.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._terminal.options.windowsMode},enumerable:!0,configurable:!0});a.prototype._reflow=function(a,b){this._cols!==a&&(a>this._cols?this._reflowLarger(a,b):this._reflowSmaller(a,b))};a.prototype._reflowLarger=function(a,b){var c=pb.reflowLargerGetLinesToRemove(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(D.DEFAULT_ATTR_DATA));0<c.length&&(c=pb.reflowLargerCreateNewLayout(this.lines,
c),pb.reflowLargerApplyNewLayout(this.lines,c.layout),this._reflowLargerAdjustViewport(a,b,c.countRemoved))};a.prototype._reflowLargerAdjustViewport=function(a,b,c){for(var d=this.getNullCell(D.DEFAULT_ATTR_DATA);0<c--;)0===this.ybase?(0<this.y&&this.y--,this.lines.length<b&&this.lines.push(new D.BufferLine(a,d))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--)};a.prototype._reflowSmaller=function(a,b){for(var c=this.getNullCell(D.DEFAULT_ATTR_DATA),d=[],e=0,f=this.lines.length-1;0<=f;f--){var p=
this.lines.get(f);if(!(!p||!p.isWrapped&&p.getTrimmedLength()<=a)){for(var q=[p];p.isWrapped&&0<f;)p=this.lines.get(--f),q.unshift(p);p=this.ybase+this.y;if(!(p>=f&&p<f+q.length)){var y=q[q.length-1].getTrimmedLength(),u=pb.reflowSmallerGetNewLineLengths(q,this._cols,a),r=u.length-q.length;var H=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+r):Math.max(0,this.lines.length-this.lines.maxLength+r);var fa=[];for(p=0;p<r;p++){var t=this.getBlankLine(D.DEFAULT_ATTR_DATA,
!0);fa.push(t)}0<fa.length&&(d.push({start:f+q.length+e,newLines:fa}),e+=fa.length);q.push.apply(q,fa);p=u.length-1;fa=u[p];0===fa&&(p--,fa=u[p]);for(t=q.length-r-1;0<=t;){var v=Math.min(y,fa);q[p].copyCellsFrom(q[t],y-v,fa-v,v,!0);fa-=v;0===fa&&(p--,fa=u[p]);y-=v;0===y&&(t--,y=pb.getWrappedLineTrimmedLength(q,Math.max(t,0),this._cols))}for(p=0;p<q.length;p++)u[p]<a&&q[p].setCell(u[p],c);for(p=r-H;0<p--;)0===this.ybase?this.y<b-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<
Math.min(this.lines.maxLength,this.lines.length+e)-b&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++)}}}if(0<d.length){a=[];c=[];for(p=0;p<this.lines.length;p++)c.push(this.lines.get(p));b=this.lines.length;f=b-1;q=0;u=d[q];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+e);r=0;for(p=Math.min(this.lines.maxLength-1,b+e-1);0<=p;p--)if(u&&u.start>f+r){for(H=u.newLines.length-1;0<=H;H--)this.lines.set(p--,u.newLines[H]);p++;a.push({index:f+1,amount:u.newLines.length});r+=u.newLines.length;
u=d[++q]}else this.lines.set(p,c[f--]);d=0;for(p=a.length-1;0<=p;p--)a[p].index+=d,this.lines.onInsertEmitter.fire(a[p]),d+=a[p].amount;e=Math.max(0,b+e-this.lines.maxLength);0<e&&this.lines.onTrimEmitter.fire(e)}};a.prototype.stringIndexToBufferIndex=function(a,b,c){for(void 0===c&&(c=!1);b;){var d=this.lines.get(a);if(!d)return[-1,-1];for(var e=c?d.getTrimmedLength():d.length,f=0;f<e;++f)if(d.get(f)[D.CHAR_DATA_WIDTH_INDEX]&&(b-=d.get(f)[D.CHAR_DATA_CHAR_INDEX].length||1),0>b)return[a,f];a++}return[a,
0]};a.prototype.translateBufferLineToString=function(a,b,c,d){void 0===c&&(c=0);return(a=this.lines.get(a))?a.translateToString(b,c,d):""};a.prototype.getWrappedRangeForLine=function(a){for(var b=a;0<b&&this.lines.get(b).isWrapped;)b--;for(;a+1<this.lines.length&&this.lines.get(a+1).isWrapped;)a++;return{first:b,last:a}};a.prototype.setupTabStops=function(a){null!==a&&void 0!==a?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);for(;a<this._cols;a+=this._terminal.options.tabStopWidth)this.tabs[a]=
!0};a.prototype.prevStop=function(a){if(null===a||void 0===a)a=this.x;for(;!this.tabs[--a]&&0<a;);return a>=this._cols?this._cols-1:0>a?0:a};a.prototype.nextStop=function(a){if(null===a||void 0===a)a=this.x;for(;!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:0>a?0:a};a.prototype.addMarker=function(a){var b=this,c=new vi.Marker(a);this.markers.push(c);c.register(this.lines.onTrim(function(a){c.line-=a;0>c.line&&c.dispose()}));c.register(this.lines.onInsert(function(a){c.line>=a.index&&
(c.line+=a.amount)}));c.register(this.lines.onDelete(function(a){c.line>=a.index&&c.line<a.index+a.amount&&c.dispose();c.line>a.index&&(c.line-=a.amount)}));c.register(c.onDispose(function(){return b._removeMarker(c)}));return c};a.prototype._removeMarker=function(a){this.markers.splice(this.markers.indexOf(a),1)};a.prototype.iterator=function(a,b,d,h,k){return new c(this,a,b,d,h,k)};return a}();b.Buffer=a;var c=function(){function a(a,b,c,d,k,n){void 0===c&&(c=0);void 0===d&&(d=a.lines.length);void 0===
k&&(k=0);void 0===n&&(n=0);this._buffer=a;this._trimRight=b;this._startIndex=c;this._endIndex=d;this._startOverscan=k;this._endOverscan=n;0>this._startIndex&&(this._startIndex=0);this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length);this._current=this._startIndex}a.prototype.hasNext=function(){return this._current<this._endIndex};a.prototype.next=function(){var a=this._buffer.getWrappedRangeForLine(this._current);a.first<this._startIndex-this._startOverscan&&(a.first=
this._startIndex-this._startOverscan);a.last>this._endIndex+this._endOverscan&&(a.last=this._endIndex+this._endOverscan);a.first=Math.max(a.first,0);a.last=Math.min(a.last,this._buffer.lines.length);for(var b="",c=a.first;c<=a.last;++c)b+=this._buffer.translateBufferLineToString(c,this._trimRight);this._current=a.last+1;return{range:a,content:b}};return a}();b.BufferStringIterator=c});E(Cd);var wi=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a){this._terminal=
a;this._onBufferActivate=new U.EventEmitter2;this._normal=new Cd.Buffer(this._terminal,!0);this._normal.fillViewportRows();this._alt=new Cd.Buffer(this._terminal,!1);this._activeBuffer=this._normal;this.setupTabStops()}Object.defineProperty(a.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"alt",{get:function(){return this._alt},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"active",
{get:function(){return this._activeBuffer},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"normal",{get:function(){return this._normal},enumerable:!0,configurable:!0});a.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))};a.prototype.activateAltBuffer=function(a){this._activeBuffer!==
this._alt&&(this._alt.fillViewportRows(a),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))};a.prototype.resize=function(a,b){this._normal.resize(a,b);this._alt.resize(a,b)};a.prototype.setupTabStops=function(a){this._normal.setupTabStops(a);this._alt.setupTabStops(a)};return a}();b.BufferSet=a});E(wi);var xi=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a,
b,c){this._textarea=a;this._compositionView=b;this._terminal=c;this._isSendingComposition=this._isComposing=!1;this._compositionPosition={start:null,end:null}}a.prototype.compositionstart=function(){this._isComposing=!0;this._compositionPosition.start=this._textarea.value.length;this._compositionView.textContent="";this._compositionView.classList.add("active")};a.prototype.compositionupdate=function(a){var b=this;this._compositionView.textContent=a.data;this.updateCompositionElements();setTimeout(function(){b._compositionPosition.end=
b._textarea.value.length},0)};a.prototype.compositionend=function(){this._finalizeComposition(!0)};a.prototype.keydown=function(a){if(this._isComposing||this._isSendingComposition){if(229===a.keyCode||16===a.keyCode||17===a.keyCode||18===a.keyCode)return!1;this._finalizeComposition(!1)}return 229===a.keyCode?(this._handleAnyTextareaChanges(),!1):!0};a.prototype._finalizeComposition=function(a){var b=this;this._compositionView.classList.remove("active");this._isComposing=!1;this._clearTextareaPosition();
if(a){var c=this._compositionPosition.start,d=this._compositionPosition.end;this._isSendingComposition=!0;setTimeout(function(){if(b._isSendingComposition){b._isSendingComposition=!1;var a=b._isComposing?b._textarea.value.substring(c,d):b._textarea.value.substring(c);b._terminal.handler(a)}},0)}else this._isSendingComposition=!1,a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end),this._terminal.handler(a)};a.prototype._handleAnyTextareaChanges=function(){var a=
this,b=this._textarea.value;setTimeout(function(){if(!a._isComposing){var c=a._textarea.value.replace(b,"");0<c.length&&a._terminal.handler(c)}},0)};a.prototype.updateCompositionElements=function(a){var b=this;if(this._isComposing){if(this._terminal.buffer.isCursorInViewport){var c=Math.ceil(this._terminal.charMeasure.height*this._terminal.options.lineHeight),d=this._terminal.buffer.y*c,h=this._terminal.buffer.x*this._terminal.charMeasure.width;this._compositionView.style.left=h+"px";this._compositionView.style.top=
d+"px";this._compositionView.style.height=c+"px";this._compositionView.style.lineHeight=c+"px";this._compositionView.style.fontFamily=this._terminal.options.fontFamily;this._compositionView.style.fontSize=this._terminal.options.fontSize+"px";c=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px";this._textarea.style.top=d+"px";this._textarea.style.width=c.width+"px";this._textarea.style.height=c.height+"px";this._textarea.style.lineHeight=c.height+"px"}a||setTimeout(function(){return b.updateCompositionElements(!0)},
0)}};a.prototype._clearTextareaPosition=function(){this._textarea.style.left="";this._textarea.style.top=""};return a}();b.CompositionHelper=a});E(xi);var yi=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=
c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){var b=a.call(this)||this;b._events=b._events||{};return b}c(b,a);b.prototype.on=function(a,b){this._events[a]=this._events[a]||[];this._events[a].push(b)};b.prototype.addDisposableListener=function(a,b){var c=this;this.on(a,b);var d=!1;return{dispose:function(){d||(c.off(a,b),d=!0)}}};b.prototype.off=function(a,b){if(this._events[a]){a=this._events[a];for(var c=a.length;c--;)if(a[c]===b){a.splice(c,
1);break}}};b.prototype.removeAllListeners=function(a){this._events[a]&&delete this._events[a]};b.prototype.emit=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];if(this._events[a]){c=this._events[a];for(var d=0;d<c.length;d++)c[d].apply(this,b)}};b.prototype.emitMayRemoveListeners=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];if(this._events[a]){c=this._events[a];for(var d=c.length,e=0;e<c.length;e++)c[e].apply(this,b),e-=d-c.length,d=c.length}};b.prototype.listeners=
function(a){return this._events[a]||[]};b.prototype.dispose=function(){a.prototype.dispose.call(this);this._events={}};return b}(Pa.Disposable);b.EventEmitter=a});E(yi);var R=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.addDisposableDomListener=function(a,b,e,f){a.addEventListener(b,e,f);return{dispose:function(){e&&a.removeEventListener(b,e,f)}}}});E(R);var zi=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c,d,e,n){var f=a.call(this)||this;f._terminal=b;f._viewportElement=c;f._scrollArea=d;f._charMeasure=e;f._dimensions=n;f.scrollBarWidth=0;f._currentRowHeight=0;f._lastRecordedBufferLength=
0;f._lastRecordedViewportHeight=0;f._lastRecordedBufferHeight=0;f._lastScrollTop=0;f._wheelPartialScroll=0;f._refreshAnimationFrame=null;f._ignoreNextScrollEvent=!1;f.scrollBarWidth=f._viewportElement.offsetWidth-f._scrollArea.offsetWidth||15;f.register(R.addDisposableDomListener(f._viewportElement,"scroll",f._onScroll.bind(f)));setTimeout(function(){return f.syncScrollArea()},0);return f}c(b,a);b.prototype.onDimensionsChance=function(a){this._dimensions=a};b.prototype.onThemeChange=function(a){this._viewportElement.style.backgroundColor=
a.background.css};b.prototype._refresh=function(){var a=this;null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame(function(){return a._innerRefresh()}))};b.prototype._innerRefresh=function(){if(0<this._charMeasure.height){this._currentRowHeight=this._dimensions.scaledCellHeight/window.devicePixelRatio;this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-
this._dimensions.canvasHeight);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}a=this._terminal.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==a&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=a);this._refreshAnimationFrame=null};b.prototype.syncScrollArea=function(){this._lastRecordedBufferLength!==this._terminal.buffer.lines.length?(this._lastRecordedBufferLength=this._terminal.buffer.lines.length,
this._refresh()):this._lastRecordedViewportHeight!==this._dimensions.canvasHeight?this._refresh():this._lastScrollTop!==this._terminal.buffer.ydisp*this._currentRowHeight?this._refresh():this._lastScrollTop!==this._viewportElement.scrollTop?this._refresh():this._dimensions.scaledCellHeight/window.devicePixelRatio!==this._currentRowHeight&&this._refresh()};b.prototype._onScroll=function(a){this._lastScrollTop=this._viewportElement.scrollTop;this._viewportElement.offsetParent&&(this._ignoreNextScrollEvent?
this._ignoreNextScrollEvent=!1:this._terminal.scrollLines(Math.round(this._lastScrollTop/this._currentRowHeight)-this._terminal.buffer.ydisp,!0))};b.prototype.onWheel=function(a){var b=this._getPixelsScrolled(a);0!==b&&(this._viewportElement.scrollTop+=b,a.preventDefault())};b.prototype._getPixelsScrolled=function(a){if(0===a.deltaY)return 0;var b=a.deltaY;a.deltaMode===WheelEvent.DOM_DELTA_LINE?b*=this._currentRowHeight:a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._currentRowHeight*this._terminal.rows);
return b};b.prototype.getLinesScrolled=function(a){if(0===a.deltaY)return 0;var b=a.deltaY;a.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(b/=this._currentRowHeight+0,this._wheelPartialScroll+=b,b=Math.floor(Math.abs(this._wheelPartialScroll))*(0<this._wheelPartialScroll?1:-1),this._wheelPartialScroll%=1):a.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(b*=this._terminal.rows);return b};b.prototype.onTouchStart=function(a){this._lastTouchY=a.touches[0].pageY};b.prototype.onTouchMove=function(a){var b=this._lastTouchY-
a.touches[0].pageY;this._lastTouchY=a.touches[0].pageY;0!==b&&(this._viewportElement.scrollTop+=b,a.preventDefault())};return b}(Pa.Disposable);b.Viewport=a});E(zi);var Nb=C(function(a,b){function c(a){return a.replace(/\r?\n/g,"\r")}function d(a,b){return b?"\u001b[200~"+a+"\u001b[201~":a}function e(a,b){var c=b.screenElement.getBoundingClientRect(),d=a.clientX-c.left-10;a=a.clientY-c.top-10;b.textarea.style.position="absolute";b.textarea.style.width="20px";b.textarea.style.height="20px";b.textarea.style.left=
d+"px";b.textarea.style.top=a+"px";b.textarea.style.zIndex="1000";b.textarea.focus();setTimeout(function(){b.textarea.style.position=null;b.textarea.style.width=null;b.textarea.style.height=null;b.textarea.style.left=null;b.textarea.style.top=null;b.textarea.style.zIndex=null},200)}Object.defineProperty(b,"__esModule",{value:!0});b.prepareTextForTerminal=c;b.bracketTextForPaste=d;b.copyHandler=function(a,b,c){b.browser.isMSIE?window.clipboardData.setData("Text",c.selectionText):a.clipboardData.setData("text/plain",
c.selectionText);a.preventDefault()};b.pasteHandler=function(a,b){a.stopPropagation();var e=function(e){e=c(e);e=d(e,b.bracketedPasteMode);b.handler(e);b.textarea.value="";b.emit("paste",e);b.cancel(a)};if(b.browser.isMSIE){if(window.clipboardData){var f=window.clipboardData.getData("Text");e(f)}}else a.clipboardData&&(f=a.clipboardData.getData("text/plain"),e(f))};b.moveTextAreaUnderMouseCursor=e;b.rightClickHandler=function(a,b,c,d){e(a,b);d&&!c.isClickInSelection(a)&&c.selectWordAtCursor(a);b.textarea.value=
c.selectionText;b.textarea.select()}});E(Nb);var v=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a.NUL="\x00";a.SOH="\u0001";a.STX="\u0002";a.ETX="\u0003";a.EOT="\u0004";a.ENQ="\u0005";a.ACK="\u0006";a.BEL="\u0007";a.BS="\b";a.HT="\t";a.LF="\n";a.VT="\x0B";a.FF="\f";a.CR="\r";a.SO="\u000e";a.SI="\u000f";a.DLE="\u0010";a.DC1="\u0011";a.DC2="\u0012";a.DC3="\u0013";a.DC4="\u0014";a.NAK="\u0015";a.SYN="\u0016";a.ETB="\u0017";a.CAN="\u0018";a.EM="\u0019";a.SUB="\u001a";
a.ESC="\u001b";a.FS="\u001c";a.GS="\u001d";a.RS="\u001e";a.US="\u001f";a.SP=" ";a.DEL="\u007f"})(b.C0||(b.C0={}));(function(a){a.PAD="\u0080";a.HOP="\u0081";a.BPH="\u0082";a.NBH="\u0083";a.IND="\u0084";a.NEL="\u0085";a.SSA="\u0086";a.ESA="\u0087";a.HTS="\u0088";a.HTJ="\u0089";a.VTS="\u008a";a.PLD="\u008b";a.PLU="\u008c";a.RI="\u008d";a.SS2="\u008e";a.SS3="\u008f";a.DCS="\u0090";a.PU1="\u0091";a.PU2="\u0092";a.STS="\u0093";a.CCH="\u0094";a.MW="\u0095";a.SPA="\u0096";a.EPA="\u0097";a.SOS="\u0098";a.SGCI=
"\u0099";a.SCI="\u009a";a.CSI="\u009b";a.ST="\u009c";a.OSC="\u009d";a.PM="\u009e";a.APC="\u009f"})(b.C1||(b.C1={}))});E(v);var qb=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.CHARSETS={};b.DEFAULT_CHARSET=b.CHARSETS.B;b.CHARSETS["0"]={"`":"\u25c6",a:"\u2592",b:"\t",c:"\f",d:"\r",e:"\n",f:"\u00b0",g:"\u00b1",h:"\u2424",i:"\x0B",j:"\u2518",k:"\u2510",l:"\u250c",m:"\u2514",n:"\u253c",o:"\u23ba",p:"\u23bb",q:"\u2500",r:"\u23bc",s:"\u23bd",t:"\u251c",u:"\u2524",v:"\u2534",w:"\u252c",
x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03c0","|":"\u2260","}":"\u00a3","~":"\u00b7"};b.CHARSETS.A={"#":"\u00a3"};b.CHARSETS.B=null;b.CHARSETS["4"]={"#":"\u00a3","@":"\u00be","[":"ij","\\":"\u00bd","]":"|","{":"\u00a8","|":"f","}":"\u00bc","~":"\u00b4"};b.CHARSETS.C=b.CHARSETS["5"]={"[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};b.CHARSETS.R={"#":"\u00a3","@":"\u00e0","[":"\u00b0","\\":"\u00e7","]":"\u00a7","{":"\u00e9","|":"\u00f9",
"}":"\u00e8","~":"\u00a8"};b.CHARSETS.Q={"@":"\u00e0","[":"\u00e2","\\":"\u00e7","]":"\u00ea","^":"\u00ee","`":"\u00f4","{":"\u00e9","|":"\u00f9","}":"\u00e8","~":"\u00fb"};b.CHARSETS.K={"@":"\u00a7","[":"\u00c4","\\":"\u00d6","]":"\u00dc","{":"\u00e4","|":"\u00f6","}":"\u00fc","~":"\u00df"};b.CHARSETS.Y={"#":"\u00a3","@":"\u00a7","[":"\u00b0","\\":"\u00e7","]":"\u00e9","`":"\u00f9","{":"\u00e0","|":"\u00f2","}":"\u00e8","~":"\u00ec"};b.CHARSETS.E=b.CHARSETS["6"]={"@":"\u00c4","[":"\u00c6","\\":"\u00d8",
"]":"\u00c5","^":"\u00dc","`":"\u00e4","{":"\u00e6","|":"\u00f8","}":"\u00e5","~":"\u00fc"};b.CHARSETS.Z={"#":"\u00a3","@":"\u00a7","[":"\u00a1","\\":"\u00d1","]":"\u00bf","{":"\u00b0","|":"\u00f1","}":"\u00e7"};b.CHARSETS.H=b.CHARSETS["7"]={"@":"\u00c9","[":"\u00c4","\\":"\u00d6","]":"\u00c5","^":"\u00dc","`":"\u00e9","{":"\u00e4","|":"\u00f6","}":"\u00e5","~":"\u00fc"};b.CHARSETS["="]={"#":"\u00f9","@":"\u00e0","[":"\u00e9","\\":"\u00e7","]":"\u00ea","^":"\u00ee",_:"\u00e8","`":"\u00f4","{":"\u00e4",
"|":"\u00f6","}":"\u00fc","~":"\u00fb"}});E(qb);var Ea=C(function(a,b){function c(a,b,c,g){void 0===c&&(c=0);void 0===g&&(g=a.length);if(c>=a.length)return a;c=(a.length+c)%a.length;for(g=g>=a.length?a.length:(a.length+g)%a.length;c<g;++c)a[c]=b;return a}Object.defineProperty(b,"__esModule",{value:!0});b.fill=function(a,b,f,g){return a.fill?a.fill(b,f,g):c(a,b,f,g)};b.fillFallback=c;b.concat=function(a,b){var c=new a.constructor(a.length+b.length);c.set(a);c.set(b,a.length);return c}});E(Ea);var Ue=
C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.wcwidth=function(a){var b=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,
2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,
3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,
8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],f=a.control|0,g=new Uint8Array(65536);Ea.fill(g,1);g[0]=a.nul;Ea.fill(g,a.control,1,32);Ea.fill(g,a.control,127,160);Ea.fill(g,2,4352,4448);g[9001]=2;g[9002]=
2;Ea.fill(g,2,11904,42192);g[12351]=1;Ea.fill(g,2,44032,55204);Ea.fill(g,2,63744,64256);Ea.fill(g,2,65040,65050);Ea.fill(g,2,65072,65136);Ea.fill(g,2,65280,65377);Ea.fill(g,2,65504,65511);for(a=0;a<b.length;++a)Ea.fill(g,0,b[a][0],b[a][1]+1);return function(a){if(32>a)return f|0;if(127>a)return 1;if(65536>a)return g[a];b:{var b=0;var d=c.length-1;if(!(a<c[0][0]||a>c[d][1]))for(;d>=b;){var e=b+d>>1;if(a>c[e][1])b=e+1;else if(a<c[e][0])d=e-1;else{b=!0;break b}}b=!1}return b?0:131072<=a&&196605>=a||
196608<=a&&262141>=a?2:1}}({nul:0,control:0});b.getStringCellWidth=function(a){for(var c=0,e=a.length,f=0;f<e;++f){var g=a.charCodeAt(f);if(55296<=g&&56319>=g){if(++f>=e)return c+b.wcwidth(g);var h=a.charCodeAt(f);56320<=h&&57343>=h?g=1024*(g-55296)+h-56320+65536:c+=b.wcwidth(h)}c+=b.wcwidth(g)}return c}});E(Ue);var Ai=C(function(a,b){function c(a,b){a=b-a;for(var c=Array(a);a--;)c[a]=--b;return c}var d=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a){this.table="undefined"===typeof Uint8Array?Array(a):new Uint8Array(a)}a.prototype.add=function(a,b,c,d){this.table[b<<8|a]=(c|0)<<4|(void 0===d?b:d)};a.prototype.addMany=function(a,
b,c,d){for(var e=0;e<a.length;e++)this.add(a[e],b,c,d)};return a}();b.TransitionTable=e;var f=c(32,127),g=c(0,24);g.push(25);g.push.apply(g,c(28,32));b.VT500_TRANSITION_TABLE=function(){var a=new e(4095),b=c(0,14),d;for(d in b)for(var h=0;160>=h;++h)a.add(h,d,1,0);a.addMany(f,0,2,0);for(d in b)a.addMany([24,26,153,154],d,3,0),a.addMany(c(128,144),d,3,0),a.addMany(c(144,152),d,3,0),a.add(156,d,0,0),a.add(27,d,11,1),a.add(157,d,4,8),a.addMany([152,158,159],d,0,7),a.add(155,d,11,3),a.add(144,d,11,9);
a.addMany(g,0,3,0);a.addMany(g,1,3,1);a.add(127,1,0,1);a.addMany(g,8,0,8);a.addMany(g,3,3,3);a.add(127,3,0,3);a.addMany(g,4,3,4);a.add(127,4,0,4);a.addMany(g,6,3,6);a.addMany(g,5,3,5);a.add(127,5,0,5);a.addMany(g,2,3,2);a.add(127,2,0,2);a.add(93,1,4,8);a.addMany(f,8,5,8);a.add(127,8,5,8);a.addMany([156,27,24,26,7],8,6,0);a.addMany(c(28,32),8,0,8);a.addMany([88,94,95],1,0,7);a.addMany(f,7,0,7);a.addMany(g,7,0,7);a.add(156,7,0,0);a.add(127,7,0,7);a.add(91,1,11,3);a.addMany(c(64,127),3,7,0);a.addMany(c(48,
58),3,8,4);a.add(59,3,8,4);a.addMany([60,61,62,63],3,9,4);a.addMany(c(48,58),4,8,4);a.add(59,4,8,4);a.addMany(c(64,127),4,7,0);a.addMany([58,60,61,62,63],4,0,6);a.addMany(c(32,64),6,0,6);a.add(127,6,0,6);a.addMany(c(64,127),6,0,0);a.add(58,3,0,6);a.addMany(c(32,48),3,9,5);a.addMany(c(32,48),5,9,5);a.addMany(c(48,64),5,0,6);a.addMany(c(64,127),5,7,0);a.addMany(c(32,48),4,9,5);a.addMany(c(32,48),1,9,2);a.addMany(c(32,48),2,9,2);a.addMany(c(48,127),2,10,0);a.addMany(c(48,80),1,10,0);a.addMany(c(81,88),
1,10,0);a.addMany([89,90,92],1,10,0);a.addMany(c(96,127),1,10,0);a.add(80,1,11,9);a.addMany(g,9,0,9);a.add(127,9,0,9);a.addMany(c(28,32),9,0,9);a.addMany(c(32,48),9,9,12);a.add(58,9,0,11);a.addMany(c(48,58),9,8,10);a.add(59,9,8,10);a.addMany([60,61,62,63],9,9,10);a.addMany(g,11,0,11);a.addMany(c(32,128),11,0,11);a.addMany(c(28,32),11,0,11);a.addMany(g,10,0,10);a.add(127,10,0,10);a.addMany(c(28,32),10,0,10);a.addMany(c(48,58),10,8,10);a.add(59,10,8,10);a.addMany([58,60,61,62,63],10,0,11);a.addMany(c(32,
48),10,9,12);a.addMany(g,12,0,12);a.add(127,12,0,12);a.addMany(c(28,32),12,0,12);a.addMany(c(32,48),12,9,12);a.addMany(c(48,64),12,0,11);a.addMany(c(64,127),12,12,13);a.addMany(c(64,127),10,12,13);a.addMany(c(64,127),9,12,13);a.addMany(g,13,13,13);a.addMany(f,13,13,13);a.add(127,13,0,13);a.addMany([27,156],13,14,0);a.add(160,8,5,8);return a}();var h=function(){function a(){}a.prototype.hook=function(a,b,c){};a.prototype.put=function(a,b,c){};a.prototype.unhook=function(){};return a}();a=function(a){function c(c){void 0===
c&&(c=b.VT500_TRANSITION_TABLE);var d=a.call(this)||this;d.TRANSITIONS=c;d.initialState=0;d.currentState=d.initialState;d._osc="";d._params=[0];d._collect="";d._printHandlerFb=function(a,b,c){};d._executeHandlerFb=function(a){};d._csiHandlerFb=function(a,b,c){};d._escHandlerFb=function(a,b){};d._oscHandlerFb=function(a,b){};d._dcsHandlerFb=new h;d._errorHandlerFb=function(a){return a};d._printHandler=d._printHandlerFb;d._executeHandlers=Object.create(null);d._csiHandlers=Object.create(null);d._escHandlers=
Object.create(null);d._oscHandlers=Object.create(null);d._dcsHandlers=Object.create(null);d._activeDcsHandler=null;d._errorHandler=d._errorHandlerFb;d.setEscHandler("\\",function(){});return d}d(c,a);c.prototype.dispose=function(){this._errorHandler=this._activeDcsHandler=this._dcsHandlers=this._oscHandlers=this._csiHandlers=this._escHandlers=this._executeHandlers=this._printHandler=this._errorHandlerFb=this._dcsHandlerFb=this._oscHandlerFb=this._escHandlerFb=this._csiHandlerFb=this._executeHandlerFb=
this._printHandlerFb=null};c.prototype.setPrintHandler=function(a){this._printHandler=a};c.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb};c.prototype.setExecuteHandler=function(a,b){this._executeHandlers[a.charCodeAt(0)]=b};c.prototype.clearExecuteHandler=function(a){this._executeHandlers[a.charCodeAt(0)]&&delete this._executeHandlers[a.charCodeAt(0)]};c.prototype.setExecuteHandlerFallback=function(a){this._executeHandlerFb=a};c.prototype.addCsiHandler=function(a,
b){a=a.charCodeAt(0);void 0===this._csiHandlers[a]&&(this._csiHandlers[a]=[]);var c=this._csiHandlers[a];c.push(b);return{dispose:function(){var a=c.indexOf(b);-1!==a&&c.splice(a,1)}}};c.prototype.setCsiHandler=function(a,b){this._csiHandlers[a.charCodeAt(0)]=[b]};c.prototype.clearCsiHandler=function(a){this._csiHandlers[a.charCodeAt(0)]&&delete this._csiHandlers[a.charCodeAt(0)]};c.prototype.setCsiHandlerFallback=function(a){this._csiHandlerFb=a};c.prototype.setEscHandler=function(a,b){this._escHandlers[a]=
b};c.prototype.clearEscHandler=function(a){this._escHandlers[a]&&delete this._escHandlers[a]};c.prototype.setEscHandlerFallback=function(a){this._escHandlerFb=a};c.prototype.addOscHandler=function(a,b){void 0===this._oscHandlers[a]&&(this._oscHandlers[a]=[]);var c=this._oscHandlers[a];c.push(b);return{dispose:function(){var a=c.indexOf(b);-1!==a&&c.splice(a,1)}}};c.prototype.setOscHandler=function(a,b){this._oscHandlers[a]=[b]};c.prototype.clearOscHandler=function(a){this._oscHandlers[a]&&delete this._oscHandlers[a]};
c.prototype.setOscHandlerFallback=function(a){this._oscHandlerFb=a};c.prototype.setDcsHandler=function(a,b){this._dcsHandlers[a]=b};c.prototype.clearDcsHandler=function(a){this._dcsHandlers[a]&&delete this._dcsHandlers[a]};c.prototype.setDcsHandlerFallback=function(a){this._dcsHandlerFb=a};c.prototype.setErrorHandler=function(a){this._errorHandler=a};c.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb};c.prototype.reset=function(){this.currentState=this.initialState;this._osc=
"";this._params=[0];this._collect="";this._activeDcsHandler=null};c.prototype.parse=function(a,b){for(var c,d,e=!1,f=this.currentState,g=-1,h=-1,k=this._osc,n=this._collect,p=this._params,q=this.TRANSITIONS.table,aa=this._activeDcsHandler,ha=0;ha<b;++ha)if(c=a[ha],0===f&&31<c&&128>c){g=~g?g:ha;do ha++;while(ha<b&&31<a[ha]&&128>a[ha]);ha--}else if(4===f&&47<c&&57>c)p[p.length-1]=10*p[p.length-1]+c-48;else{d=q[f<<8|(160>c?c:160)];switch(d>>4){case 2:g=~g?g:ha;break;case 3:~g&&(this._printHandler(a,
g,ha),g=-1);(f=this._executeHandlers[c])?f():this._executeHandlerFb(c);break;case 0:~g?(this._printHandler(a,g,ha),g=-1):~h&&(aa.put(a,h,ha),h=-1);break;case 1:if(159<c)switch(f){case 0:g=~g?g:ha;break;case 6:d|=6;break;case 11:d|=11;break;case 13:h=~h?h:ha;d|=13;break;default:e=!0}else e=!0;if(e){if(this._errorHandler({position:ha,code:c,currentState:f,print:g,dcs:h,osc:k,collect:n,params:p,abort:!1}).abort)return;e=!1}break;case 7:for(var t=(f=this._csiHandlers[c])?f.length-1:-1;0<=t&&!1===f[t](p,
n);t--);0>t&&this._csiHandlerFb(n,p,c);break;case 8:59===c?p.push(0):p[p.length-1]=10*p[p.length-1]+c-48;break;case 9:n+=String.fromCharCode(c);break;case 10:(f=this._escHandlers[n+String.fromCharCode(c)])?f(n,c):this._escHandlerFb(n,c);break;case 11:~g&&(this._printHandler(a,g,ha),g=-1);k="";p=[0];n="";h=-1;break;case 12:aa=this._dcsHandlers[n+String.fromCharCode(c)];aa||(aa=this._dcsHandlerFb);aa.hook(n,p,c);break;case 13:h=~h?h:ha;break;case 14:aa&&(~h&&aa.put(a,h,ha),aa.unhook(),aa=null);27===
c&&(d|=1);k="";p=[0];n="";h=-1;break;case 4:~g&&(this._printHandler(a,g,ha),g=-1);k="";break;case 5:for(f=ha+1;;f++)if(f>=b||32>(c=a[f])||127<c&&159>=c){k+=Aa.utf32ToString(a,ha,f);ha=f-1;break}break;case 6:if(k&&24!==c&&26!==c)if(n=k.indexOf(";"),-1===n)this._oscHandlerFb(-1,k);else{h=parseInt(k.substring(0,n));k=k.substring(n+1);for(p=(n=this._oscHandlers[h])?n.length-1:-1;0<=p&&!1===n[p](k);p--);0>p&&this._oscHandlerFb(h,k)}27===c&&(d|=1);k="";p=[0];n="";h=-1}f=d&15}0===f&&~g?this._printHandler(a,
g,b):13===f&&~h&&aa&&aa.put(a,h,b);this._osc=k;this._collect=n;this._params=p;this._activeDcsHandler=aa;this.currentState=f};return c}(Pa.Disposable);b.EscapeSequenceParser=a});E(Ai);var Bi=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===
c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var d={"(":0,")":1,"*":2,"+":3,"-":1,".":2},e=function(){function a(a){this._terminal=a;this._data=new Uint32Array(0)}a.prototype.hook=function(a,b,c){this._data=new Uint32Array(0)};a.prototype.put=function(a,b,c){this._data=Ea.concat(this._data,a.subarray(b,c))};a.prototype.unhook=function(){var a=Aa.utf32ToString(this._data);this._data=new Uint32Array(0);switch(a){case '"q':return this._terminal.handler(v.C0.ESC+
'P1$r0"q'+v.C0.ESC+"\\");case '"p':return this._terminal.handler(v.C0.ESC+'P1$r61"p'+v.C0.ESC+"\\");case "r":return this._terminal.handler(v.C0.ESC+"P1$r"+(""+(this._terminal.buffer.scrollTop+1)+";"+(this._terminal.buffer.scrollBottom+1)+"r")+v.C0.ESC+"\\");case "m":return this._terminal.handler(v.C0.ESC+"P1$r0m"+v.C0.ESC+"\\");case " q":return a={block:2,underline:4,bar:6}[this._terminal.getOption("cursorStyle")],a-=this._terminal.getOption("cursorBlink"),this._terminal.handler(v.C0.ESC+"P1$r"+a+
" q"+v.C0.ESC+"\\");default:this._terminal.error("Unknown DCS $q %s",a),this._terminal.handler(v.C0.ESC+"P0$r"+v.C0.ESC+"\\")}};return a}();a=function(a){function b(b,c){void 0===c&&(c=new Ai.EscapeSequenceParser);var d=a.call(this)||this;d._terminal=b;d._parser=c;d._parseBuffer=new Uint32Array(4096);d._stringDecoder=new Aa.StringToUtf32;d._utf8Decoder=new Aa.Utf8ToUtf32;d._workCell=new D.CellData;d._onCursorMove=new U.EventEmitter2;d._onData=new U.EventEmitter2;d._onLineFeed=new U.EventEmitter2;
d._onScroll=new U.EventEmitter2;d.register(d._parser);d._parser.setCsiHandlerFallback(function(a,b,c){d._terminal.error("Unknown CSI code: ",{collect:a,params:b,flag:String.fromCharCode(c)})});d._parser.setEscHandlerFallback(function(a,b){d._terminal.error("Unknown ESC code: ",{collect:a,flag:String.fromCharCode(b)})});d._parser.setExecuteHandlerFallback(function(a){d._terminal.error("Unknown EXECUTE code: ",{code:a})});d._parser.setOscHandlerFallback(function(a,b){d._terminal.error("Unknown OSC code: ",
{identifier:a,data:b})});d._parser.setPrintHandler(function(a,b,c){return d.print(a,b,c)});d._parser.setCsiHandler("@",function(a,b){return d.insertChars(a)});d._parser.setCsiHandler("A",function(a,b){return d.cursorUp(a)});d._parser.setCsiHandler("B",function(a,b){return d.cursorDown(a)});d._parser.setCsiHandler("C",function(a,b){return d.cursorForward(a)});d._parser.setCsiHandler("D",function(a,b){return d.cursorBackward(a)});d._parser.setCsiHandler("E",function(a,b){return d.cursorNextLine(a)});
d._parser.setCsiHandler("F",function(a,b){return d.cursorPrecedingLine(a)});d._parser.setCsiHandler("G",function(a,b){return d.cursorCharAbsolute(a)});d._parser.setCsiHandler("H",function(a,b){return d.cursorPosition(a)});d._parser.setCsiHandler("I",function(a,b){return d.cursorForwardTab(a)});d._parser.setCsiHandler("J",function(a,b){return d.eraseInDisplay(a)});d._parser.setCsiHandler("K",function(a,b){return d.eraseInLine(a)});d._parser.setCsiHandler("L",function(a,b){return d.insertLines(a)});
d._parser.setCsiHandler("M",function(a,b){return d.deleteLines(a)});d._parser.setCsiHandler("P",function(a,b){return d.deleteChars(a)});d._parser.setCsiHandler("S",function(a,b){return d.scrollUp(a)});d._parser.setCsiHandler("T",function(a,b){return d.scrollDown(a,b)});d._parser.setCsiHandler("X",function(a,b){return d.eraseChars(a)});d._parser.setCsiHandler("Z",function(a,b){return d.cursorBackwardTab(a)});d._parser.setCsiHandler("`",function(a,b){return d.charPosAbsolute(a)});d._parser.setCsiHandler("a",
function(a,b){return d.hPositionRelative(a)});d._parser.setCsiHandler("b",function(a,b){return d.repeatPrecedingCharacter(a)});d._parser.setCsiHandler("c",function(a,b){return d.sendDeviceAttributes(a,b)});d._parser.setCsiHandler("d",function(a,b){return d.linePosAbsolute(a)});d._parser.setCsiHandler("e",function(a,b){return d.vPositionRelative(a)});d._parser.setCsiHandler("f",function(a,b){return d.hVPosition(a)});d._parser.setCsiHandler("g",function(a,b){return d.tabClear(a)});d._parser.setCsiHandler("h",
function(a,b){return d.setMode(a,b)});d._parser.setCsiHandler("l",function(a,b){return d.resetMode(a,b)});d._parser.setCsiHandler("m",function(a,b){return d.charAttributes(a)});d._parser.setCsiHandler("n",function(a,b){return d.deviceStatus(a,b)});d._parser.setCsiHandler("p",function(a,b){return d.softReset(a,b)});d._parser.setCsiHandler("q",function(a,b){return d.setCursorStyle(a,b)});d._parser.setCsiHandler("r",function(a,b){return d.setScrollRegion(a,b)});d._parser.setCsiHandler("s",function(a,
b){return d.saveCursor(a)});d._parser.setCsiHandler("u",function(a,b){return d.restoreCursor(a)});d._parser.setExecuteHandler(v.C0.BEL,function(){return d.bell()});d._parser.setExecuteHandler(v.C0.LF,function(){return d.lineFeed()});d._parser.setExecuteHandler(v.C0.VT,function(){return d.lineFeed()});d._parser.setExecuteHandler(v.C0.FF,function(){return d.lineFeed()});d._parser.setExecuteHandler(v.C0.CR,function(){return d.carriageReturn()});d._parser.setExecuteHandler(v.C0.BS,function(){return d.backspace()});
d._parser.setExecuteHandler(v.C0.HT,function(){return d.tab()});d._parser.setExecuteHandler(v.C0.SO,function(){return d.shiftOut()});d._parser.setExecuteHandler(v.C0.SI,function(){return d.shiftIn()});d._parser.setExecuteHandler(v.C1.IND,function(){return d.index()});d._parser.setExecuteHandler(v.C1.NEL,function(){return d.nextLine()});d._parser.setExecuteHandler(v.C1.HTS,function(){return d.tabSet()});d._parser.setOscHandler(0,function(a){return d.setTitle(a)});d._parser.setOscHandler(2,function(a){return d.setTitle(a)});
d._parser.setEscHandler("7",function(){return d.saveCursor([])});d._parser.setEscHandler("8",function(){return d.restoreCursor([])});d._parser.setEscHandler("D",function(){return d.index()});d._parser.setEscHandler("E",function(){return d.nextLine()});d._parser.setEscHandler("H",function(){return d.tabSet()});d._parser.setEscHandler("M",function(){return d.reverseIndex()});d._parser.setEscHandler("=",function(){return d.keypadApplicationMode()});d._parser.setEscHandler(">",function(){return d.keypadNumericMode()});
d._parser.setEscHandler("c",function(){return d.reset()});d._parser.setEscHandler("n",function(){return d.setgLevel(2)});d._parser.setEscHandler("o",function(){return d.setgLevel(3)});d._parser.setEscHandler("|",function(){return d.setgLevel(3)});d._parser.setEscHandler("}",function(){return d.setgLevel(2)});d._parser.setEscHandler("~",function(){return d.setgLevel(1)});d._parser.setEscHandler("%@",function(){return d.selectDefaultCharset()});d._parser.setEscHandler("%G",function(){return d.selectDefaultCharset()});
b=function(a){f._parser.setEscHandler("("+a,function(){return d.selectCharset("("+a)});f._parser.setEscHandler(")"+a,function(){return d.selectCharset(")"+a)});f._parser.setEscHandler("*"+a,function(){return d.selectCharset("*"+a)});f._parser.setEscHandler("+"+a,function(){return d.selectCharset("+"+a)});f._parser.setEscHandler("-"+a,function(){return d.selectCharset("-"+a)});f._parser.setEscHandler("."+a,function(){return d.selectCharset("."+a)});f._parser.setEscHandler("/"+a,function(){return d.selectCharset("/"+
a)})};var f=this,g;for(g in qb.CHARSETS)b(g);d._parser.setErrorHandler(function(a){d._terminal.error("Parsing error: ",a);return a});d._parser.setDcsHandler("$q",new e(d._terminal));return d}c(b,a);Object.defineProperty(b.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0});b.prototype.dispose=function(){a.prototype.dispose.call(this);this._terminal=null};b.prototype.parse=function(a){if(this._terminal){var b=this._terminal.buffer,c=b.x,d=b.y;this._terminal.debug&&this._terminal.log("data: "+a);this._parseBuffer.length<a.length&&(this._parseBuffer=new Uint32Array(a.length));this._parser.parse(this._parseBuffer,this._stringDecoder.decode(a,
this._parseBuffer));b=this._terminal.buffer;b.x===c&&b.y===d||this._onCursorMove.fire()}};b.prototype.parseUtf8=function(a){if(this._terminal){var b=this._terminal.buffer,c=b.x,d=b.y;this._terminal.debug&&this._terminal.log("data: "+a);this._parseBuffer.length<a.length&&(this._parseBuffer=new Uint32Array(a.length));this._parser.parse(this._parseBuffer,this._utf8Decoder.decode(a,this._parseBuffer));b=this._terminal.buffer;b.x===c&&b.y===d||this._terminal.emit("cursormove")}};b.prototype.print=function(a,
b,c){var d=this._terminal.buffer,e=this._terminal.charset,f=this._terminal.options.screenReaderMode,g=this._terminal.cols,h=this._terminal.wraparoundMode,k=this._terminal.insertMode,n=this._terminal.curAttrData,t=d.lines.get(d.y+d.ybase);this._terminal.updateRange(d.y);for(var v=b;v<c;++v){b=a[v];var x=Ue.wcwidth(b);if(127>b&&e){var A=e[String.fromCharCode(b)];A&&(b=A.charCodeAt(0))}f&&this._terminal.emit("a11y.char",Aa.stringFromCodePoint(b));if(!x&&d.x)t.getWidth(d.x-1)?t.addCodepointToCell(d.x-
1,b):t.addCodepointToCell(d.x-2,b);else{if(d.x+x-1>=g)if(h)d.x=0,d.y++,d.y>d.scrollBottom?(d.y--,this._terminal.scroll(!0)):d.lines.get(d.y).isWrapped=!0,t=d.lines.get(d.y+d.ybase);else if(2===x)continue;k&&(t.insertCells(d.x,x,d.getNullCell(n)),2===t.getWidth(g-1)&&t.setCellFromCodePoint(g-1,D.NULL_CELL_CODE,D.NULL_CELL_WIDTH,n.fg,n.bg));t.setCellFromCodePoint(d.x++,b,x,n.fg,n.bg);if(0<x)for(;--x;)t.setCellFromCodePoint(d.x++,0,0,n.fg,n.bg)}}this._terminal.updateRange(d.y)};b.prototype.addCsiHandler=
function(a,b){return this._parser.addCsiHandler(a,b)};b.prototype.addOscHandler=function(a,b){return this._parser.addOscHandler(a,b)};b.prototype.bell=function(){this._terminal.bell()};b.prototype.lineFeed=function(){var a=this._terminal.buffer;this._terminal.options.convertEol&&(a.x=0);a.y++;a.y>a.scrollBottom&&(a.y--,this._terminal.scroll());a.x>=this._terminal.cols&&a.x--;this._onLineFeed.fire()};b.prototype.carriageReturn=function(){this._terminal.buffer.x=0};b.prototype.backspace=function(){0<
this._terminal.buffer.x&&this._terminal.buffer.x--};b.prototype.tab=function(){var a=this._terminal.buffer.x;this._terminal.buffer.x=this._terminal.buffer.nextStop();this._terminal.options.screenReaderMode&&this._terminal.emit("a11y.tab",this._terminal.buffer.x-a)};b.prototype.shiftOut=function(){this._terminal.setgLevel(1)};b.prototype.shiftIn=function(){this._terminal.setgLevel(0)};b.prototype.insertChars=function(a){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).insertCells(this._terminal.buffer.x,
a[0]||1,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));this._terminal.updateRange(this._terminal.buffer.y)};b.prototype.cursorUp=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y-=a;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0)};b.prototype.cursorDown=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};
b.prototype.cursorForward=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x+=a;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};b.prototype.cursorBackward=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--;this._terminal.buffer.x-=a;0>this._terminal.buffer.x&&(this._terminal.buffer.x=0)};b.prototype.cursorNextLine=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&
(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x=0};b.prototype.cursorPrecedingLine=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y-=a;0>this._terminal.buffer.y&&(this._terminal.buffer.y=0);this._terminal.buffer.x=0};b.prototype.cursorCharAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x=a-1};b.prototype.cursorPosition=function(a){var b=a[0]-1;a=2<=a.length?a[1]-1:0;0>b?b=0:b>=this._terminal.rows&&(b=this._terminal.rows-1);0>a?a=0:a>=this._terminal.cols&&
(a=this._terminal.cols-1);this._terminal.buffer.x=a;this._terminal.buffer.y=b};b.prototype.cursorForwardTab=function(a){for(a=a[0]||1;a--;)this._terminal.buffer.x=this._terminal.buffer.nextStop()};b.prototype._eraseInBufferLine=function(a,b,c,d){void 0===d&&(d=!1);a=this._terminal.buffer.lines.get(this._terminal.buffer.ybase+a);a.replaceCells(b,c,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));d&&(a.isWrapped=!1)};b.prototype._resetBufferLine=function(a){this._eraseInBufferLine(a,
0,this._terminal.cols,!0)};b.prototype.eraseInDisplay=function(a){switch(a[0]){case 0:a=this._terminal.buffer.y;this._terminal.updateRange(a);for(this._eraseInBufferLine(a++,this._terminal.buffer.x,this._terminal.cols,0===this._terminal.buffer.x);a<this._terminal.rows;a++)this._resetBufferLine(a);this._terminal.updateRange(a);break;case 1:a=this._terminal.buffer.y;this._terminal.updateRange(a);this._eraseInBufferLine(a,0,this._terminal.buffer.x+1,!0);this._terminal.buffer.x+1>=this._terminal.cols&&
(this._terminal.buffer.lines.get(a+1).isWrapped=!1);for(;a--;)this._resetBufferLine(a);this._terminal.updateRange(0);break;case 2:a=this._terminal.rows;for(this._terminal.updateRange(a-1);a--;)this._resetBufferLine(a);this._terminal.updateRange(0);break;case 3:a=this._terminal.buffer.lines.length-this._terminal.rows,0<a&&(this._terminal.buffer.lines.trimStart(a),this._terminal.buffer.ybase=Math.max(this._terminal.buffer.ybase-a,0),this._terminal.buffer.ydisp=Math.max(this._terminal.buffer.ydisp-a,
0),this._onScroll.fire(0))}};b.prototype.eraseInLine=function(a){switch(a[0]){case 0:this._eraseInBufferLine(this._terminal.buffer.y,this._terminal.buffer.x,this._terminal.cols);break;case 1:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.buffer.x+1);break;case 2:this._eraseInBufferLine(this._terminal.buffer.y,0,this._terminal.cols)}this._terminal.updateRange(this._terminal.buffer.y)};b.prototype.insertLines=function(a){a=a[0];1>a&&(a=1);for(var b=this._terminal.buffer,c=b.y+b.ybase,
d=this._terminal.rows-1+b.ybase-(this._terminal.rows-1-b.scrollBottom)+1;a--;)b.lines.splice(d-1,1),b.lines.splice(c,0,b.getBlankLine(this._terminal.eraseAttrData()));this._terminal.updateRange(b.y);this._terminal.updateRange(b.scrollBottom)};b.prototype.deleteLines=function(a){a=a[0];1>a&&(a=1);var b=this._terminal.buffer,c=b.y+b.ybase;var d=this._terminal.rows-1-b.scrollBottom;for(d=this._terminal.rows-1+b.ybase-d;a--;)b.lines.splice(c,1),b.lines.splice(d,0,b.getBlankLine(this._terminal.eraseAttrData()));
this._terminal.updateRange(b.y);this._terminal.updateRange(b.scrollBottom)};b.prototype.deleteChars=function(a){this._terminal.buffer.lines.get(this._terminal.buffer.y+this._terminal.buffer.ybase).deleteCells(this._terminal.buffer.x,a[0]||1,this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()));this._terminal.updateRange(this._terminal.buffer.y)};b.prototype.scrollUp=function(a){a=a[0]||1;for(var b=this._terminal.buffer;a--;)b.lines.splice(b.ybase+b.scrollTop,1),b.lines.splice(b.ybase+
b.scrollBottom,0,b.getBlankLine(D.DEFAULT_ATTR_DATA));this._terminal.updateRange(b.scrollTop);this._terminal.updateRange(b.scrollBottom)};b.prototype.scrollDown=function(a,b){if(2>a.length&&!b){a=a[0]||1;for(b=this._terminal.buffer;a--;)b.lines.splice(b.ybase+b.scrollBottom,1),b.lines.splice(b.ybase+b.scrollTop,0,b.getBlankLine(D.DEFAULT_ATTR_DATA));this._terminal.updateRange(b.scrollTop);this._terminal.updateRange(b.scrollBottom)}};b.prototype.eraseChars=function(a){this._terminal.buffer.lines.get(this._terminal.buffer.y+
this._terminal.buffer.ybase).replaceCells(this._terminal.buffer.x,this._terminal.buffer.x+(a[0]||1),this._terminal.buffer.getNullCell(this._terminal.eraseAttrData()))};b.prototype.cursorBackwardTab=function(a){a=a[0]||1;for(var b=this._terminal.buffer;a--;)b.x=b.prevStop()};b.prototype.charPosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.x=a-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};b.prototype.hPositionRelative=function(a){a=a[0];
1>a&&(a=1);this._terminal.buffer.x+=a;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};b.prototype.repeatPrecedingCharacter=function(a){var b=this._terminal.buffer,c=b.lines.get(b.ybase+b.y);c.loadCell(b.x-1,this._workCell);c.replaceCells(b.x,b.x+(a[0]||1),void 0!==this._workCell.content?this._workCell:b.getNullCell(D.DEFAULT_ATTR_DATA))};b.prototype.sendDeviceAttributes=function(a,b){0<a[0]||(b?">"===b&&(this._terminal.is("xterm")?this._terminal.handler(v.C0.ESC+
"[>0;276;0c"):this._terminal.is("rxvt-unicode")?this._terminal.handler(v.C0.ESC+"[>85;95;0c"):this._terminal.is("linux")?this._terminal.handler(a[0]+"c"):this._terminal.is("screen")&&this._terminal.handler(v.C0.ESC+"[>83;40003;0c")):this._terminal.is("xterm")||this._terminal.is("rxvt-unicode")||this._terminal.is("screen")?this._terminal.handler(v.C0.ESC+"[?1;2c"):this._terminal.is("linux")&&this._terminal.handler(v.C0.ESC+"[?6c"))};b.prototype.linePosAbsolute=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y=
a-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1)};b.prototype.vPositionRelative=function(a){a=a[0];1>a&&(a=1);this._terminal.buffer.y+=a;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=this._terminal.rows-1);this._terminal.buffer.x>=this._terminal.cols&&this._terminal.buffer.x--};b.prototype.hVPosition=function(a){1>a[0]&&(a[0]=1);1>a[1]&&(a[1]=1);this._terminal.buffer.y=a[0]-1;this._terminal.buffer.y>=this._terminal.rows&&(this._terminal.buffer.y=
this._terminal.rows-1);this._terminal.buffer.x=a[1]-1;this._terminal.buffer.x>=this._terminal.cols&&(this._terminal.buffer.x=this._terminal.cols-1)};b.prototype.tabClear=function(a){a=a[0];0>=a?delete this._terminal.buffer.tabs[this._terminal.buffer.x]:3===a&&(this._terminal.buffer.tabs={})};b.prototype.setMode=function(a,b){if(1<a.length)for(b=0;b<a.length;b++)this.setMode([a[b]]);else if(!b)switch(a[0]){case 4:this._terminal.insertMode=!0}else if("?"===b)switch(a[0]){case 1:this._terminal.applicationCursor=
!0;break;case 2:this._terminal.setgCharset(0,qb.DEFAULT_CHARSET);this._terminal.setgCharset(1,qb.DEFAULT_CHARSET);this._terminal.setgCharset(2,qb.DEFAULT_CHARSET);this._terminal.setgCharset(3,qb.DEFAULT_CHARSET);break;case 3:this._terminal.savedCols=this._terminal.cols;this._terminal.resize(132,this._terminal.rows);break;case 6:this._terminal.originMode=!0;break;case 7:this._terminal.wraparoundMode=!0;break;case 66:this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=
!0;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=9===a[0];this._terminal.vt200Mouse=1E3===a[0];this._terminal.normalMouse=1E3<a[0];this._terminal.mouseEvents=!0;this._terminal.element&&this._terminal.element.classList.add("enable-mouse-events");this._terminal.selectionManager&&this._terminal.selectionManager.disable();this._terminal.log("Binding to mouse events.");break;case 1004:this._terminal.sendFocus=!0;break;
case 1005:this._terminal.utfMouse=!0;break;case 1006:this._terminal.sgrMouse=!0;break;case 1015:this._terminal.urxvtMouse=!0;break;case 25:this._terminal.cursorHidden=!1;break;case 1048:this.saveCursor(a);break;case 1049:this.saveCursor(a);case 47:case 1047:this._terminal.buffers.activateAltBuffer(this._terminal.eraseAttrData());this._terminal.refresh(0,this._terminal.rows-1);this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=
!0}};b.prototype.resetMode=function(a,b){if(1<a.length)for(b=0;b<a.length;b++)this.resetMode([a[b]]);else if(!b)switch(a[0]){case 4:this._terminal.insertMode=!1}else if("?"===b)switch(a[0]){case 1:this._terminal.applicationCursor=!1;break;case 3:132===this._terminal.cols&&this._terminal.savedCols&&this._terminal.resize(this._terminal.savedCols,this._terminal.rows);delete this._terminal.savedCols;break;case 6:this._terminal.originMode=!1;break;case 7:this._terminal.wraparoundMode=!1;break;case 66:this._terminal.log("Switching back to normal keypad.");
this._terminal.applicationKeypad=!1;this._terminal.viewport&&this._terminal.viewport.syncScrollArea();break;case 9:case 1E3:case 1002:case 1003:this._terminal.x10Mouse=!1;this._terminal.vt200Mouse=!1;this._terminal.normalMouse=!1;this._terminal.mouseEvents=!1;this._terminal.element&&this._terminal.element.classList.remove("enable-mouse-events");this._terminal.selectionManager&&this._terminal.selectionManager.enable();break;case 1004:this._terminal.sendFocus=!1;break;case 1005:this._terminal.utfMouse=
!1;break;case 1006:this._terminal.sgrMouse=!1;break;case 1015:this._terminal.urxvtMouse=!1;break;case 25:this._terminal.cursorHidden=!0;break;case 1048:this.restoreCursor(a);break;case 1049:case 47:case 1047:this._terminal.buffers.activateNormalBuffer();1049===a[0]&&this.restoreCursor(a);this._terminal.refresh(0,this._terminal.rows-1);this._terminal.viewport&&this._terminal.viewport.syncScrollArea();this._terminal.showCursor();break;case 2004:this._terminal.bracketedPasteMode=!1}};b.prototype.charAttributes=
function(a){if(1===a.length&&0===a[0])this._terminal.curAttrData.fg=D.DEFAULT_ATTR_DATA.fg,this._terminal.curAttrData.bg=D.DEFAULT_ATTR_DATA.bg;else for(var b=a.length,c,d=this._terminal.curAttrData,e=0;e<b;e++)c=a[e],30<=c&&37>=c?(d.fg&=-50331904,d.fg=d.fg|16777216|c-30):40<=c&&47>=c?(d.bg&=-50331904,d.bg=d.bg|16777216|c-40):90<=c&&97>=c?(d.fg&=-50331904,d.fg=d.fg|c-90|16777224):100<=c&&107>=c?(d.bg&=-50331904,d.bg=d.bg|c-100|16777224):0===c?(d.fg=D.DEFAULT_ATTR_DATA.fg,d.bg=D.DEFAULT_ATTR_DATA.bg):
1===c?d.fg|=134217728:3===c?d.bg|=67108864:4===c?d.fg|=268435456:5===c?d.fg|=536870912:7===c?d.fg|=67108864:8===c?d.fg|=1073741824:2===c?d.bg|=134217728:22===c?(d.fg&=-134217729,d.bg&=-134217729):23===c?d.bg&=-67108865:24===c?d.fg&=-268435457:25===c?d.fg&=-536870913:27===c?d.fg&=-67108865:28===c?d.fg&=-1073741825:39===c?(d.fg&=-67108864,d.fg|=D.DEFAULT_ATTR_DATA.fg&16777215):49===c?(d.bg&=-67108864,d.bg|=D.DEFAULT_ATTR_DATA.bg&16777215):38===c?2===a[e+1]?(e+=2,d.fg|=50331648,d.fg&=-16777216,d.fg|=
D.AttributeData.fromColorRGB([a[e],a[e+1],a[e+2]]),e+=2):5===a[e+1]&&(e+=2,c=a[e]&255,d.fg&=-50331904,d.fg=d.fg|33554432|c):48===c?2===a[e+1]?(e+=2,d.bg|=50331648,d.bg&=-16777216,d.bg|=D.AttributeData.fromColorRGB([a[e],a[e+1],a[e+2]]),e+=2):5===a[e+1]&&(e+=2,c=a[e]&255,d.bg&=-50331904,d.bg=d.bg|33554432|c):100===c?(d.fg&=-67108864,d.fg|=D.DEFAULT_ATTR_DATA.fg&16777215,d.bg&=-67108864,d.bg|=D.DEFAULT_ATTR_DATA.bg&16777215):this._terminal.error("Unknown SGR attribute: %d.",c)};b.prototype.deviceStatus=
function(a,b){if(!b)switch(a[0]){case 5:this._onData.fire(v.C0.ESC+"[0n");break;case 6:a=this._terminal.buffer.y+1,b=this._terminal.buffer.x+1,this._onData.fire(v.C0.ESC+"["+a+";"+b+"R")}else if("?"===b)switch(a[0]){case 6:a=this._terminal.buffer.y+1,b=this._terminal.buffer.x+1,this._onData.fire(v.C0.ESC+"[?"+a+";"+b+"R")}};b.prototype.softReset=function(a,b){"!"===b&&(this._terminal.cursorHidden=!1,this._terminal.insertMode=!1,this._terminal.originMode=!1,this._terminal.wraparoundMode=!0,this._terminal.applicationKeypad=
!1,this._terminal.viewport&&this._terminal.viewport.syncScrollArea(),this._terminal.applicationCursor=!1,this._terminal.buffer.scrollTop=0,this._terminal.buffer.scrollBottom=this._terminal.rows-1,this._terminal.curAttrData=D.DEFAULT_ATTR_DATA.clone(),this._terminal.buffer.x=this._terminal.buffer.y=0,this._terminal.charset=null,this._terminal.glevel=0,this._terminal.charsets=[null])};b.prototype.setCursorStyle=function(a,b){if(" "===b){a=1>a[0]?1:a[0];switch(a){case 1:case 2:this._terminal.setOption("cursorStyle",
"block");break;case 3:case 4:this._terminal.setOption("cursorStyle","underline");break;case 5:case 6:this._terminal.setOption("cursorStyle","bar")}this._terminal.setOption("cursorBlink",1===a%2)}};b.prototype.setScrollRegion=function(a,b){b||(this._terminal.buffer.scrollTop=(a[0]||1)-1,this._terminal.buffer.scrollBottom=(a[1]&&a[1]<=this._terminal.rows?a[1]:this._terminal.rows)-1,this._terminal.buffer.x=0,this._terminal.buffer.y=0)};b.prototype.saveCursor=function(a){this._terminal.buffer.savedX=
this._terminal.buffer.x;this._terminal.buffer.savedY=this._terminal.buffer.y;this._terminal.buffer.savedCurAttrData.fg=this._terminal.curAttrData.fg;this._terminal.buffer.savedCurAttrData.bg=this._terminal.curAttrData.bg};b.prototype.restoreCursor=function(a){this._terminal.buffer.x=this._terminal.buffer.savedX||0;this._terminal.buffer.y=this._terminal.buffer.savedY||0;this._terminal.curAttrData.fg=this._terminal.buffer.savedCurAttrData.fg;this._terminal.curAttrData.bg=this._terminal.buffer.savedCurAttrData.bg};
b.prototype.setTitle=function(a){this._terminal.handleTitle(a)};b.prototype.nextLine=function(){this._terminal.buffer.x=0;this.index()};b.prototype.keypadApplicationMode=function(){this._terminal.log("Serial port requested application keypad.");this._terminal.applicationKeypad=!0;this._terminal.viewport&&this._terminal.viewport.syncScrollArea()};b.prototype.keypadNumericMode=function(){this._terminal.log("Switching back to normal keypad.");this._terminal.applicationKeypad=!1;this._terminal.viewport&&
this._terminal.viewport.syncScrollArea()};b.prototype.selectDefaultCharset=function(){this._terminal.setgLevel(0);this._terminal.setgCharset(0,qb.DEFAULT_CHARSET)};b.prototype.selectCharset=function(a){2!==a.length?this.selectDefaultCharset():"/"!==a[0]&&this._terminal.setgCharset(d[a[0]],qb.CHARSETS[a[1]]||qb.DEFAULT_CHARSET)};b.prototype.index=function(){this._terminal.index()};b.prototype.tabSet=function(){this._terminal.tabSet()};b.prototype.reverseIndex=function(){this._terminal.reverseIndex()};
b.prototype.reset=function(){this._parser.reset();this._terminal.reset()};b.prototype.setgLevel=function(a){this._terminal.setgLevel(a)};return b}(Pa.Disposable);b.InputHandler=a});E(Bi);var Ci=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this.cache=[]}a.prototype.resize=function(a,b){for(var c=0;c<a;c++){this.cache.length<=c&&this.cache.push([]);for(var d=this.cache[c].length;d<b;d++)this.cache[c].push(null);this.cache[c].length=b}this.cache.length=a};
a.prototype.clear=function(){for(var a=0;a<this.cache.length;a++)for(var b=0;b<this.cache[a].length;b++)this.cache[a][b]=null};return a}();b.GridCache=a});E(Ci);var ja=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.INVERTED_DEFAULT_COLOR=257;b.DIM_OPACITY=.5;b.CHAR_ATLAS_CELL_SPACING=1});E(ja);var Bb=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.generateConfig=function(a,b,e,f){f={foreground:f.foreground,background:f.background,cursor:null,cursorAccent:null,
selection:null,ansi:f.ansi.slice(0,16)};return{type:e.options.experimentalCharAtlas,devicePixelRatio:window.devicePixelRatio,scaledCharWidth:a,scaledCharHeight:b,fontFamily:e.options.fontFamily,fontSize:e.options.fontSize,fontWeight:e.options.fontWeight,fontWeightBold:e.options.fontWeightBold,allowTransparency:e.options.allowTransparency,colors:f}};b.configEquals=function(a,b){for(var c=0;c<a.colors.ansi.length;c++)if(a.colors.ansi[c].rgba!==b.colors.ansi[c].rgba)return!1;return a.type===b.type&&
a.devicePixelRatio===b.devicePixelRatio&&a.fontFamily===b.fontFamily&&a.fontSize===b.fontSize&&a.fontWeight===b.fontWeight&&a.fontWeightBold===b.fontWeightBold&&a.allowTransparency===b.allowTransparency&&a.scaledCharWidth===b.scaledCharWidth&&a.scaledCharHeight===b.scaledCharHeight&&a.colors.foreground===b.colors.foreground&&a.colors.background===b.colors.background};b.is256Color=function(a){return a<Mb.DEFAULT_COLOR}});E(Bb);var Ed=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});
a=function(){function a(){this._didWarmUp=!1}a.prototype.dispose=function(){};a.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)};a.prototype._doWarmUp=function(){};a.prototype.beginFrame=function(){};return a}();b.default=a});E(Ed);var Ve=C(function(a,b){function c(a){return{css:a,rgba:parseInt(a.slice(1),16)<<8|255}}function d(a){a=a.toString(16);return 2>a.length?"0"+a:a}Object.defineProperty(b,"__esModule",{value:!0});var e=c("#ffffff"),f=c("#000000"),g=c("#ffffff"),
h=c("#000000"),k={css:"rgba(255, 255, 255, 0.3)",rgba:4294967159};b.DEFAULT_ANSI_COLORS=function(){for(var a=[c("#2e3436"),c("#cc0000"),c("#4e9a06"),c("#c4a000"),c("#3465a4"),c("#75507b"),c("#06989a"),c("#d3d7cf"),c("#555753"),c("#ef2929"),c("#8ae234"),c("#fce94f"),c("#729fcf"),c("#ad7fa8"),c("#34e2e2"),c("#eeeeec")],b=[0,95,135,175,215,255],e=0;216>e;e++){var f=b[e/36%6|0],g=b[e/6%6|0],h=b[e%6];a.push({css:"#"+d(f)+d(g)+d(h),rgba:(f<<24|g<<16|h<<8|255)>>>0})}for(e=0;24>e;e++)b=8+10*e,f=d(b),a.push({css:"#"+
f+f+f,rgba:(b<<24|b<<16|b<<8|255)>>>0});return a}();a=function(){function a(a,c){this.allowTransparency=c;a=a.createElement("canvas");a.width=1;a.height=1;a=a.getContext("2d");if(!a)throw Error("Could not get rendering context");this._ctx=a;this._ctx.globalCompositeOperation="copy";this._litmusColor=this._ctx.createLinearGradient(0,0,1,1);this.colors={foreground:e,background:f,cursor:g,cursorAccent:h,selection:k,ansi:b.DEFAULT_ANSI_COLORS.slice()}}a.prototype.setTheme=function(a){void 0===a&&(a={});
this.colors.foreground=this._parseColor(a.foreground,e);this.colors.background=this._parseColor(a.background,f);this.colors.cursor=this._parseColor(a.cursor,g,!0);this.colors.cursorAccent=this._parseColor(a.cursorAccent,h,!0);this.colors.selection=this._parseColor(a.selection,k,!0);this.colors.ansi[0]=this._parseColor(a.black,b.DEFAULT_ANSI_COLORS[0]);this.colors.ansi[1]=this._parseColor(a.red,b.DEFAULT_ANSI_COLORS[1]);this.colors.ansi[2]=this._parseColor(a.green,b.DEFAULT_ANSI_COLORS[2]);this.colors.ansi[3]=
this._parseColor(a.yellow,b.DEFAULT_ANSI_COLORS[3]);this.colors.ansi[4]=this._parseColor(a.blue,b.DEFAULT_ANSI_COLORS[4]);this.colors.ansi[5]=this._parseColor(a.magenta,b.DEFAULT_ANSI_COLORS[5]);this.colors.ansi[6]=this._parseColor(a.cyan,b.DEFAULT_ANSI_COLORS[6]);this.colors.ansi[7]=this._parseColor(a.white,b.DEFAULT_ANSI_COLORS[7]);this.colors.ansi[8]=this._parseColor(a.brightBlack,b.DEFAULT_ANSI_COLORS[8]);this.colors.ansi[9]=this._parseColor(a.brightRed,b.DEFAULT_ANSI_COLORS[9]);this.colors.ansi[10]=
this._parseColor(a.brightGreen,b.DEFAULT_ANSI_COLORS[10]);this.colors.ansi[11]=this._parseColor(a.brightYellow,b.DEFAULT_ANSI_COLORS[11]);this.colors.ansi[12]=this._parseColor(a.brightBlue,b.DEFAULT_ANSI_COLORS[12]);this.colors.ansi[13]=this._parseColor(a.brightMagenta,b.DEFAULT_ANSI_COLORS[13]);this.colors.ansi[14]=this._parseColor(a.brightCyan,b.DEFAULT_ANSI_COLORS[14]);this.colors.ansi[15]=this._parseColor(a.brightWhite,b.DEFAULT_ANSI_COLORS[15])};a.prototype._parseColor=function(a,b,c){void 0===
c&&(c=this.allowTransparency);if(void 0===a)return b;this._ctx.fillStyle=this._litmusColor;this._ctx.fillStyle=a;if("string"!==typeof this._ctx.fillStyle)return console.warn("Color: "+a+" is invalid using fallback "+b.css),b;this._ctx.fillRect(0,0,1,1);var d=this._ctx.getImageData(0,0,1,1).data;return c||255===d[3]?{css:a,rgba:(d[0]<<24|d[1]<<16|d[2]<<8|d[3])>>>0}:(console.warn("Color: "+a+" is using transparency, but allowTransparency is false. "+("Using fallback "+b.css+".")),b)};return a}();b.ColorManager=
a});E(Ve);var ma=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=(a="undefined"===typeof navigator?!0:!1)?"node":navigator.userAgent;a=a?"node":navigator.platform;b.isFirefox=!!~c.indexOf("Firefox");b.isSafari=/^((?!chrome|android).)*safari/i.test(c);b.isMSIE=!!~c.indexOf("MSIE")||!!~c.indexOf("Trident");c=0<=["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a);b.isMac=c;b.isIpad="iPad"===a;b.isIphone="iPhone"===a;c=0<=["Windows","Win16","Win32","WinCE"].indexOf(a);b.isMSWindows=
c;b.isLinux=0<=a.indexOf("Linux")});E(ma);var We=C(function(a,b){function c(a,b){var c=!0,d=b.rgba>>>24,e=b.rgba>>>16&255;b=b.rgba>>>8&255;for(var f=0;f<a.data.length;f+=4)a.data[f]===d&&a.data[f+1]===e&&a.data[f+2]===b?a.data[f+3]=0:c=!1;return c}function d(a,b){return a+" "+b.fontSize*b.devicePixelRatio+"px "+b.fontFamily}Object.defineProperty(b,"__esModule",{value:!0});b.generateStaticCharAtlasTexture=function(a,b,g){var e=g.scaledCharWidth+ja.CHAR_ATLAS_CELL_SPACING,f=g.scaledCharHeight+ja.CHAR_ATLAS_CELL_SPACING;
b=b(255*e,34*f);var n=b.getContext("2d",{alpha:g.allowTransparency});n.fillStyle=g.colors.background.css;n.fillRect(0,0,b.width,b.height);n.save();n.fillStyle=g.colors.foreground.css;n.font=d(g.fontWeight,g);n.textBaseline="middle";for(var p=0;256>p;p++)n.save(),n.beginPath(),n.rect(p*e,0,e,f),n.clip(),n.fillText(String.fromCharCode(p),p*e,f/2),n.restore();n.save();n.font=d(g.fontWeightBold,g);for(p=0;256>p;p++)n.save(),n.beginPath(),n.rect(p*e,f,e,f),n.clip(),n.fillText(String.fromCharCode(p),p*
e,1.5*f),n.restore();n.restore();n.font=d(g.fontWeight,g);for(var q=0;16>q;q++){var y=(q+2)*f;for(p=0;256>p;p++)n.save(),n.beginPath(),n.rect(p*e,y,e,f),n.clip(),n.fillStyle=g.colors.ansi[q].css,n.fillText(String.fromCharCode(p),p*e,y+f/2),n.restore()}n.font=d(g.fontWeightBold,g);for(q=0;16>q;q++)for(y=(q+2+16)*f,p=0;256>p;p++)n.save(),n.beginPath(),n.rect(p*e,y,e,f),n.clip(),n.fillStyle=g.colors.ansi[q].css,n.fillText(String.fromCharCode(p),p*e,y+f/2),n.restore();n.restore();if(!("createImageBitmap"in
a)||ma.isFirefox||ma.isSafari)return b;e=n.getImageData(0,0,b.width,b.height);c(e,g.colors.background);return a.createImageBitmap(e)};b.clearColor=c});E(We);var Di=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a){this.capacity=a;this._map={};this._tail=this._head=null;this._nodePool=[];this.size=0}a.prototype._unlinkNode=function(a){var b=a.prev,c=a.next;a===this._head&&(this._head=c);a===this._tail&&(this._tail=b);null!==b&&(b.next=c);null!==c&&(c.prev=
b)};a.prototype._appendNode=function(a){var b=this._tail;null!==b&&(b.next=a);a.prev=b;a.next=null;this._tail=a;null===this._head&&(this._head=a)};a.prototype.prealloc=function(a){for(var b=this._nodePool,c=0;c<a;c++)b.push({prev:null,next:null,key:null,value:null})};a.prototype.get=function(a){a=this._map[a];return void 0!==a?(this._unlinkNode(a),this._appendNode(a),a.value):null};a.prototype.peekValue=function(a){a=this._map[a];return void 0!==a?a.value:null};a.prototype.peek=function(){var a=this._head;
return null===a?null:a.value};a.prototype.set=function(a,b){var c=this._map[a];void 0!==c?(c=this._map[a],this._unlinkNode(c),c.value=b):this.size>=this.capacity?(c=this._head,this._unlinkNode(c),delete this._map[c.key],c.key=a,c.value=b,this._map[a]=c):(c=this._nodePool,0<c.length?(c=c.pop(),c.key=a,c.value=b):c={prev:null,next:null,key:a,value:b},this._map[a]=c,this.size++);this._appendNode(c)};return a}();b.default=a});E(Di);var Ei=C(function(a,b){function c(a){return a.code<<21|a.bg<<12|a.fg<<
3|(a.bold?0:4)+(a.dim?0:2)+(a.italic?0:1)}var d=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var e={css:"rgba(0, 0, 0, 0)",rgba:0};b.getGlyphCacheKey=c;
a=function(a){function b(b,c){var d=a.call(this)||this;d._config=c;d._drawToCacheCount=0;d._glyphsWaitingOnBitmap=[];d._bitmapCommitTimeout=null;d._bitmap=null;d._cacheCanvas=b.createElement("canvas");d._cacheCanvas.width=1024;d._cacheCanvas.height=1024;d._cacheCtx=d._cacheCanvas.getContext("2d",{alpha:!0});b=b.createElement("canvas");b.width=d._config.scaledCharWidth;b.height=d._config.scaledCharHeight;d._tmpCtx=b.getContext("2d",{alpha:d._config.allowTransparency});d._width=Math.floor(1024/d._config.scaledCharWidth);
d._height=Math.floor(1024/d._config.scaledCharHeight);b=d._width*d._height;d._cacheMap=new Di.default(b);d._cacheMap.prealloc(b);return d}d(b,a);b.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)};b.prototype.beginFrame=function(){this._drawToCacheCount=0};b.prototype.draw=function(a,b,d,e){if(32===b.code)return!0;if(!this._canCache(b))return!1;var f=c(b),g=this._cacheMap.get(f);return null!==g&&void 0!==
g?(this._drawFromCache(a,g,d,e),!0):100>this._drawToCacheCount?(g=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index,b=this._drawToCache(b,g),this._cacheMap.set(f,b),this._drawFromCache(a,b,d,e),!0):!1};b.prototype._canCache=function(a){return 256>a.code};b.prototype._toCoordinateX=function(a){return a%this._width*this._config.scaledCharWidth};b.prototype._toCoordinateY=function(a){return Math.floor(a/this._width)*this._config.scaledCharHeight};b.prototype._drawFromCache=
function(a,b,c,d){if(!b.isEmpty){var e=this._toCoordinateX(b.index),f=this._toCoordinateY(b.index);a.drawImage(b.inBitmap?this._bitmap:this._cacheCanvas,e,f,this._config.scaledCharWidth,this._config.scaledCharHeight,c,d,this._config.scaledCharWidth,this._config.scaledCharHeight)}};b.prototype._getColorFromAnsiIndex=function(a){return a<this._config.colors.ansi.length?this._config.colors.ansi[a]:Ve.DEFAULT_ANSI_COLORS[a]};b.prototype._getBackgroundColor=function(a){return this._config.allowTransparency?
e:a.bg===ja.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:256>a.bg?this._getColorFromAnsiIndex(a.bg):this._config.colors.background};b.prototype._getForegroundColor=function(a){return a.fg===ja.INVERTED_DEFAULT_COLOR?this._config.colors.background:256>a.fg?this._getColorFromAnsiIndex(a.fg):this._config.colors.foreground};b.prototype._drawToCache=function(a,b){this._drawToCacheCount++;this._tmpCtx.save();var c=this._getBackgroundColor(a);this._tmpCtx.globalCompositeOperation="copy";this._tmpCtx.fillStyle=
c.css;this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);this._tmpCtx.globalCompositeOperation="source-over";this._tmpCtx.font=(a.italic?"italic":"")+" "+(a.bold?this._config.fontWeightBold:this._config.fontWeight)+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily;this._tmpCtx.textBaseline="middle";this._tmpCtx.fillStyle=this._getForegroundColor(a).css;a.dim&&(this._tmpCtx.globalAlpha=ja.DIM_OPACITY);this._tmpCtx.fillText(a.chars,
0,this._config.scaledCharHeight/2);this._tmpCtx.restore();a=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight);var d=!1;this._config.allowTransparency||(d=We.clearColor(a,c));c=this._toCoordinateX(b);var e=this._toCoordinateY(b);this._cacheCtx.putImageData(a,c,e);b={index:b,isEmpty:d,inBitmap:!1};this._addGlyphToBitmap(b);return b};b.prototype._addGlyphToBitmap=function(a){var b=this;"createImageBitmap"in window&&!ma.isFirefox&&!ma.isSafari&&(this._glyphsWaitingOnBitmap.push(a),
null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout(function(){return b._generateBitmap()},100)))};b.prototype._generateBitmap=function(){var a=this,b=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[];window.createImageBitmap(this._cacheCanvas).then(function(c){a._bitmap=c;for(c=0;c<b.length;c++)b[c].inBitmap=!0});this._bitmapCommitTimeout=null};return b}(Ed.default);b.default=a});E(Ei);var Fi=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c){return a.call(this)||this}c(b,a);b.prototype.draw=function(a,b,c,d){return!1};return b}(Ed.default);b.default=a});E(Fi);var Gi=
C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c){var d=a.call(this)||this;d._document=b;d._config=c;d._canvasFactory=
function(a,b){var c=d._document.createElement("canvas");c.width=a;c.height=b;return c};return d}c(b,a);b.prototype._doWarmUp=function(){var a=this,b=We.generateStaticCharAtlasTexture(window,this._canvasFactory,this._config);b instanceof HTMLCanvasElement?this._texture=b:b.then(function(b){a._texture=b})};b.prototype._isCached=function(a,b){b=16>a.fg;var c=a.fg===Mb.DEFAULT_COLOR,d=a.bg===Mb.DEFAULT_COLOR;return 256>a.code&&(b||c)&&d&&!a.italic};b.prototype.draw=function(a,b,c,d){if(null===this._texture||
void 0===this._texture)return!1;var e=0;Bb.is256Color(b.fg)?e=2+b.fg+(b.bold?16:0):b.fg===Mb.DEFAULT_COLOR&&b.bold&&(e=1);if(!this._isCached(b,e))return!1;a.save();var f=this._config.scaledCharWidth+ja.CHAR_ATLAS_CELL_SPACING,g=this._config.scaledCharHeight+ja.CHAR_ATLAS_CELL_SPACING;b.dim&&(a.globalAlpha=ja.DIM_OPACITY);a.drawImage(this._texture,b.code*f,e*g,f,this._config.scaledCharHeight,c,d,f,this._config.scaledCharHeight);a.restore();return!0};return b}(Ed.default);b.default=a});E(Gi);var Xe=
C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c={none:Fi.default,"static":Gi.default,dynamic:Ei.default},d=[];b.acquireCharAtlas=function(a,b,g,h){b=Bb.generateConfig(g,h,a,b);for(g=0;g<d.length;g++){h=d[g];var e=h.ownedBy.indexOf(a);if(0<=e){if(Bb.configEquals(h.config,b))return h.atlas;1===h.ownedBy.length?(h.atlas.dispose(),d.splice(g,1)):h.ownedBy.splice(e,1);break}}for(g=0;g<d.length;g++)if(h=d[g],Bb.configEquals(h.config,b))return h.ownedBy.push(a),h.atlas;a={atlas:new c[a.options.experimentalCharAtlas](document,
b),config:b,ownedBy:[a]};d.push(a);return a.atlas};b.removeTerminalFromCache=function(a){for(var b=0;b<d.length;b++){var c=d[b].ownedBy.indexOf(a);if(-1!==c){1===d[b].ownedBy.length?(d[b].atlas.dispose(),d.splice(b,1)):d[b].ownedBy.splice(c,1);break}}}});E(Xe);var Kc=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a,b,c,g,h){this._container=a;this._alpha=g;this._colors=h;this._scaledCharTop=this._scaledCharLeft=this._scaledCellHeight=this._scaledCellWidth=
this._scaledCharHeight=this._scaledCharWidth=0;this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1};this._canvas=document.createElement("canvas");this._canvas.classList.add("xterm-"+b+"-layer");this._canvas.style.zIndex=c.toString();this._initCanvas();this._container.appendChild(this._canvas)}a.prototype.dispose=function(){this._container.removeChild(this._canvas);this._charAtlas&&this._charAtlas.dispose()};a.prototype._initCanvas=function(){this._ctx=this._canvas.getContext("2d",
{alpha:this._alpha});this._alpha||this.clearAll()};a.prototype.onOptionsChanged=function(a){};a.prototype.onBlur=function(a){};a.prototype.onFocus=function(a){};a.prototype.onCursorMove=function(a){};a.prototype.onGridChanged=function(a,b,c){};a.prototype.onSelectionChanged=function(a,b,c,g){};a.prototype.setColors=function(a,b){this._refreshCharAtlas(a,b)};a.prototype.setTransparency=function(a,b){if(b!==this._alpha){var c=this._canvas;this._alpha=b;this._canvas=this._canvas.cloneNode();this._initCanvas();
this._container.replaceChild(this._canvas,c);this._refreshCharAtlas(a,this._colors);this.onGridChanged(a,0,a.rows-1)}};a.prototype._refreshCharAtlas=function(a,b){0>=this._scaledCharWidth&&0>=this._scaledCharHeight||(this._charAtlas=Xe.acquireCharAtlas(a,b,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())};a.prototype.resize=function(a,b){this._scaledCellWidth=b.scaledCellWidth;this._scaledCellHeight=b.scaledCellHeight;this._scaledCharWidth=b.scaledCharWidth;this._scaledCharHeight=
b.scaledCharHeight;this._scaledCharLeft=b.scaledCharLeft;this._scaledCharTop=b.scaledCharTop;this._canvas.width=b.scaledCanvasWidth;this._canvas.height=b.scaledCanvasHeight;this._canvas.style.width=b.canvasWidth+"px";this._canvas.style.height=b.canvasHeight+"px";this._alpha||this.clearAll();this._refreshCharAtlas(a,this._colors)};a.prototype.fillCells=function(a,b,c,g){this._ctx.fillRect(a*this._scaledCellWidth,b*this._scaledCellHeight,c*this._scaledCellWidth,g*this._scaledCellHeight)};a.prototype.fillBottomLineAtCells=
function(a,b,c){void 0===c&&(c=1);this._ctx.fillRect(a*this._scaledCellWidth,(b+1)*this._scaledCellHeight-window.devicePixelRatio-1,c*this._scaledCellWidth,window.devicePixelRatio)};a.prototype.fillLeftLineAtCell=function(a,b){this._ctx.fillRect(a*this._scaledCellWidth,b*this._scaledCellHeight,window.devicePixelRatio,this._scaledCellHeight)};a.prototype.strokeRectAtCell=function(a,b,c,g){this._ctx.lineWidth=window.devicePixelRatio;this._ctx.strokeRect(a*this._scaledCellWidth+window.devicePixelRatio/
2,b*this._scaledCellHeight+window.devicePixelRatio/2,c*this._scaledCellWidth-window.devicePixelRatio,g*this._scaledCellHeight-window.devicePixelRatio)};a.prototype.clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))};a.prototype.clearCells=function(a,b,c,g){this._alpha?this._ctx.clearRect(a*this._scaledCellWidth,b*this._scaledCellHeight,c*this._scaledCellWidth,
g*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(a*this._scaledCellWidth,b*this._scaledCellHeight,c*this._scaledCellWidth,g*this._scaledCellHeight))};a.prototype.fillCharTrueColor=function(a,b,c,g){this._ctx.font=this._getFont(a,!1,!1);this._ctx.textBaseline="middle";this._clipRow(a,g);this._ctx.fillText(b.getChars(),c*this._scaledCellWidth+this._scaledCharLeft,g*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)};a.prototype.drawChars=
function(a,b,c,g){if(b.isFgRGB()||b.isBgRGB())this._drawUncachedChars(a,b,c,g);else{if(b.isInverse()){var d=b.isBgDefault()?ja.INVERTED_DEFAULT_COLOR:b.getBgColor();var e=b.isFgDefault()?ja.INVERTED_DEFAULT_COLOR:b.getFgColor()}else e=b.isBgDefault()?Mb.DEFAULT_COLOR:b.getBgColor(),d=b.isFgDefault()?Mb.DEFAULT_COLOR:b.getFgColor();var f=a.options.drawBoldTextInBrightColors&&b.isBold()&&8>d&&d!==ja.INVERTED_DEFAULT_COLOR;d+=f?8:0;this._currentGlyphIdentifier.chars=b.getChars()||D.WHITESPACE_CELL_CHAR;
this._currentGlyphIdentifier.code=b.getCode()||D.WHITESPACE_CELL_CODE;this._currentGlyphIdentifier.bg=e;this._currentGlyphIdentifier.fg=d;this._currentGlyphIdentifier.bold=b.isBold()&&a.options.enableBold;this._currentGlyphIdentifier.dim=!!b.isDim();this._currentGlyphIdentifier.italic=!!b.isItalic();this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,c*this._scaledCellWidth+this._scaledCharLeft,g*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(a,b,c,g)}};
a.prototype._drawUncachedChars=function(a,b,c,g){this._ctx.save();this._ctx.font=this._getFont(a,b.isBold()&&a.options.enableBold,!!b.isItalic());this._ctx.textBaseline="middle";if(b.isInverse())b.isBgDefault()?this._ctx.fillStyle=this._colors.background.css:b.isBgRGB()?this._ctx.fillStyle="rgb("+D.AttributeData.toColorRGB(b.getBgColor()).join(",")+")":this._ctx.fillStyle=this._colors.ansi[b.getBgColor()].css;else if(b.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(b.isFgRGB())this._ctx.fillStyle=
"rgb("+D.AttributeData.toColorRGB(b.getFgColor()).join(",")+")";else{var d=b.getFgColor();a.options.drawBoldTextInBrightColors&&b.isBold()&&8>d&&(d+=8);this._ctx.fillStyle=this._colors.ansi[d].css}this._clipRow(a,g);b.isDim()&&(this._ctx.globalAlpha=ja.DIM_OPACITY);this._ctx.fillText(b.getChars(),c*this._scaledCellWidth+this._scaledCharLeft,g*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2);this._ctx.restore()};a.prototype._clipRow=function(a,b){this._ctx.beginPath();this._ctx.rect(0,
b*this._scaledCellHeight,a.cols*this._scaledCellWidth,this._scaledCellHeight);this._ctx.clip()};a.prototype._getFont=function(a,b,c){return(c?"italic":"")+" "+(b?a.options.fontWeightBold:a.options.fontWeight)+" "+a.options.fontSize*window.devicePixelRatio+"px "+a.options.fontFamily};return a}();b.BaseRenderLayer=a});E(Kc);var Ye=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c,d){var e=a.call(this)||this;e.content=0;e.fg=b.fg;e.bg=b.bg;e.combinedData=c;e._width=d;return e}c(b,a);b.prototype.isCombined=function(){return 2097152};b.prototype.getWidth=function(){return this._width};b.prototype.getChars=function(){return this.combinedData};
b.prototype.getCode=function(){return 2097151};b.prototype.setFromCharData=function(a){throw Error("not implemented");};b.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]};return b}(D.AttributeData);b.JoinedCellData=a;a=function(){function a(a){this._terminal=a;this._characterJoiners=[];this._nextCharacterJoinerId=0;this._workCell=new D.CellData}a.prototype.registerCharacterJoiner=function(a){a={id:this._nextCharacterJoinerId++,handler:a};this._characterJoiners.push(a);
return a.id};a.prototype.deregisterCharacterJoiner=function(a){for(var b=0;b<this._characterJoiners.length;b++)if(this._characterJoiners[b].id===a)return this._characterJoiners.splice(b,1),!0;return!1};a.prototype.getJoinedCharacters=function(a){if(0===this._characterJoiners.length)return[];a=this._terminal.buffer.lines.get(a);if(0===a.length)return[];for(var b=[],c=a.translateToString(!0),d=0,e=0,n=0,p=a.getFg(0),q=a.getBg(0),y=0;y<a.getTrimmedLength();y++)if(a.loadCell(y,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==
p||this._workCell.bg!==q){if(1<y-d)for(d=this._getJoinedRanges(c,n,e,a,d),n=0;n<d.length;n++)b.push(d[n]);d=y;n=e;p=this._workCell.fg;q=this._workCell.bg}e+=this._workCell.getChars().length||D.WHITESPACE_CELL_CHAR.length}if(1<this._terminal.cols-d)for(d=this._getJoinedRanges(c,n,e,a,d),n=0;n<d.length;n++)b.push(d[n]);return b};a.prototype._getJoinedRanges=function(b,c,d,h,k){b=b.substring(c,d);c=this._characterJoiners[0].handler(b);for(d=1;d<this._characterJoiners.length;d++)for(var e=this._characterJoiners[d].handler(b),
f=0;f<e.length;f++)a._mergeRanges(c,e[f]);this._stringRangesToCellRanges(c,h,k);return c};a.prototype._stringRangesToCellRanges=function(a,b,c){var d=0,e=!1,f=0,g=a[d];if(g){for(;c<this._terminal.cols;c++){var q=b.getWidth(c),y=b.getString(c).length||D.WHITESPACE_CELL_CHAR.length;if(0!==q){!e&&g[0]<=f&&(g[0]=c,e=!0);if(g[1]<=f){g[1]=c;g=a[++d];if(!g)break;g[0]<=f?(g[0]=c,e=!0):e=!1}f+=y}}g&&(g[1]=this._terminal.cols)}};a._mergeRanges=function(a,b){for(var c=!1,d=0;d<a.length;d++){var e=a[d];if(c){if(b[1]<=
e[0])return a[d-1][1]=b[1],a;if(b[1]<=e[1])return a[d-1][1]=Math.max(b[1],e[1]),a.splice(d,1),a;a.splice(d,1);d--}else{if(b[1]<=e[0])return a.splice(d,0,b),a;if(b[1]<=e[1])return e[0]=Math.min(b[0],e[0]),a;b[0]<e[1]&&(e[0]=Math.min(b[0],e[0]),c=!0)}}c?a[a.length-1][1]=b[1]:a.push(b);return a};return a}();b.CharacterJoinerRegistry=a});E(Ye);var Hi=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c,d,e,n){b=a.call(this,b,"text",c,n,d)||this;b._characterOverlapCache={};b._workCell=new D.CellData;b._state=new Ci.GridCache;b._characterJoinerRegistry=e;return b}c(b,a);b.prototype.resize=function(b,c){a.prototype.resize.call(this,
b,c);var d=this._getFont(b,!1,!1);if(this._characterWidth!==c.scaledCharWidth||this._characterFont!==d)this._characterWidth=c.scaledCharWidth,this._characterFont=d,this._characterOverlapCache={};this._state.clear();this._state.resize(b.cols,b.rows)};b.prototype.reset=function(a){this._state.clear();this.clearAll()};b.prototype._forEachCell=function(a,b,c,d,e){for(;b<=c;b++){var f=b+a.buffer.ydisp,g=a.buffer.lines.get(f);f=d?d.getJoinedCharacters(f):[];for(var h=0;h<a.cols;h++){g.loadCell(h,this._workCell);
var k=this._workCell,n=!1,H=h;0!==k.getWidth()&&(0<f.length&&h===f[0][0]&&(n=!0,H=f.shift(),k=new Ye.JoinedCellData(this._workCell,g.translateToString(!0,H[0],H[1]),H[1]-H[0]),H=H[1]-1),!n&&this._isOverlapping(k)&&H<g.length-1&&g.getCodePoint(H+1)===D.NULL_CELL_CODE&&(k.content&=-12582913,k.content|=8388608),e(k,h,b),h=H)}}};b.prototype._drawBackground=function(a,b,c){var d=this,e=this._ctx,f=a.cols,g=0,h=0,u=null;e.save();this._forEachCell(a,b,c,null,function(a,b,c){var k=null;a.isInverse()?k=a.isFgDefault()?
d._colors.foreground.css:a.isFgRGB()?"rgb("+D.AttributeData.toColorRGB(a.getFgColor()).join(",")+")":d._colors.ansi[a.getFgColor()].css:a.isBgRGB()?k="rgb("+D.AttributeData.toColorRGB(a.getBgColor()).join(",")+")":a.isBgPalette()&&(k=d._colors.ansi[a.getBgColor()].css);null===u&&(g=b,h=c);c!==h?(e.fillStyle=u,d.fillCells(g,h,f-g,1),g=b,h=c):u!==k&&(e.fillStyle=u,d.fillCells(g,h,b-g,1),g=b,h=c);u=k});null!==u&&(e.fillStyle=u,this.fillCells(g,h,f-g,1));e.restore()};b.prototype._drawForeground=function(a,
b,c){var d=this;this._forEachCell(a,b,c,this._characterJoinerRegistry,function(b,c,e){if(!b.isInvisible()&&(d.drawChars(a,b,c,e),b.isUnderline())){d._ctx.save();if(b.isInverse())b.isBgDefault()?d._ctx.fillStyle=d._colors.background.css:b.isBgRGB()?d._ctx.fillStyle="rgb("+D.AttributeData.toColorRGB(b.getBgColor()).join(",")+")":d._ctx.fillStyle=d._colors.ansi[b.getBgColor()].css;else if(b.isFgDefault())d._ctx.fillStyle=d._colors.foreground.css;else if(b.isFgRGB())d._ctx.fillStyle="rgb("+D.AttributeData.toColorRGB(b.getFgColor()).join(",")+
")";else{var f=b.getFgColor();a.options.drawBoldTextInBrightColors&&b.isBold()&&8>f&&(f+=8);d._ctx.fillStyle=d._colors.ansi[f].css}d.fillBottomLineAtCells(c,e,b.getWidth());d._ctx.restore()}})};b.prototype.onGridChanged=function(a,b,c){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this.clearCells(0,b,a.cols,c-b+1),this._drawBackground(a,b,c),this._drawForeground(a,b,c))};b.prototype.onOptionsChanged=function(a){this.setTransparency(a,a.options.allowTransparency)};b.prototype._isOverlapping=
function(a){if(1!==a.getWidth()||256>a.getCode())return!1;a=a.getChars();if(this._characterOverlapCache.hasOwnProperty(a))return this._characterOverlapCache[a];this._ctx.save();this._ctx.font=this._characterFont;var b=Math.floor(this._ctx.measureText(a).width)>this._characterWidth;this._ctx.restore();return this._characterOverlapCache[a]=b};return b}(Kc.BaseRenderLayer);b.TextRenderLayer=a});E(Hi);var Ii=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c,d){b=a.call(this,b,"selection",c,!0,d)||this;b._clearState();return b}c(b,a);b.prototype._clearState=function(){this._state={start:null,end:null,columnSelectMode:null,
ydisp:null}};b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c);this._clearState()};b.prototype.reset=function(a){this._state.start&&this._state.end&&(this._clearState(),this.clearAll())};b.prototype.onSelectionChanged=function(a,b,c,d){if(this._didStateChange(b,c,d,a.buffer.ydisp))if(this.clearAll(),b&&c){var e=b[1]-a.buffer.ydisp,f=c[1]-a.buffer.ydisp,g=Math.max(e,0),h=Math.min(f,a.rows-1);g>=a.rows||0>h||(this._ctx.fillStyle=this._colors.selection.css,d?(e=b[0],this.fillCells(e,
g,c[0]-e,h-g+1)):(e=e===g?b[0]:0,this.fillCells(e,g,(g===h?c[0]:a.cols)-e,1),this.fillCells(0,g+1,a.cols,Math.max(h-g-1,0)),g!==h&&this.fillCells(0,h,f===h?c[0]:a.cols,1)),this._state.start=[b[0],b[1]],this._state.end=[c[0],c[1]],this._state.columnSelectMode=d,this._state.ydisp=a.buffer.ydisp)}else this._clearState()};b.prototype._didStateChange=function(a,b,c,d){return!this._areCoordinatesEqual(a,this._state.start)||!this._areCoordinatesEqual(b,this._state.end)||c!==this._state.columnSelectMode||
d!==this._state.ydisp};b.prototype._areCoordinatesEqual=function(a,b){return a&&b?a[0]===b[0]&&a[1]===b[1]:!1};return b}(Kc.BaseRenderLayer);b.SelectionRenderLayer=a});E(Ii);var Ji=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c,d){b=a.call(this,b,"cursor",c,!0,d)||this;b._cell=new D.CellData;b._state={x:null,y:null,isFocused:null,style:null,width:null};b._cursorRenderers={bar:b._renderBarCursor.bind(b),block:b._renderBlockCursor.bind(b),underline:b._renderUnderlineCursor.bind(b)};return b}c(b,a);b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c);this._state={x:null,y:null,isFocused:null,style:null,
width:null}};b.prototype.reset=function(a){this._clearCursor();this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null,this.onOptionsChanged(a))};b.prototype.onBlur=function(a){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause();a.refresh(a.buffer.y,a.buffer.y)};b.prototype.onFocus=function(a){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume(a):a.refresh(a.buffer.y,a.buffer.y)};b.prototype.onOptionsChanged=function(a){var b=
this;a.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new d(a,function(){b._render(a,!0)})):(this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=null),a.refresh(a.buffer.y,a.buffer.y))};b.prototype.onCursorMove=function(a){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation(a)};b.prototype.onGridChanged=function(a,b,c){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?
this._render(a,!1):this._cursorBlinkStateManager.restartBlinkAnimation(a)};b.prototype._render=function(a,b){if(!a.cursorState||a.cursorHidden)this._clearCursor();else{b=a.buffer.ybase+a.buffer.y;var c=b-a.buffer.ydisp;if(0>c||c>=a.rows)this._clearCursor();else if(a.buffer.lines.get(b).loadCell(a.buffer.x,this._cell),void 0!==this._cell.content)if(a.isFocused)if(this._cursorBlinkStateManager&&!this._cursorBlinkStateManager.isCursorVisible)this._clearCursor();else{if(this._state){if(this._state.x===
a.buffer.x&&this._state.y===c&&this._state.isFocused===a.isFocused&&this._state.style===a.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save();this._cursorRenderers[a.options.cursorStyle||"block"](a,a.buffer.x,c,this._cell);this._ctx.restore();this._state.x=a.buffer.x;this._state.y=c;this._state.isFocused=!1;this._state.style=a.options.cursorStyle;this._state.width=this._cell.getWidth()}else this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=
this._colors.cursor.css,this._renderBlurCursor(a,a.buffer.x,c,this._cell),this._ctx.restore(),this._state.x=a.buffer.x,this._state.y=c,this._state.isFocused=!1,this._state.style=a.options.cursorStyle,this._state.width=this._cell.getWidth()}};b.prototype._clearCursor=function(){this._state&&(this.clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:null,y:null,isFocused:null,style:null,width:null})};b.prototype._renderBarCursor=function(a,b,c,d){this._ctx.save();this._ctx.fillStyle=
this._colors.cursor.css;this.fillLeftLineAtCell(b,c);this._ctx.restore()};b.prototype._renderBlockCursor=function(a,b,c,d){this._ctx.save();this._ctx.fillStyle=this._colors.cursor.css;this.fillCells(b,c,d.getWidth(),1);this._ctx.fillStyle=this._colors.cursorAccent.css;this.fillCharTrueColor(a,d,b,c);this._ctx.restore()};b.prototype._renderUnderlineCursor=function(a,b,c,d){this._ctx.save();this._ctx.fillStyle=this._colors.cursor.css;this.fillBottomLineAtCells(b,c);this._ctx.restore()};b.prototype._renderBlurCursor=
function(a,b,c,d){this._ctx.save();this._ctx.strokeStyle=this._colors.cursor.css;this.strokeRectAtCell(b,c,d.getWidth(),1);this._ctx.restore()};return b}(Kc.BaseRenderLayer);b.CursorRenderLayer=a;var d=function(){function a(a,b){this._renderCallback=b;this.isCursorVisible=!0;a.isFocused&&this._restartInterval()}Object.defineProperty(a.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!0,configurable:!0});a.prototype.dispose=function(){this._blinkInterval&&
(window.clearInterval(this._blinkInterval),this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};a.prototype.restartBlinkAnimation=function(a){var b=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){b._renderCallback();
b._animationFrame=null})))};a.prototype._restartInterval=function(a){var b=this;void 0===a&&(a=600);this._blinkInterval&&window.clearInterval(this._blinkInterval);this._blinkStartTimeout=setTimeout(function(){if(b._animationTimeRestarted){var a=600-(Date.now()-b._animationTimeRestarted);b._animationTimeRestarted=null;if(0<a){b._restartInterval(a);return}}b.isCursorVisible=!1;b._animationFrame=window.requestAnimationFrame(function(){b._renderCallback();b._animationFrame=null});b._blinkInterval=setInterval(function(){if(b._animationTimeRestarted){var a=
600-(Date.now()-b._animationTimeRestarted);b._animationTimeRestarted=null;b._restartInterval(a)}else b.isCursorVisible=!b.isCursorVisible,b._animationFrame=window.requestAnimationFrame(function(){b._renderCallback();b._animationFrame=null})},600)},a)};a.prototype.pause=function(){this.isCursorVisible=!0;this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=null);this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=null);this._animationFrame&&
(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=null)};a.prototype.resume=function(a){this._animationTimeRestarted=null;this._restartInterval();this.restartBlinkAnimation(a)};return a}()});E(Ji);var Ki=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=
b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c,d,e){var f=a.call(this,b,"link",c,!0,d)||this;f._state=null;e.linkifier.onLinkHover(function(a){return f._onLinkHover(a)});e.linkifier.onLinkLeave(function(a){return f._onLinkLeave(a)});return f}c(b,a);b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c);this._state=null};b.prototype.reset=function(a){this._clearCurrentLink()};
b.prototype._clearCurrentLink=function(){if(this._state){this.clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var a=this._state.y2-this._state.y1-1;0<a&&this.clearCells(0,this._state.y1+1,this._state.cols,a);this.clearCells(0,this._state.y2,this._state.x2,1);this._state=null}};b.prototype._onLinkHover=function(a){a.fg===ja.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:Bb.is256Color(a.fg)?this._ctx.fillStyle=this._colors.ansi[a.fg].css:this._ctx.fillStyle=
this._colors.foreground.css;if(a.y1===a.y2)this.fillBottomLineAtCells(a.x1,a.y1,a.x2-a.x1);else{this.fillBottomLineAtCells(a.x1,a.y1,a.cols-a.x1);for(var b=a.y1+1;b<a.y2;b++)this.fillBottomLineAtCells(0,b,a.cols);this.fillBottomLineAtCells(0,a.y2,a.x2)}this._state=a};b.prototype._onLinkLeave=function(a){this._clearCurrentLink()};return b}(Kc.BaseRenderLayer);b.LinkRenderLayer=a});E(Ki);var Li=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c){var d=a.call(this)||this;d._terminal=b;d._colors=c;c=d._terminal.options.allowTransparency;d._characterJoinerRegistry=new Ye.CharacterJoinerRegistry(b);d._renderLayers=[new Hi.TextRenderLayer(d._terminal.screenElement,
0,d._colors,d._characterJoinerRegistry,c),new Ii.SelectionRenderLayer(d._terminal.screenElement,1,d._colors),new Ki.LinkRenderLayer(d._terminal.screenElement,2,d._colors,d._terminal),new Ji.CursorRenderLayer(d._terminal.screenElement,3,d._colors)];d.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null};
d._devicePixelRatio=window.devicePixelRatio;d._updateDimensions();d.onOptionsChanged();return d}c(b,a);b.prototype.dispose=function(){a.prototype.dispose.call(this);this._renderLayers.forEach(function(a){return a.dispose()})};b.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._terminal.cols,this._terminal.rows))};b.prototype.setColors=function(a){var b=this;this._colors=a;this._renderLayers.forEach(function(a){a.setColors(b._terminal,
b._colors);a.reset(b._terminal)})};b.prototype.onResize=function(a,b){var c=this;this._updateDimensions();this._renderLayers.forEach(function(a){return a.resize(c._terminal,c.dimensions)});this._terminal.screenElement.style.width=this.dimensions.canvasWidth+"px";this._terminal.screenElement.style.height=this.dimensions.canvasHeight+"px"};b.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows)};b.prototype.onBlur=function(){var a=this;this._runOperation(function(b){return b.onBlur(a._terminal)})};
b.prototype.onFocus=function(){var a=this;this._runOperation(function(b){return b.onFocus(a._terminal)})};b.prototype.onSelectionChanged=function(a,b,c){var d=this;void 0===c&&(c=!1);this._runOperation(function(e){return e.onSelectionChanged(d._terminal,a,b,c)})};b.prototype.onCursorMove=function(){var a=this;this._runOperation(function(b){return b.onCursorMove(a._terminal)})};b.prototype.onOptionsChanged=function(){var a=this;this._runOperation(function(b){return b.onOptionsChanged(a._terminal)})};
b.prototype.clear=function(){var a=this;this._runOperation(function(b){return b.reset(a._terminal)})};b.prototype._runOperation=function(a){this._renderLayers.forEach(function(b){return a(b)})};b.prototype.renderRows=function(a,b){var c=this;this._renderLayers.forEach(function(d){return d.onGridChanged(c._terminal,a,b)})};b.prototype._updateDimensions=function(){this._terminal.charMeasure.width&&this._terminal.charMeasure.height&&(this.dimensions.scaledCharWidth=Math.floor(this._terminal.charMeasure.width*
window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=1===this._terminal.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),
this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/
this._terminal.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols)};b.prototype.registerCharacterJoiner=function(a){return this._characterJoinerRegistry.registerCharacterJoiner(a)};b.prototype.deregisterCharacterJoiner=function(a){return this._characterJoinerRegistry.deregisterCharacterJoiner(a)};return b}(Pa.Disposable);b.Renderer=a});E(Li);var Ze=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b){var c=a.call(this)||this;c._terminal=b;c._zones=[];c._areZonesActive=!1;c._tooltipTimeout=null;c._currentZone=null;c._lastHoverCoords=[null,null];c.register(R.addDisposableDomListener(c._terminal.element,
"mousedown",function(a){return c._onMouseDown(a)}));c._mouseMoveListener=function(a){return c._onMouseMove(a)};c._mouseLeaveListener=function(a){return c._onMouseLeave(a)};c._clickListener=function(a){return c._onClick(a)};return c}c(b,a);b.prototype.dispose=function(){a.prototype.dispose.call(this);this._deactivate()};b.prototype.add=function(a){this._zones.push(a);1===this._zones.length&&this._activate()};b.prototype.clearAll=function(a,b){if(0!==this._zones.length){b||(a=0,b=this._terminal.rows-
1);for(var c=0;c<this._zones.length;c++){var d=this._zones[c];if(d.y1>a&&d.y1<=b+1||d.y2>a&&d.y2<=b+1||d.y1<a&&d.y2>b+1)this._currentZone&&this._currentZone===d&&(this._currentZone.leaveCallback(),this._currentZone=null),this._zones.splice(c--,1)}0===this._zones.length&&this._deactivate()}};b.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._terminal.element.addEventListener("mousemove",this._mouseMoveListener),this._terminal.element.addEventListener("mouseleave",
this._mouseLeaveListener),this._terminal.element.addEventListener("click",this._clickListener))};b.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._terminal.element.removeEventListener("mousemove",this._mouseMoveListener),this._terminal.element.removeEventListener("mouseleave",this._mouseLeaveListener),this._terminal.element.removeEventListener("click",this._clickListener))};b.prototype._onMouseMove=function(a){if(this._lastHoverCoords[0]!==a.pageX||this._lastHoverCoords[1]!==
a.pageY)this._onHover(a),this._lastHoverCoords=[a.pageX,a.pageY]};b.prototype._onHover=function(a){var b=this,c=this._findZoneEventAt(a);c!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),c&&(this._currentZone=c,c.hoverCallback&&c.hoverCallback(a),this._tooltipTimeout=setTimeout(function(){return b._onTooltip(a)},500)))};b.prototype._onTooltip=function(a){this._tooltipTimeout=null;var b=this._findZoneEventAt(a);
b&&b.tooltipCallback&&b.tooltipCallback(a)};b.prototype._onMouseDown=function(a){this._initialSelectionLength=this._terminal.getSelection().length;if(this._areZonesActive){var b=this._findZoneEventAt(a);b&&b.willLinkActivate(a)&&(a.preventDefault(),a.stopImmediatePropagation())}};b.prototype._onMouseLeave=function(a){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=null,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))};b.prototype._onClick=function(a){var b=this._findZoneEventAt(a),
c=this._terminal.getSelection().length;b&&c===this._initialSelectionLength&&(b.clickCallback(a),a.preventDefault(),a.stopImmediatePropagation())};b.prototype._findZoneEventAt=function(a){var b=this._terminal.mouseHelper.getCoords(a,this._terminal.screenElement,this._terminal.charMeasure,this._terminal.cols,this._terminal.rows);if(!b)return null;a=b[0];b=b[1];for(var c=0;c<this._zones.length;c++){var d=this._zones[c];if(d.y1===d.y2){if(b===d.y1&&a>=d.x1&&a<d.x2)return d}else if(b===d.y1&&a>=d.x1||
b===d.y2&&a<d.x2||b>d.y1&&b<d.y2)return d}return null};return b}(Pa.Disposable);b.MouseZoneManager=a;a=function(){return function(a,b,c,g,h,k,n,p,q){this.x1=a;this.y1=b;this.x2=c;this.y2=g;this.clickCallback=h;this.hoverCallback=k;this.tooltipCallback=n;this.leaveCallback=p;this.willLinkActivate=q}}();b.MouseZone=a});E(Ze);var Mi=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a){this._terminal=a;this._linkMatchers=[];this._nextLinkMatcherId=0;this._onLinkHover=
new U.EventEmitter2;this._onLinkLeave=new U.EventEmitter2;this._onLinkTooltip=new U.EventEmitter2;this._rowsToLinkify={start:null,end:null}}Object.defineProperty(a.prototype,"onLinkHover",{get:function(){return this._onLinkHover.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onLinkLeave",{get:function(){return this._onLinkLeave.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!0,
configurable:!0});a.prototype.attachToDom=function(a){this._mouseZoneManager=a};a.prototype.linkifyRows=function(b,c){var d=this;this._mouseZoneManager&&(null===this._rowsToLinkify.start?(this._rowsToLinkify.start=b,this._rowsToLinkify.end=c):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,b),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,c)),this._mouseZoneManager.clearAll(b,c),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout(function(){return d._linkifyRows()},
a.TIME_BEFORE_LINKIFY))};a.prototype._linkifyRows=function(){this._rowsTimeoutId=null;var b=this._terminal.buffer,c=b.ydisp+this._rowsToLinkify.start;if(!(c>=b.lines.length)){var f=Math.ceil(a.OVERSCAN_CHAR_LIMIT/this._terminal.cols);for(b=this._terminal.buffer.iterator(!1,c,b.ydisp+Math.min(this._rowsToLinkify.end,this._terminal.rows)+1,f,f);b.hasNext();)for(c=b.next(),f=0;f<this._linkMatchers.length;f++)this._doLinkifyRow(c.range.first,c.content,this._linkMatchers[f]);this._rowsToLinkify.start=
null;this._rowsToLinkify.end=null}};a.prototype.registerLinkMatcher=function(a,b,c){void 0===c&&(c={});if(!b)throw Error("handler must be defined");a={id:this._nextLinkMatcherId++,regex:a,handler:b,matchIndex:c.matchIndex,validationCallback:c.validationCallback,hoverTooltipCallback:c.tooltipCallback,hoverLeaveCallback:c.leaveCallback,willLinkActivate:c.willLinkActivate,priority:c.priority||0};this._addLinkMatcherToList(a);return a.id};a.prototype._addLinkMatcherToList=function(a){if(0===this._linkMatchers.length)this._linkMatchers.push(a);
else{for(var b=this._linkMatchers.length-1;0<=b;b--)if(a.priority<=this._linkMatchers[b].priority){this._linkMatchers.splice(b+1,0,a);return}this._linkMatchers.splice(0,0,a)}};a.prototype.deregisterLinkMatcher=function(a){for(var b=0;b<this._linkMatchers.length;b++)if(this._linkMatchers[b].id===a)return this._linkMatchers.splice(b,1),!0;return!1};a.prototype._doLinkifyRow=function(a,b,c){for(var d=this,e=new RegExp(c.regex.source,c.regex.flags+"g"),f,n=-1,p=function(){var g=f["number"!==typeof c.matchIndex?
0:c.matchIndex];if(!g){if(q._terminal.debug)throw console.log({match:f,matcher:c}),Error("match found without corresponding matchIndex");return"break"}n=b.indexOf(g,n+1);e.lastIndex=n+g.length;if(0>n)return"break";var h=q._terminal.buffer.stringIndexToBufferIndex(a,n);if(0>h[0])return"break";var k=q._terminal.buffer.lines.get(h[0]).getFg(h[1]),p;k&&(p=k>>9&511);c.validationCallback?c.validationCallback(g,function(a){d._rowsTimeoutId||a&&d._addLink(h[1],h[0]-d._terminal.buffer.ydisp,g,c,p)}):q._addLink(h[1],
h[0]-q._terminal.buffer.ydisp,g,c,p)},q=this;null!==(f=e.exec(b))&&"break"!==p(););};a.prototype._addLink=function(a,b,c,g,h){var d=this,e=Ue.getStringCellWidth(c),f=a%this._terminal.cols,q=b+Math.floor(a/this._terminal.cols),y=(f+e)%this._terminal.cols,u=q+Math.floor((f+e)/this._terminal.cols);0===y&&(y=this._terminal.cols,u--);this._mouseZoneManager.add(new Ze.MouseZone(f+1,q+1,y+1,u+1,function(a){if(g.handler)return g.handler(a,c);window.open(c,"_blank")},function(){d._onLinkHover.fire(d._createLinkHoverEvent(f,
q,y,u,h));d._terminal.element.classList.add("xterm-cursor-pointer")},function(a){d._onLinkTooltip.fire(d._createLinkHoverEvent(f,q,y,u,h));g.hoverTooltipCallback&&g.hoverTooltipCallback(a,c)},function(){d._onLinkLeave.fire(d._createLinkHoverEvent(f,q,y,u,h));d._terminal.element.classList.remove("xterm-cursor-pointer");g.hoverLeaveCallback&&g.hoverLeaveCallback()},function(a){return g.willLinkActivate?g.willLinkActivate(a,c):!0}))};a.prototype._createLinkHoverEvent=function(a,b,c,g,h){return{x1:a,
y1:b,x2:c,y2:g,cols:this._terminal.cols,fg:h}};a.TIME_BEFORE_LINKIFY=200;a.OVERSCAN_CHAR_LIMIT=2E3;return a}();b.Linkifier=a});E(Mi);var $e=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a){this._renderCoordinator=a}a.getCoordsRelativeToElement=function(a,b){b=b.getBoundingClientRect();return[a.clientX-b.left,a.clientY-b.top]};a.prototype.getCoords=function(b,c,f,g,h,k){if(!f.width||!f.height)return null;b=a.getCoordsRelativeToElement(b,c);if(!b)return null;
b[0]=Math.ceil((b[0]+(k?this._renderCoordinator.dimensions.actualCellWidth/2:0))/this._renderCoordinator.dimensions.actualCellWidth);b[1]=Math.ceil(b[1]/this._renderCoordinator.dimensions.actualCellHeight);b[0]=Math.min(Math.max(b[0],1),g+(k?1:0));b[1]=Math.min(Math.max(b[1],1),h);return b};a.prototype.getRawByteCoords=function(a,b,c,g,h){a=this.getCoords(a,b,c,g,h);return{x:a[0]+32,y:a[1]+32}};return a}();b.MouseHelper=a});E($e);var Ni=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});
a=function(){function a(a){this._terminal=a;this.clearSelection()}a.prototype.clearSelection=function(){this.selectionEnd=this.selectionStart=null;this.isSelectAllActive=!1;this.selectionStartLength=0};Object.defineProperty(a.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart?this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart:this.selectionStart},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._terminal.cols,this._terminal.buffer.ybase+this._terminal.rows-1];if(!this.selectionStart)return null;if(!this.selectionEnd||this.areSelectionValuesReversed()){var a=this.selectionStart[0]+this.selectionStartLength;return a>this._terminal.cols?[a%this._terminal.cols,this.selectionStart[1]+Math.floor(a/this._terminal.cols)]:[a,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?
[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd},enumerable:!0,configurable:!0});a.prototype.areSelectionValuesReversed=function(){var a=this.selectionStart,b=this.selectionEnd;return a&&b?a[1]>b[1]||a[1]===b[1]&&a[0]>b[0]:!1};a.prototype.onTrim=function(a){this.selectionStart&&(this.selectionStart[1]-=a);this.selectionEnd&&(this.selectionEnd[1]-=a);if(this.selectionEnd&&0>this.selectionEnd[1])return this.clearSelection(),!0;
this.selectionStart&&0>this.selectionStart[1]&&(this.selectionStart[1]=0);return!1};return a}();b.SelectionModel=a});E(Ni);var Oi=C(function(a,b){function c(a,b){a=Math.floor(a);for(var c="",d=0;d<a;d++)c+=b;return c}Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a,b){this._mouseEvent=a;this._terminal=b;this._lines=this._terminal.buffer.lines;this._startCol=this._terminal.buffer.x;this._startRow=this._terminal.buffer.y;if(a=this._terminal.mouseHelper.getCoords(this._mouseEvent,
this._terminal.element,this._terminal.charMeasure,this._terminal.cols,this._terminal.rows,!1))a=a.map(function(a){return a-1}),this._endCol=a[0],this._endRow=a[1]}a.prototype.move=function(){this._mouseEvent.altKey&&void 0!==this._endCol&&void 0!==this._endRow&&this._terminal.handler(this._arrowSequences())};a.prototype._arrowSequences=function(){return this._terminal.buffer.hasScrollback?this._moveHorizontallyOnly():this._resetStartingRow()+this._moveToRequestedRow()+this._moveToRequestedCol()};
a.prototype._resetStartingRow=function(){return 0===this._moveToRequestedRow().length?"":c(this._bufferLine(this._startCol,this._startRow,this._startCol,this._startRow-this._wrappedRowsForRow(this._startRow),!1).length,this._sequence("D"))};a.prototype._moveToRequestedRow=function(){var a=this._startRow-this._wrappedRowsForRow(this._startRow),b=this._endRow-this._wrappedRowsForRow(this._endRow);a=Math.abs(a-b)-this._wrappedRowsCount();return c(a,this._sequence(this._verticalDirection()))};a.prototype._moveToRequestedCol=
function(){var a=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;var b=this._endRow,d=this._horizontalDirection();return c(this._bufferLine(this._startCol,a,this._endCol,b,"C"===d).length,this._sequence(d))};a.prototype._moveHorizontallyOnly=function(){var a=this._horizontalDirection();return c(Math.abs(this._startCol-this._endCol),this._sequence(a))};a.prototype._wrappedRowsCount=function(){for(var a=0,b=this._startRow-this._wrappedRowsForRow(this._startRow),
c=this._endRow-this._wrappedRowsForRow(this._endRow),d=0;d<Math.abs(b-c);d++){var k="A"===this._verticalDirection()?-1:1;this._lines.get(b+k*d).isWrapped&&a++}return a};a.prototype._wrappedRowsForRow=function(a){for(var b=0,c=this._lines.get(a).isWrapped;c&&0<=a&&a<this._terminal.rows;)b++,a--,c=this._lines.get(a).isWrapped;return b};a.prototype._horizontalDirection=function(){var a=0<this._moveToRequestedRow().length?this._endRow-this._wrappedRowsForRow(this._endRow):this._startRow;return this._startCol<
this._endCol&&a<=this._endRow||this._startCol>=this._endCol&&a<this._endRow?"C":"D"};a.prototype._verticalDirection=function(){return this._startRow>this._endRow?"A":"B"};a.prototype._bufferLine=function(a,b,c,d,k){for(var e=a,f="";e!==c||b!==d;)e+=k?1:-1,k&&e>this._terminal.cols-1?(f+=this._terminal.buffer.translateBufferLineToString(b,!1,a,e),a=e=0,b++):!k&&0>e&&(f+=this._terminal.buffer.translateBufferLineToString(b,!1,0,a+1),a=e=this._terminal.cols-1,b--);return f+this._terminal.buffer.translateBufferLineToString(b,
!1,a,e)};a.prototype._sequence=function(a){return v.C0.ESC+(this._terminal.applicationCursor?"O":"[")+a};return a}();b.AltClickHandler=a});E(Oi);var Pi=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=String.fromCharCode(160);var c=new RegExp(a,"g");a=function(){function a(a,b){this._terminal=a;this._charMeasure=b;this._enabled=!0;this._workCell=new D.CellData;this._onLinuxMouseSelection=new U.EventEmitter2;this._onRedrawRequest=new U.EventEmitter2;this._onSelectionChange=new U.EventEmitter2;
this._initListeners();this.enable();this._model=new Ni.SelectionModel(a);this._activeSelectionMode=0}Object.defineProperty(a.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onRedrawRequest",{get:function(){return this._onRedrawRequest.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!0,
configurable:!0});a.prototype.dispose=function(){this._removeMouseDownListeners()};Object.defineProperty(a.prototype,"_buffer",{get:function(){return this._terminal.buffers.active},enumerable:!0,configurable:!0});a.prototype._initListeners=function(){var a=this;this._mouseMoveListener=function(b){return a._onMouseMove(b)};this._mouseUpListener=function(b){return a._onMouseUp(b)};this.initBuffersListeners()};a.prototype.initBuffersListeners=function(){var a=this;this._trimListener=this._terminal.buffer.lines.onTrim(function(b){return a._onTrim(b)});
this._terminal.buffers.onBufferActivate(function(b){return a._onBufferActivate(b)})};a.prototype.disable=function(){this.clearSelection();this._enabled=!1};a.prototype.enable=function(){this._enabled=!0};Object.defineProperty(a.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"hasSelection",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return a&&b?a[0]!==b[0]||a[1]!==b[1]:!1},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"selectionText",{get:function(){var a=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!a||!b)return"";var d=[];if(3===this._activeSelectionMode){if(a[0]===b[0])return"";for(var h=a[1];h<=b[1];h++){var k=this._buffer.translateBufferLineToString(h,!0,a[0],b[0]);d.push(k)}}else{d.push(this._buffer.translateBufferLineToString(a[1],
!0,a[0],a[1]===b[1]?b[0]:void 0));for(h=a[1]+1;h<=b[1]-1;h++){var n=this._buffer.lines.get(h);k=this._buffer.translateBufferLineToString(h,!0);n.isWrapped?d[d.length-1]+=k:d.push(k)}a[1]!==b[1]&&(n=this._buffer.lines.get(b[1]),k=this._buffer.translateBufferLineToString(b[1],!0,0,b[0]),n.isWrapped?d[d.length-1]+=k:d.push(k))}return d.map(function(a){return a.replace(c," ")}).join(ma.isMSWindows?"\r\n":"\n")},enumerable:!0,configurable:!0});a.prototype.clearSelection=function(){this._model.clearSelection();
this._removeMouseDownListeners();this.refresh();this._onSelectionChange.fire()};a.prototype.refresh=function(a){var b=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame(function(){return b._refresh()}));ma.isLinux&&a&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)};a.prototype._refresh=function(){this._refreshAnimationFrame=null;this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,
columnSelectMode:3===this._activeSelectionMode})};a.prototype.isClickInSelection=function(a){a=this._getMouseBufferCoords(a);var b=this._model.finalSelectionStart,c=this._model.finalSelectionEnd;return b&&c?this._areCoordsInSelection(a,b,c):!1};a.prototype._areCoordsInSelection=function(a,b,c){return a[1]>b[1]&&a[1]<c[1]||b[1]===c[1]&&a[1]===b[1]&&a[0]>=b[0]&&a[0]<c[0]||b[1]<c[1]&&a[1]===c[1]&&a[0]<c[0]||b[1]<c[1]&&a[1]===b[1]&&a[0]>=b[0]};a.prototype.selectWordAtCursor=function(a){if(a=this._getMouseBufferCoords(a))this._selectWordAt(a,
!1),this._model.selectionEnd=null,this.refresh(!0)};a.prototype.selectAll=function(){this._model.isSelectAllActive=!0;this.refresh();this._onSelectionChange.fire()};a.prototype.selectLines=function(a,b){this._model.clearSelection();a=Math.max(a,0);b=Math.min(b,this._terminal.buffer.lines.length-1);this._model.selectionStart=[0,a];this._model.selectionEnd=[this._terminal.cols,b];this.refresh();this._onSelectionChange.fire()};a.prototype._onTrim=function(a){this._model.onTrim(a)&&this.refresh()};a.prototype._getMouseBufferCoords=
function(a){a=this._terminal.mouseHelper.getCoords(a,this._terminal.screenElement,this._charMeasure,this._terminal.cols,this._terminal.rows,!0);if(!a)return null;a[0]--;a[1]--;a[1]+=this._terminal.buffer.ydisp;return a};a.prototype._getMouseEventScrollAmount=function(a){a=$e.MouseHelper.getCoordsRelativeToElement(a,this._terminal.screenElement)[1];var b=this._terminal.rows*Math.ceil(this._charMeasure.height*this._terminal.options.lineHeight);if(0<=a&&a<=b)return 0;a>b&&(a-=b);a=Math.min(Math.max(a,
-50),50);a/=50;return a/Math.abs(a)+Math.round(14*a)};a.prototype.shouldForceSelection=function(a){return ma.isMac?a.altKey&&this._terminal.options.macOptionClickForcesSelection:a.shiftKey};a.prototype.onMouseDown=function(a){this._mouseDownTimeStamp=a.timeStamp;if((2!==a.button||!this.hasSelection)&&0===a.button){if(!this._enabled){if(!this.shouldForceSelection(a))return;a.stopPropagation()}a.preventDefault();this._dragScrollAmount=0;this._enabled&&a.shiftKey?this._onIncrementalClick(a):1===a.detail?
this._onSingleClick(a):2===a.detail?this._onDoubleClick(a):3===a.detail&&this._onTripleClick(a);this._addMouseDownListeners();this.refresh(!0)}};a.prototype._addMouseDownListeners=function(){var a=this;this._terminal.element.ownerDocument.addEventListener("mousemove",this._mouseMoveListener);this._terminal.element.ownerDocument.addEventListener("mouseup",this._mouseUpListener);this._dragScrollIntervalTimer=setInterval(function(){return a._dragScroll()},50)};a.prototype._removeMouseDownListeners=function(){this._terminal.element.ownerDocument&&
(this._terminal.element.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._terminal.element.ownerDocument.removeEventListener("mouseup",this._mouseUpListener));clearInterval(this._dragScrollIntervalTimer);this._dragScrollIntervalTimer=null};a.prototype._onIncrementalClick=function(a){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(a))};a.prototype._onSingleClick=function(a){this._model.selectionStartLength=0;this._model.isSelectAllActive=
!1;this._activeSelectionMode=this.shouldColumnSelect(a)?3:0;this._model.selectionStart=this._getMouseBufferCoords(a);this._model.selectionStart&&(this._model.selectionEnd=null,(a=this._buffer.lines.get(this._model.selectionStart[1]))&&(a.length>=this._model.selectionStart[0]||0===a.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++))};a.prototype._onDoubleClick=function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=1,this._selectWordAt(a,!0)};a.prototype._onTripleClick=
function(a){if(a=this._getMouseBufferCoords(a))this._activeSelectionMode=2,this._selectLineAt(a[1])};a.prototype.shouldColumnSelect=function(a){return a.altKey&&!(ma.isMac&&this._terminal.options.macOptionClickForcesSelection)};a.prototype._onMouseMove=function(a){a.stopImmediatePropagation();var b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;this._model.selectionEnd=this._getMouseBufferCoords(a);this._model.selectionEnd?(2===this._activeSelectionMode?this._model.selectionEnd[0]=
this._model.selectionEnd[1]<this._model.selectionStart[1]?0:this._terminal.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(a),3!==this._activeSelectionMode&&(0<this._dragScrollAmount?this._model.selectionEnd[0]=this._terminal.cols:0>this._dragScrollAmount&&(this._model.selectionEnd[0]=0)),this._model.selectionEnd[1]<this._buffer.lines.length&&0===this._buffer.lines.get(this._model.selectionEnd[1]).hasWidth(this._model.selectionEnd[0])&&
this._model.selectionEnd[0]++,b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)):this.refresh(!0)};a.prototype._dragScroll=function(){this._dragScrollAmount&&(this._terminal.scrollLines(this._dragScrollAmount,!1),0<this._dragScrollAmount?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._terminal.cols),this._model.selectionEnd[1]=Math.min(this._terminal.buffer.ydisp+this._terminal.rows,this._terminal.buffer.lines.length-1)):(3!==this._activeSelectionMode&&
(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=this._terminal.buffer.ydisp),this.refresh())};a.prototype._onMouseUp=function(a){var b=a.timeStamp-this._mouseDownTimeStamp;this._removeMouseDownListeners();1>=this.selectionText.length&&500>b?(new Oi.AltClickHandler(a,this._terminal)).move():this.hasSelection&&this._onSelectionChange.fire()};a.prototype._onBufferActivate=function(a){var b=this;this.clearSelection();this._trimListener&&this._trimListener.dispose();this._trimListener=a.activeBuffer.lines.onTrim(function(a){return b._onTrim(a)})};
a.prototype._convertViewportColToCharacterIndex=function(a,b){for(var c=b[0],d=0;b[0]>=d;d++){var e=a.loadCell(d,this._workCell).getChars().length;0===this._workCell.getWidth()?c--:1<e&&b[0]!==d&&(c+=e-1)}return c};a.prototype.setSelection=function(a,b,c){this._model.clearSelection();this._removeMouseDownListeners();this._model.selectionStart=[a,b];this._model.selectionStartLength=c;this.refresh()};a.prototype._getWordAt=function(a,b,c,d){void 0===c&&(c=!0);void 0===d&&(d=!0);if(a[0]>=this._terminal.cols)return null;
var e=this._buffer.lines.get(a[1]);if(!e)return null;var f=this._buffer.translateBufferLineToString(a[1],!1),g=this._convertViewportColToCharacterIndex(e,a),h=g,y=a[0]-g,u=0,r=0,H=0,t=0;if(" "===f.charAt(g)){for(;0<g&&" "===f.charAt(g-1);)g--;for(;h<f.length&&" "===f.charAt(h+1);)h++}else{var v=a[0],x=a[0];0===e.getWidth(v)&&(u++,v--);2===e.getWidth(x)&&(r++,x++);var A=e.getString(x).length;1<A&&(t+=A-1,h+=A-1);for(;0<v&&0<g&&!this._isCharWordSeparator(e.loadCell(v-1,this._workCell));)e.loadCell(v-
1,this._workCell),A=this._workCell.getChars().length,0===this._workCell.getWidth()?(u++,v--):1<A&&(H+=A-1,g-=A-1),g--,v--;for(;x<e.length&&h+1<f.length&&!this._isCharWordSeparator(e.loadCell(x+1,this._workCell));)e.loadCell(x+1,this._workCell),v=this._workCell.getChars().length,2===this._workCell.getWidth()?(r++,x++):1<v&&(t+=v-1,h+=v-1),h++,x++}h++;y=g+y-u+H;u=Math.min(this._terminal.cols,h-g+u+r-H-t);if(!b&&""===f.slice(g,h).trim())return null;c&&0===y&&32!==e.getCodePoint(0)&&(b=this._buffer.lines.get(a[1]-
1))&&e.isWrapped&&32!==b.getCodePoint(this._terminal.cols-1)&&(b=this._getWordAt([this._terminal.cols-1,a[1]-1],!1,!0,!1))&&(b=this._terminal.cols-b.start,y-=b,u+=b);d&&y+u===this._terminal.cols&&32!==e.getCodePoint(this._terminal.cols-1)&&(d=this._buffer.lines.get(a[1]+1))&&d.isWrapped&&32!==d.getCodePoint(0)&&(a=this._getWordAt([0,a[1]+1],!1,!1,!0))&&(u+=a.length);return{start:y,length:u}};a.prototype._selectWordAt=function(a,b){if(b=this._getWordAt(a,b)){for(;0>b.start;)b.start+=this._terminal.cols,
a[1]--;this._model.selectionStart=[b.start,a[1]];this._model.selectionStartLength=b.length}};a.prototype._selectToWordAt=function(a){var b=this._getWordAt(a,!0);if(b){for(a=a[1];0>b.start;)b.start+=this._terminal.cols,a--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._terminal.cols;)b.length-=this._terminal.cols,a++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,a]}};a.prototype._isCharWordSeparator=function(a){return 0===a.getWidth()?
!1:0<=" ()[]{}'\"".indexOf(a.getChars())};a.prototype._selectLineAt=function(a){a=this._buffer.getWrappedRangeForLine(a);this._model.selectionStart=[0,a.first];this._model.selectionEnd=[this._terminal.cols,a.last];this._model.selectionStartLength=0};return a}();b.SelectionManager=a});E(Pi);var Qi=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a,b){this._onCharSizeChanged=new U.EventEmitter2;this._document=a;this._parentElement=b;this._measureElement=this._document.createElement("span");
this._measureElement.classList.add("xterm-char-measure-element");this._measureElement.textContent="W";this._measureElement.setAttribute("aria-hidden","true");this._parentElement.appendChild(this._measureElement)}Object.defineProperty(a.prototype,"onCharSizeChanged",{get:function(){return this._onCharSizeChanged.event},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"height",
{get:function(){return this._height},enumerable:!0,configurable:!0});a.prototype.measure=function(a){this._measureElement.style.fontFamily=a.fontFamily;this._measureElement.style.fontSize=a.fontSize+"px";a=this._measureElement.getBoundingClientRect();if(0!==a.width&&0!==a.height){var b=Math.ceil(a.height);if(this._width!==a.width||this._height!==b)this._width=a.width,this._height=b,this._onCharSizeChanged.fire()}};return a}();b.CharMeasure=a});E(Qi);var Lc=C(function(a,b){Object.defineProperty(b,
"__esModule",{value:!0});b.blankLine="Blank line";b.promptLabel="Terminal input";b.tooMuchOutput="Too much output to announce, navigate to rows manually to read"});E(Lc);var af=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.DEFAULT_BELL_SOUND="data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQQBAADpAFgCwAMlBZoG/wdmCcoKRAypDQ8PbRDBEQQTOxRtFYcWlBePGIUZXhoiG88bcBz7HHIdzh0WHlMeZx51HmkeUx4WHs8dah0AHXwc3hs9G4saxRnyGBIYGBcQFv8U4RPAEoYRQBACD70NWwwHC6gJOwjWBloF7gOBAhABkf8b/qv8R/ve+Xf4Ife79W/0JfPZ8Z/wde9N7ijtE+wU6xvqM+lb6H7nw+YX5mrlxuQz5Mzje+Ma49fioeKD4nXiYeJy4pHitOL04j/jn+MN5IPkFOWs5U3mDefM55/ogOl36m7rdOyE7abuyu8D8Unyj/Pg9D/2qfcb+Yn6/vuK/Qj/lAAlAg==";
a=function(){function a(a){this._terminal=a}Object.defineProperty(a,"audioContext",{get:function(){if(!a._audioContext){var b=window.AudioContext||window.webkitAudioContext;if(!b)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;a._audioContext=new b}return a._audioContext},enumerable:!0,configurable:!0});a.prototype.playBellSound=function(){var b=a.audioContext;if(b){var c=b.createBufferSource();b.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._terminal.options.bellSound)),
function(a){c.buffer=a;c.connect(b.destination);c.start(0)})}};a.prototype._base64ToArrayBuffer=function(a){a=window.atob(a);for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c.buffer};a.prototype._removeMimeType=function(a){return a.split(",")[1]};return a}();b.SoundManager=a});E(af);var bf=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a){this._renderCallback=a}a.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),
this._animationFrame=void 0)};a.prototype.refresh=function(a,b,c){var d=this;this._rowCount=c;a=void 0!==a?a:0;b=void 0!==b?b:this._rowCount-1;this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,a):a;this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,b):b;this._animationFrame||(this._animationFrame=window.requestAnimationFrame(function(){return d._innerRefresh()}))};a.prototype._innerRefresh=function(){void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount&&(this._rowStart=
Math.max(this._rowStart,0),this._rowEnd=Math.min(this._rowEnd,this._rowCount-1),this._renderCallback(this._rowStart,this._rowEnd),this._animationFrame=this._rowEnd=this._rowStart=void 0)};return a}();b.RenderDebouncer=a});E(bf);var cf=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=
b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._currentDevicePixelRatio=window.devicePixelRatio;return b}c(b,a);b.prototype.setListener=function(a){var b=this;this._listener&&this.clearListener();this._listener=a;this._outerListener=function(){b._listener&&(b._listener(window.devicePixelRatio,b._currentDevicePixelRatio),b._updateDpr())};this._updateDpr()};
b.prototype.dispose=function(){a.prototype.dispose.call(this);this.clearListener()};b.prototype._updateDpr=function(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))};b.prototype.clearListener=function(){this._resolutionMediaMatchList&&
this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._outerListener=this._listener=this._resolutionMediaMatchList=void 0)};return b}(Pa.Disposable);b.ScreenDprMonitor=a});E(cf);var df=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=
b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c){var d=a.call(this)||this;d._terminal=b;d._dimensions=c;d._liveRegionLineCount=0;d._charsToConsume=[];d._charsToAnnounce="";d._accessibilityTreeRoot=document.createElement("div");d._accessibilityTreeRoot.classList.add("xterm-accessibility");d._rowContainer=document.createElement("div");d._rowContainer.classList.add("xterm-accessibility-tree");
d._rowElements=[];for(b=0;b<d._terminal.rows;b++)d._rowElements[b]=d._createAccessibilityTreeNode(),d._rowContainer.appendChild(d._rowElements[b]);d._topBoundaryFocusListener=function(a){return d._onBoundaryFocus(a,0)};d._bottomBoundaryFocusListener=function(a){return d._onBoundaryFocus(a,1)};d._rowElements[0].addEventListener("focus",d._topBoundaryFocusListener);d._rowElements[d._rowElements.length-1].addEventListener("focus",d._bottomBoundaryFocusListener);d._refreshRowsDimensions();d._accessibilityTreeRoot.appendChild(d._rowContainer);
d._renderRowsDebouncer=new bf.RenderDebouncer(d._renderRows.bind(d));d._refreshRows();d._liveRegion=document.createElement("div");d._liveRegion.classList.add("live-region");d._liveRegion.setAttribute("aria-live","assertive");d._accessibilityTreeRoot.appendChild(d._liveRegion);d._terminal.element.insertAdjacentElement("afterbegin",d._accessibilityTreeRoot);d.register(d._renderRowsDebouncer);d.register(d._terminal.onResize(function(a){return d._onResize(a.rows)}));d.register(d._terminal.onRender(function(a){return d._refreshRows(a.start,
a.end)}));d.register(d._terminal.onScroll(function(){return d._refreshRows()}));d.register(d._terminal.addDisposableListener("a11y.char",function(a){return d._onChar(a)}));d.register(d._terminal.onLineFeed(function(){return d._onChar("\n")}));d.register(d._terminal.addDisposableListener("a11y.tab",function(a){return d._onTab(a)}));d.register(d._terminal.onKey(function(a){return d._onKey(a.key)}));d.register(d._terminal.addDisposableListener("blur",function(){return d._clearLiveRegion()}));d._screenDprMonitor=
new cf.ScreenDprMonitor;d.register(d._screenDprMonitor);d._screenDprMonitor.setListener(function(){return d._refreshRowsDimensions()});d.register(R.addDisposableDomListener(window,"resize",function(){return d._refreshRowsDimensions()}));return d}c(b,a);b.prototype.dispose=function(){a.prototype.dispose.call(this);this._terminal.element.removeChild(this._accessibilityTreeRoot);this._rowElements.length=0};b.prototype._onBoundaryFocus=function(a,b){var c=a.target,d=this._rowElements[0===b?1:this._rowElements.length-
2];c.getAttribute("aria-posinset")!==(0===b?"1":""+this._terminal.buffer.lines.length)&&a.relatedTarget===d&&(0===b?(d=c,c=this._rowElements.pop(),this._rowContainer.removeChild(c)):(d=this._rowElements.shift(),this._rowContainer.removeChild(d)),d.removeEventListener("focus",this._topBoundaryFocusListener),c.removeEventListener("focus",this._bottomBoundaryFocusListener),0===b?(c=this._createAccessibilityTreeNode(),this._rowElements.unshift(c),this._rowContainer.insertAdjacentElement("afterbegin",
c)):(c=this._createAccessibilityTreeNode(),this._rowElements.push(c),this._rowContainer.appendChild(c)),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===b?-1:1),this._rowElements[0===b?1:this._rowElements.length-2].focus(),a.preventDefault(),a.stopImmediatePropagation())};b.prototype._onResize=function(a){this._rowElements[this._rowElements.length-
1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var b=this._rowContainer.children.length;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);for(;this._rowElements.length>a;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener);this._refreshRowsDimensions()};b.prototype._createAccessibilityTreeNode=
function(){var a=document.createElement("div");a.setAttribute("role","listitem");a.tabIndex=-1;this._refreshRowDimensions(a);return a};b.prototype._onTab=function(a){for(var b=0;b<a;b++)this._onChar(" ")};b.prototype._onChar=function(a){var b=this;21>this._liveRegionLineCount&&(0<this._charsToConsume.length?this._charsToConsume.shift()!==a&&(this._charsToAnnounce+=a):this._charsToAnnounce+=a,"\n"===a&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=Lc.tooMuchOutput)),
ma.isMac&&this._liveRegion.textContent&&0<this._liveRegion.textContent.length&&!this._liveRegion.parentNode&&setTimeout(function(){b._accessibilityTreeRoot.appendChild(b._liveRegion)},0))};b.prototype._clearLiveRegion=function(){this._liveRegion.textContent="";this._liveRegionLineCount=0;ma.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)};b.prototype._onKey=function(a){this._clearLiveRegion();this._charsToConsume.push(a)};b.prototype._refreshRows=function(a,
b){this._renderRowsDebouncer.refresh(a,b,this._terminal.rows)};b.prototype._renderRows=function(a,b){for(var c=this._terminal.buffer,d=c.lines.length.toString();a<=b;a++){var e=c.translateBufferLineToString(c.ydisp+a,!0),f=(c.ydisp+a+1).toString(),g=this._rowElements[a];g&&(g.textContent=0===e.length?Lc.blankLine:e,g.setAttribute("aria-posinset",f),g.setAttribute("aria-setsize",d))}this._announceCharacters()};b.prototype._refreshRowsDimensions=function(){if(this._dimensions.actualCellHeight){this._rowElements.length!==
this._terminal.rows&&this._onResize(this._terminal.rows);for(var a=0;a<this._terminal.rows;a++)this._refreshRowDimensions(this._rowElements[a])}};b.prototype.setDimensions=function(a){this._dimensions=a;this._refreshRowsDimensions()};b.prototype._refreshRowDimensions=function(a){a.style.height=this._dimensions.actualCellHeight+"px"};b.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")};return b}(Pa.Disposable);
b.AccessibilityManager=a});E(df);var Fa=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.BOLD_CLASS="xterm-bold";b.DIM_CLASS="xterm-dim";b.ITALIC_CLASS="xterm-italic";b.UNDERLINE_CLASS="xterm-underline";b.CURSOR_CLASS="xterm-cursor";b.CURSOR_BLINK_CLASS="xterm-cursor-blink";b.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block";b.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar";b.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";a=function(){function a(a,b){this._terminalOptions=a;this._document=
b;this._workCell=new D.CellData}a.prototype.createRow=function(a,c,f,g,h,k,n){var d=this._document.createDocumentFragment(),e=0;for(n=Math.min(a.length,n)-1;0<=n;n--)if(a.loadCell(n,this._workCell).getCode()!==D.NULL_CELL_CODE||c&&n===g){e=n+1;break}for(n=0;n<e;n++){a.loadCell(n,this._workCell);var y=this._workCell.getWidth();if(0!==y){var u=this._document.createElement("span");1<y&&(u.style.width=k*y+"px");if(c&&n===g)switch(u.classList.add(b.CURSOR_CLASS),h&&u.classList.add(b.CURSOR_BLINK_CLASS),
f){case "bar":u.classList.add(b.CURSOR_STYLE_BAR_CLASS);break;case "underline":u.classList.add(b.CURSOR_STYLE_UNDERLINE_CLASS);break;default:u.classList.add(b.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&this._terminalOptions.enableBold&&u.classList.add(b.BOLD_CLASS);this._workCell.isItalic()&&u.classList.add(b.ITALIC_CLASS);this._workCell.isDim()&&u.classList.add(b.DIM_CLASS);this._workCell.isUnderline()&&u.classList.add(b.UNDERLINE_CLASS);u.textContent=this._workCell.getChars()||D.WHITESPACE_CELL_CHAR;
y=this._workCell.isInverse();if(this._workCell.isFgRGB()){var r=u.getAttribute("style")||"";r+=(y?"background-":"")+"color:rgb("+D.AttributeData.toColorRGB(this._workCell.getFgColor()).join(",")+");";u.setAttribute("style",r)}else this._workCell.isFgPalette()?(r=this._workCell.getFgColor(),this._workCell.isBold()&&8>r&&!y&&this._terminalOptions.enableBold&&this._terminalOptions.drawBoldTextInBrightColors&&(r+=8),u.classList.add("xterm-"+(y?"b":"f")+"g-"+r)):y&&u.classList.add("xterm-bg-"+ja.INVERTED_DEFAULT_COLOR);
this._workCell.isBgRGB()?(r=u.getAttribute("style")||"",r+=(y?"":"background-")+"color:rgb("+D.AttributeData.toColorRGB(this._workCell.getBgColor()).join(",")+");",u.setAttribute("style",r)):this._workCell.isBgPalette()?u.classList.add("xterm-"+(y?"f":"b")+"g-"+this._workCell.getBgColor()):y&&u.classList.add("xterm-fg-"+ja.INVERTED_DEFAULT_COLOR);d.appendChild(u)}}return d};return a}();b.DomRendererRowFactory=a});E(Fa);var Ri=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var d=1;a=function(a){function b(b,c){var e=a.call(this)||this;e._terminal=b;e._colors=c;e._terminalClass=d++;e._rowElements=[];e._rowContainer=document.createElement("div");
e._rowContainer.classList.add("xterm-rows");e._rowContainer.style.lineHeight="normal";e._rowContainer.setAttribute("aria-hidden","true");e._refreshRowElements(e._terminal.cols,e._terminal.rows);e._selectionContainer=document.createElement("div");e._selectionContainer.classList.add("xterm-selection");e._selectionContainer.setAttribute("aria-hidden","true");e.dimensions={scaledCharWidth:null,scaledCharHeight:null,scaledCellWidth:null,scaledCellHeight:null,scaledCharLeft:null,scaledCharTop:null,scaledCanvasWidth:null,
scaledCanvasHeight:null,canvasWidth:null,canvasHeight:null,actualCellWidth:null,actualCellHeight:null};e._updateDimensions();e._injectCss();e._rowFactory=new Fa.DomRendererRowFactory(b.options,document);e._terminal.element.classList.add("xterm-dom-renderer-owner-"+e._terminalClass);e._terminal.screenElement.appendChild(e._rowContainer);e._terminal.screenElement.appendChild(e._selectionContainer);e._terminal.linkifier.onLinkHover(function(a){return e._onLinkHover(a)});e._terminal.linkifier.onLinkLeave(function(a){return e._onLinkLeave(a)});
return e}c(b,a);b.prototype.dispose=function(){this._terminal.element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass);this._terminal.screenElement.removeChild(this._rowContainer);this._terminal.screenElement.removeChild(this._selectionContainer);this._terminal.screenElement.removeChild(this._themeStyleElement);this._terminal.screenElement.removeChild(this._dimensionsStyleElement);a.prototype.dispose.call(this)};b.prototype._updateDimensions=function(){var a=this;this.dimensions.scaledCharWidth=
this._terminal.charMeasure.width*window.devicePixelRatio;this.dimensions.scaledCharHeight=Math.ceil(this._terminal.charMeasure.height*window.devicePixelRatio);this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing);this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight);this.dimensions.scaledCharLeft=0;this.dimensions.scaledCharTop=0;this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*
this._terminal.cols;this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._terminal.rows;this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio);this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio);this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._terminal.cols;this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._terminal.rows;this._rowElements.forEach(function(b){b.style.width=
a.dimensions.canvasWidth+"px";b.style.height=a.dimensions.actualCellHeight+"px";b.style.lineHeight=a.dimensions.actualCellHeight+"px";b.style.overflow="hidden"});this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._dimensionsStyleElement));this._dimensionsStyleElement.innerHTML=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top;"+(" width: "+this.dimensions.actualCellWidth+
"px")+"}";this._selectionContainer.style.height=this._terminal._viewportElement.style.height;this._terminal.screenElement.style.width=this.dimensions.canvasWidth+"px";this._terminal.screenElement.style.height=this.dimensions.canvasHeight+"px"};b.prototype.setColors=function(a){this._colors=a;this._injectCss()};b.prototype._injectCss=function(){var a=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._terminal.screenElement.appendChild(this._themeStyleElement));
var b=this._terminalSelector+" .xterm-rows {"+(" color: "+this._colors.foreground.css+";")+(" background-color: "+this._colors.background.css+";")+(" font-family: "+this._terminal.options.fontFamily+";")+(" font-size: "+this._terminal.options.fontSize+"px;")+"}";b+=this._terminalSelector+" span:not(."+Fa.BOLD_CLASS+") {"+(" font-weight: "+this._terminal.options.fontWeight+";")+"}"+(this._terminalSelector+" span."+Fa.BOLD_CLASS+" {")+(" font-weight: "+this._terminal.options.fontWeightBold+";")+"}"+
(this._terminalSelector+" span."+Fa.ITALIC_CLASS+" {")+" font-style: italic;}";b+="@keyframes blink { 0% { opacity: 1.0; } 50% { opacity: 0.0; } 100% { opacity: 1.0; }}";b+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+Fa.CURSOR_CLASS+" {"+(" outline: 1px solid "+this._colors.cursor.css+";")+" outline-offset: -1px;}"+(this._terminalSelector+" .xterm-rows.xterm-focus ."+Fa.CURSOR_CLASS+"."+Fa.CURSOR_BLINK_CLASS+" {")+" animation: blink 1s step-end infinite;}"+(this._terminalSelector+" .xterm-rows.xterm-focus ."+
Fa.CURSOR_CLASS+"."+Fa.CURSOR_STYLE_BLOCK_CLASS+" {")+(" background-color: "+this._colors.cursor.css+";")+(" color: "+this._colors.cursorAccent.css+";")+"}"+(this._terminalSelector+" .xterm-rows.xterm-focus ."+Fa.CURSOR_CLASS+"."+Fa.CURSOR_STYLE_BAR_CLASS+" {")+(" box-shadow: 1px 0 0 "+this._colors.cursor.css+" inset;")+"}"+(this._terminalSelector+" .xterm-rows.xterm-focus ."+Fa.CURSOR_CLASS+"."+Fa.CURSOR_STYLE_UNDERLINE_CLASS+" {")+(" box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;")+"}";
b+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+(this._terminalSelector+" .xterm-selection div {")+" position: absolute;"+(" background-color: "+this._colors.selection.css+";")+"}";this._colors.ansi.forEach(function(c,d){b+=a._terminalSelector+" .xterm-fg-"+d+" { color: "+c.css+"; }"+(a._terminalSelector+" .xterm-bg-"+d+" { background-color: "+c.css+"; }")});b+=this._terminalSelector+" .xterm-fg-"+ja.INVERTED_DEFAULT_COLOR+" { color: "+
this._colors.background.css+"; }"+(this._terminalSelector+" .xterm-bg-"+ja.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }");this._themeStyleElement.innerHTML=b};b.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()};b.prototype._refreshRowElements=function(a,b){for(a=this._rowElements.length;a<=b;a++){var c=document.createElement("div");this._rowContainer.appendChild(c);this._rowElements.push(c)}for(;this._rowElements.length>b;)this._rowContainer.removeChild(this._rowElements.pop())};
b.prototype.onResize=function(a,b){this._refreshRowElements(a,b);this._updateDimensions()};b.prototype.onCharSizeChanged=function(){this._updateDimensions()};b.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")};b.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")};b.prototype.onSelectionChanged=function(a,b,c){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(a&&b){var d=
a[1]-this._terminal.buffer.ydisp,e=b[1]-this._terminal.buffer.ydisp,f=Math.max(d,0),g=Math.min(e,this._terminal.rows-1);if(!(f>=this._terminal.rows||0>g)){var h=document.createDocumentFragment();c?h.appendChild(this._createSelectionElement(f,a[0],b[0],g-f+1)):(h.appendChild(this._createSelectionElement(f,d===f?a[0]:0,f===g?b[0]:this._terminal.cols)),h.appendChild(this._createSelectionElement(f+1,0,this._terminal.cols,g-f-1)),f!==g&&h.appendChild(this._createSelectionElement(g,0,e===g?b[0]:this._terminal.cols)));
this._selectionContainer.appendChild(h)}}};b.prototype._createSelectionElement=function(a,b,c,d){void 0===d&&(d=1);var e=document.createElement("div");e.style.height=d*this.dimensions.actualCellHeight+"px";e.style.top=a*this.dimensions.actualCellHeight+"px";e.style.left=b*this.dimensions.actualCellWidth+"px";e.style.width=this.dimensions.actualCellWidth*(c-b)+"px";return e};b.prototype.onCursorMove=function(){};b.prototype.onOptionsChanged=function(){this._updateDimensions();this._injectCss();this._terminal.refresh(0,
this._terminal.rows-1)};b.prototype.clear=function(){this._rowElements.forEach(function(a){return a.innerHTML=""})};b.prototype.renderRows=function(a,b){for(var c=this._terminal,d=c.buffer.ybase+c.buffer.y,e=this._terminal.buffer.x,f=this._terminal.options.cursorBlink;a<=b;a++){var g=this._rowElements[a];g.innerHTML="";var h=a+c.buffer.ydisp,r=c.buffer.lines.get(h);g.appendChild(this._rowFactory.createRow(r,h===d,c.options.cursorStyle,e,f,this.dimensions.actualCellWidth,c.cols))}};Object.defineProperty(b.prototype,
"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!0,configurable:!0});b.prototype.registerCharacterJoiner=function(a){return-1};b.prototype.deregisterCharacterJoiner=function(a){return!1};b.prototype._onLinkHover=function(a){this._setCellUnderline(a.x1,a.x2,a.y1,a.y2,a.cols,!0)};b.prototype._onLinkLeave=function(a){this._setCellUnderline(a.x1,a.x2,a.y1,a.y2,a.cols,!1)};b.prototype._setCellUnderline=function(a,b,c,d,e,f){for(;a!==b||c!==d;){var g=
this._rowElements[c];if(!g)break;if(g=g.children[a])g.style.textDecoration=f?"underline":"none";++a>=e&&(a=0,c++)}};return b}(Pa.Disposable);b.DomRenderer=a});E(Ri);var Si=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],
221:["]","}"],222:["'",'"']};b.evaluateKeyboardEvent=function(a,b,f,g){var d={type:0,cancel:!1,key:void 0},e=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:"UIKeyInputUpArrow"===a.key?d.key=b?v.C0.ESC+"OA":v.C0.ESC+"[A":"UIKeyInputLeftArrow"===a.key?d.key=b?v.C0.ESC+"OD":v.C0.ESC+"[D":"UIKeyInputRightArrow"===a.key?d.key=b?v.C0.ESC+"OC":v.C0.ESC+"[C":"UIKeyInputDownArrow"===a.key&&(d.key=b?v.C0.ESC+"OB":v.C0.ESC+"[B");break;case 8:if(a.shiftKey){d.key=v.C0.BS;
break}else if(a.altKey){d.key=v.C0.ESC+v.C0.DEL;break}d.key=v.C0.DEL;break;case 9:if(a.shiftKey){d.key=v.C0.ESC+"[Z";break}d.key=v.C0.HT;d.cancel=!0;break;case 13:d.key=v.C0.CR;d.cancel=!0;break;case 27:d.key=v.C0.ESC;d.cancel=!0;break;case 37:e?(d.key=v.C0.ESC+"[1;"+(e+1)+"D",d.key===v.C0.ESC+"[1;3D"&&(d.key=f?v.C0.ESC+"b":v.C0.ESC+"[1;5D")):d.key=b?v.C0.ESC+"OD":v.C0.ESC+"[D";break;case 39:e?(d.key=v.C0.ESC+"[1;"+(e+1)+"C",d.key===v.C0.ESC+"[1;3C"&&(d.key=f?v.C0.ESC+"f":v.C0.ESC+"[1;5C")):d.key=
b?v.C0.ESC+"OC":v.C0.ESC+"[C";break;case 38:e?(d.key=v.C0.ESC+"[1;"+(e+1)+"A",d.key===v.C0.ESC+"[1;3A"&&(d.key=v.C0.ESC+"[1;5A")):d.key=b?v.C0.ESC+"OA":v.C0.ESC+"[A";break;case 40:e?(d.key=v.C0.ESC+"[1;"+(e+1)+"B",d.key===v.C0.ESC+"[1;3B"&&(d.key=v.C0.ESC+"[1;5B")):d.key=b?v.C0.ESC+"OB":v.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(d.key=v.C0.ESC+"[2~");break;case 46:d.key=e?v.C0.ESC+"[3;"+(e+1)+"~":v.C0.ESC+"[3~";break;case 36:d.key=e?v.C0.ESC+"[1;"+(e+1)+"H":b?v.C0.ESC+"OH":v.C0.ESC+"[H";
break;case 35:d.key=e?v.C0.ESC+"[1;"+(e+1)+"F":b?v.C0.ESC+"OF":v.C0.ESC+"[F";break;case 33:a.shiftKey?d.type=2:d.key=v.C0.ESC+"[5~";break;case 34:a.shiftKey?d.type=3:d.key=v.C0.ESC+"[6~";break;case 112:d.key=e?v.C0.ESC+"[1;"+(e+1)+"P":v.C0.ESC+"OP";break;case 113:d.key=e?v.C0.ESC+"[1;"+(e+1)+"Q":v.C0.ESC+"OQ";break;case 114:d.key=e?v.C0.ESC+"[1;"+(e+1)+"R":v.C0.ESC+"OR";break;case 115:d.key=e?v.C0.ESC+"[1;"+(e+1)+"S":v.C0.ESC+"OS";break;case 116:d.key=e?v.C0.ESC+"[15;"+(e+1)+"~":v.C0.ESC+"[15~";break;
case 117:d.key=e?v.C0.ESC+"[17;"+(e+1)+"~":v.C0.ESC+"[17~";break;case 118:d.key=e?v.C0.ESC+"[18;"+(e+1)+"~":v.C0.ESC+"[18~";break;case 119:d.key=e?v.C0.ESC+"[19;"+(e+1)+"~":v.C0.ESC+"[19~";break;case 120:d.key=e?v.C0.ESC+"[20;"+(e+1)+"~":v.C0.ESC+"[20~";break;case 121:d.key=e?v.C0.ESC+"[21;"+(e+1)+"~":v.C0.ESC+"[21~";break;case 122:d.key=e?v.C0.ESC+"[23;"+(e+1)+"~":v.C0.ESC+"[23~";break;case 123:d.key=e?v.C0.ESC+"[24;"+(e+1)+"~":v.C0.ESC+"[24~";break;default:!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?
f&&!g||!a.altKey||a.metaKey?f&&!a.altKey&&!a.ctrlKey&&a.metaKey?65===a.keyCode&&(d.type=1):a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&48<=a.keyCode&&1===a.key.length?d.key=a.key:a.key&&a.ctrlKey&&"_"===a.key&&(d.key=v.C0.US):(b=(b=c[a.keyCode])&&b[a.shiftKey?1:0])?d.key=v.C0.ESC+b:65<=a.keyCode&&90>=a.keyCode&&(d.key=v.C0.ESC+String.fromCharCode(a.ctrlKey?a.keyCode-64:a.keyCode+32)):65<=a.keyCode&&90>=a.keyCode?d.key=String.fromCharCode(a.keyCode-64):32===a.keyCode?d.key=String.fromCharCode(0):51<=
a.keyCode&&55>=a.keyCode?d.key=String.fromCharCode(a.keyCode-51+27):56===a.keyCode?d.key=String.fromCharCode(127):219===a.keyCode?d.key=String.fromCharCode(27):220===a.keyCode?d.key=String.fromCharCode(28):221===a.keyCode&&(d.key=String.fromCharCode(29))}return d}});E(Si);var Ti=C(function(a,b){function c(a,b){void 0===b&&(b=5);if("object"!==typeof a)return a;if(null===a)return null;var d=Array.isArray(a)?[]:{},e;for(e in a)d[e]=1>=b?a[e]:c(a[e],b-1);return d}Object.defineProperty(b,"__esModule",
{value:!0});b.clone=c});E(Ti);var ef=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.applyWindowsMode=function(a){return a.onLineFeed(function(){var b=a.buffer.lines.get(a.buffer.ybase+a.buffer.y-1).get(a.cols-1);a.buffer.lines.get(a.buffer.ybase+a.buffer.y).isWrapped=b[D.CHAR_DATA_CODE_INDEX]!==D.NULL_CELL_CODE&&b[D.CHAR_DATA_CODE_INDEX]!==D.WHITESPACE_CELL_CODE})}});E(ef);var Ui=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});a=function(a){function b(b,c,d){var e=a.call(this)||this;e._renderer=b;e._rowCount=c;e._isPaused=!1;e._needsFullRefresh=!1;e._canvasWidth=0;e._canvasHeight=0;e._onDimensionsChange=new U.EventEmitter2;e._onRender=
new U.EventEmitter2;e._onRefreshRequest=new U.EventEmitter2;e._renderDebouncer=new bf.RenderDebouncer(function(a,b){return e._renderRows(a,b)});e.register(e._renderDebouncer);e._screenDprMonitor=new cf.ScreenDprMonitor;e._screenDprMonitor.setListener(function(){return e._renderer.onDevicePixelRatioChange()});e.register(e._screenDprMonitor);e.register(R.addDisposableDomListener(window,"resize",function(){return e._renderer.onDevicePixelRatioChange()}));if("IntersectionObserver"in window){var f=new IntersectionObserver(function(a){return e._onIntersectionChange(a[a.length-
1])},{threshold:0});f.observe(d);e.register({dispose:function(){return f.disconnect()}})}return e}c(b,a);Object.defineProperty(b.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!0,configurable:!0});b.prototype._onIntersectionChange=function(a){this._isPaused=0===a.intersectionRatio;!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)};b.prototype.refreshRows=function(a,b){this._isPaused?this._needsFullRefresh=!0:this._renderDebouncer.refresh(a,b,this._rowCount)};b.prototype._renderRows=function(a,b){this._renderer.renderRows(a,
b);this._onRender.fire({start:a,end:b})};b.prototype.resize=function(a,b){this._rowCount=b;this._fireOnCanvasResize()};b.prototype.changeOptions=function(){this._renderer.onOptionsChanged();this._fireOnCanvasResize()};b.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)};b.prototype.setRenderer=function(a){this._renderer.dispose();this._renderer=
a};b.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount)};b.prototype.setColors=function(a){this._renderer.setColors(a);this._fullRefresh()};b.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange()};b.prototype.onResize=function(a,b){this._renderer.onResize(a,b);this._fullRefresh()};b.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()};b.prototype.onBlur=function(){this._renderer.onBlur()};
b.prototype.onFocus=function(){this._renderer.onFocus()};b.prototype.onSelectionChanged=function(a,b,c){this._renderer.onSelectionChanged(a,b,c)};b.prototype.onCursorMove=function(){this._renderer.onCursorMove()};b.prototype.onOptionsChanged=function(){this._renderer.onOptionsChanged()};b.prototype.clear=function(){this._renderer.clear()};b.prototype.registerCharacterJoiner=function(a){return this._renderer.registerCharacterJoiner(a)};b.prototype.deregisterCharacterJoiner=function(a){return this._renderer.deregisterCharacterJoiner(a)};
return b}(Pa.Disposable);b.RenderCoordinator=a});E(Ui);var Vi=C(function(a,b){var c=I&&I.__extends||function(){var a=function(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var d="undefined"!==typeof window?
window.document:null,e=["cols","rows"],f={cols:80,rows:24,convertEol:!1,termName:"xterm",cursorBlink:!1,cursorStyle:"block",bellSound:af.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,enableBold:!0,experimentalCharAtlas:"static",fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,scrollback:1E3,screenKeys:!1,screenReaderMode:!1,debug:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,cancelEvents:!1,
disableStdin:!1,useFlowControl:!1,allowTransparency:!1,tabStopWidth:8,theme:void 0,rightClickSelectsWord:ma.isMac,rendererType:"canvas",windowsMode:!1};a=function(a){function b(b){void 0===b&&(b={});var c=a.call(this)||this;c.browser=ma;c._blankLine=null;c._onCursorMove=new U.EventEmitter2;c._onData=new U.EventEmitter2;c._onKey=new U.EventEmitter2;c._onLineFeed=new U.EventEmitter2;c._onRender=new U.EventEmitter2;c._onResize=new U.EventEmitter2;c._onScroll=new U.EventEmitter2;c._onSelectionChange=
new U.EventEmitter2;c._onTitleChange=new U.EventEmitter2;c.options=Ti.clone(b);c._setup();c.onCursorMove(function(){return c.emit("cursormove")});c.onData(function(a){return c.emit("data",a)});c.onKey(function(a){return c.emit("key",a.key,a.domEvent)});c.onLineFeed(function(){return c.emit("linefeed")});c.onRender(function(a){return c.emit("refresh",a)});c.onResize(function(a){return c.emit("resize",a)});c.onSelectionChange(function(){return c.emit("selection")});c.onScroll(function(a){return c.emit("scroll",
a)});c.onTitleChange(function(a){return c.emit("title",a)});return c}c(b,a);Object.defineProperty(b.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onData",{get:function(){return this._onData.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!0,configurable:!0});b.prototype.dispose=function(){a.prototype.dispose.call(this);this._windowsMode&&(this._windowsMode.dispose(),this._windowsMode=void 0);this._customKeyEventHandler=null;Xe.removeTerminalFromCache(this);this.handler=function(){};this.write=function(){};this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element)};
b.prototype.destroy=function(){this.dispose()};b.prototype._setup=function(){var a=this;Object.keys(f).forEach(function(b){if(null===a.options[b]||void 0===a.options[b])a.options[b]=f[b]});this._parent=d?d.body:null;this.cols=Math.max(this.options.cols,2);this.rows=Math.max(this.options.rows,1);if(this.options.handler)this.onData(this.options.handler);this.cursorState=0;this.cursorHidden=!1;this._customKeyEventHandler=null;this.insertMode=this.originMode=this.applicationCursor=this.applicationKeypad=
!1;this.wraparoundMode=!0;this.bracketedPasteMode=!1;this.gcharset=this.charset=null;this.glevel=0;this.charsets=[null];this.curAttrData=D.DEFAULT_ATTR_DATA.clone();this._eraseAttrData=D.DEFAULT_ATTR_DATA.clone();this.params=[];this.currentParam=0;this.writeBuffer=[];this.writeBufferUtf8=[];this._userScrolling=this._xoffSentToCatchUp=this._writeInProgress=!1;this._inputHandler=new Bi.InputHandler(this);this._inputHandler.onCursorMove(function(){return a._onCursorMove.fire()});this._inputHandler.onLineFeed(function(){return a._onLineFeed.fire()});
this._inputHandler.onData(function(b){return a._onData.fire(b)});this.register(this._inputHandler);this.selectionManager=this.selectionManager||null;this.linkifier=this.linkifier||new Mi.Linkifier(this);this._mouseZoneManager=this._mouseZoneManager||null;this.soundManager=this.soundManager||new af.SoundManager(this);this.buffers=new wi.BufferSet(this);this.selectionManager&&(this.selectionManager.clearSelection(),this.selectionManager.initBuffersListeners());this.options.windowsMode&&(this._windowsMode=
ef.applyWindowsMode(this))};Object.defineProperty(b.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!0,configurable:!0});b.prototype.eraseAttrData=function(){this._eraseAttrData.bg&=-67108864;this._eraseAttrData.bg|=this.curAttrData.bg&67108863;return this._eraseAttrData};b.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})};Object.defineProperty(b.prototype,"isFocused",{get:function(){return d.activeElement===this.textarea&&d.hasFocus()},enumerable:!0,
configurable:!0});b.prototype.getOption=function(a){if(!(a in f))throw Error('No option with key "'+a+'"');return this.options[a]};b.prototype.setOption=function(a,b){if(!(a in f))throw Error('No option with key "'+a+'"');-1!==e.indexOf(a)&&console.error('Option "'+a+'" can only be set in the constructor');if(this.options[a]!==b){switch(a){case "bellStyle":b||(b="none");break;case "cursorStyle":b||(b="block");break;case "fontWeight":b||(b="normal");break;case "fontWeightBold":b||(b="bold");break;
case "lineHeight":if(1>b){console.warn(a+" cannot be less than 1, value: "+b);return}case "rendererType":b||(b="canvas");break;case "tabStopWidth":if(1>b){console.warn(a+" cannot be less than 1, value: "+b);return}break;case "theme":this._setTheme(b);break;case "scrollback":b=Math.min(b,Cd.MAX_BUFFER_SIZE);if(0>b){console.warn(a+" cannot be less than 0, value: "+b);return}if(this.options[a]!==b){var c=this.rows+b;if(this.buffer.lines.length>c){c=this.buffer.lines.length-c;var d=0>this.buffer.ydisp-
c;this.buffer.lines.trimStart(c);this.buffer.ybase=Math.max(this.buffer.ybase-c,0);this.buffer.ydisp=Math.max(this.buffer.ydisp-c,0);d&&this.refresh(0,this.rows-1)}}}this.options[a]=b;switch(a){case "fontFamily":case "fontSize":this._renderCoordinator&&(this._renderCoordinator.clear(),this.charMeasure.measure(this.options));break;case "drawBoldTextInBrightColors":case "experimentalCharAtlas":case "enableBold":case "letterSpacing":case "lineHeight":case "fontWeight":case "fontWeightBold":this._renderCoordinator&&
(this._renderCoordinator.clear(),this._renderCoordinator.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case "rendererType":this._renderCoordinator&&this._renderCoordinator.setRenderer(this._createRenderer());break;case "scrollback":this.buffers.resize(this.cols,this.rows);this.viewport&&this.viewport.syncScrollArea();break;case "screenReaderMode":b?!this._accessibilityManager&&this._renderCoordinator&&(this._accessibilityManager=new df.AccessibilityManager(this,this._renderCoordinator.dimensions)):
this._accessibilityManager&&(this._accessibilityManager.dispose(),this._accessibilityManager=null);break;case "tabStopWidth":this.buffers.setupTabStops();break;case "windowsMode":b?this._windowsMode||(this._windowsMode=ef.applyWindowsMode(this)):this._windowsMode&&(this._windowsMode.dispose(),this._windowsMode=void 0)}if(this._renderCoordinator)this._renderCoordinator.onOptionsChanged()}};b.prototype._onTextAreaFocus=function(a){this.sendFocus&&this.handler(v.C0.ESC+"[I");this.updateCursorStyle(a);
this.element.classList.add("focus");this.showCursor();this.emit("focus")};b.prototype.blur=function(){return this.textarea.blur()};b.prototype._onTextAreaBlur=function(){this.textarea.value="";this.refresh(this.buffer.y,this.buffer.y);this.sendFocus&&this.handler(v.C0.ESC+"[O");this.element.classList.remove("focus");this.emit("blur")};b.prototype._initGlobal=function(){var a=this;this._bindKeys();this.register(R.addDisposableDomListener(this.element,"copy",function(b){a.hasSelection()&&Nb.copyHandler(b,
a,a.selectionManager)}));var b=function(b){return Nb.pasteHandler(b,a)};this.register(R.addDisposableDomListener(this.textarea,"paste",b));this.register(R.addDisposableDomListener(this.element,"paste",b));ma.isFirefox?this.register(R.addDisposableDomListener(this.element,"mousedown",function(b){2===b.button&&Nb.rightClickHandler(b,a,a.selectionManager,a.options.rightClickSelectsWord)})):this.register(R.addDisposableDomListener(this.element,"contextmenu",function(b){Nb.rightClickHandler(b,a,a.selectionManager,
a.options.rightClickSelectsWord)}));ma.isLinux&&this.register(R.addDisposableDomListener(this.element,"auxclick",function(b){1===b.button&&Nb.moveTextAreaUnderMouseCursor(b,a)}))};b.prototype._bindKeys=function(){var a=this,b=this;this.register(R.addDisposableDomListener(this.element,"keydown",function(a){d.activeElement===this&&b._keyDown(a)},!0));this.register(R.addDisposableDomListener(this.element,"keypress",function(a){d.activeElement===this&&b._keyPress(a)},!0));this.register(R.addDisposableDomListener(this.element,
"keyup",function(c){16!==c.keyCode&&17!==c.keyCode&&18!==c.keyCode&&a.focus();b._keyUp(c)},!0));this.register(R.addDisposableDomListener(this.textarea,"keydown",function(b){return a._keyDown(b)},!0));this.register(R.addDisposableDomListener(this.textarea,"keypress",function(b){return a._keyPress(b)},!0));this.register(R.addDisposableDomListener(this.textarea,"compositionstart",function(){return a._compositionHelper.compositionstart()}));this.register(R.addDisposableDomListener(this.textarea,"compositionupdate",
function(b){return a._compositionHelper.compositionupdate(b)}));this.register(R.addDisposableDomListener(this.textarea,"compositionend",function(){return a._compositionHelper.compositionend()}));this.register(this.onRender(function(){return a._compositionHelper.updateCompositionElements()}));this.register(this.onRender(function(b){return a._queueLinkification(b.start,b.end)}))};b.prototype.open=function(a){var b=this;this._parent=a||this._parent;if(!this._parent)throw Error("Terminal requires a parent element.");
this._context=this._parent.ownerDocument.defaultView;this._document=this._parent.ownerDocument;this.element=this._document.createElement("div");this.element.dir="ltr";this.element.classList.add("terminal");this.element.classList.add("xterm");this.element.setAttribute("tabindex","0");this._parent.appendChild(this.element);a=d.createDocumentFragment();this._viewportElement=d.createElement("div");this._viewportElement.classList.add("xterm-viewport");a.appendChild(this._viewportElement);this._viewportScrollArea=
d.createElement("div");this._viewportScrollArea.classList.add("xterm-scroll-area");this._viewportElement.appendChild(this._viewportScrollArea);this.screenElement=d.createElement("div");this.screenElement.classList.add("xterm-screen");this._helperContainer=d.createElement("div");this._helperContainer.classList.add("xterm-helpers");this.screenElement.appendChild(this._helperContainer);a.appendChild(this.screenElement);this._mouseZoneManager=new Ze.MouseZoneManager(this);this.register(this._mouseZoneManager);
this.register(this.onScroll(function(){return b._mouseZoneManager.clearAll()}));this.linkifier.attachToDom(this._mouseZoneManager);this.textarea=d.createElement("textarea");this.textarea.classList.add("xterm-helper-textarea");this.textarea.setAttribute("aria-label",Lc.promptLabel);this.textarea.setAttribute("aria-multiline","false");this.textarea.setAttribute("autocorrect","off");this.textarea.setAttribute("autocapitalize","off");this.textarea.setAttribute("spellcheck","false");this.textarea.tabIndex=
0;this.register(R.addDisposableDomListener(this.textarea,"focus",function(a){return b._onTextAreaFocus(a)}));this.register(R.addDisposableDomListener(this.textarea,"blur",function(){return b._onTextAreaBlur()}));this._helperContainer.appendChild(this.textarea);this._compositionView=d.createElement("div");this._compositionView.classList.add("composition-view");this._compositionHelper=new xi.CompositionHelper(this.textarea,this._compositionView,this);this._helperContainer.appendChild(this._compositionView);
this.charMeasure=new Qi.CharMeasure(d,this._helperContainer);this.element.appendChild(a);this._theme=this.options.theme;this._colorManager=new Ve.ColorManager(d,this.options.allowTransparency);this._colorManager.setTheme(this._theme);a=this._createRenderer();this._renderCoordinator=new Ui.RenderCoordinator(a,this.rows,this.screenElement);this._renderCoordinator.onRender(function(a){return b._onRender.fire(a)});this.onResize(function(a){return b._renderCoordinator.resize(a.cols,a.rows)});this.viewport=
new zi.Viewport(this,this._viewportElement,this._viewportScrollArea,this.charMeasure,this._renderCoordinator.dimensions);this.viewport.onThemeChange(this._colorManager.colors);this.register(this.viewport);this.register(this.onCursorMove(function(){return b._renderCoordinator.onCursorMove()}));this.register(this.onResize(function(){return b._renderCoordinator.onResize(b.cols,b.rows)}));this.register(this.addDisposableListener("blur",function(){return b._renderCoordinator.onBlur()}));this.register(this.addDisposableListener("focus",
function(){return b._renderCoordinator.onFocus()}));this.register(this.charMeasure.onCharSizeChanged(function(){return b._renderCoordinator.onCharSizeChanged()}));this.register(this._renderCoordinator.onDimensionsChange(function(){return b.viewport.syncScrollArea()}));this.selectionManager=new Pi.SelectionManager(this,this.charMeasure);this.register(this.selectionManager.onSelectionChange(function(){return b._onSelectionChange.fire()}));this.register(R.addDisposableDomListener(this.element,"mousedown",
function(a){return b.selectionManager.onMouseDown(a)}));this.register(this.selectionManager.onRedrawRequest(function(a){return b._renderCoordinator.onSelectionChanged(a.start,a.end,a.columnSelectMode)}));this.register(this.selectionManager.onLinuxMouseSelection(function(a){b.textarea.value=a;b.textarea.focus();b.textarea.select()}));this.register(this.onScroll(function(){b.viewport.syncScrollArea();b.selectionManager.refresh()}));this.register(R.addDisposableDomListener(this._viewportElement,"scroll",
function(){return b.selectionManager.refresh()}));this.mouseHelper=new $e.MouseHelper(this._renderCoordinator);this.element.classList.toggle("enable-mouse-events",this.mouseEvents);this.mouseEvents?this.selectionManager.disable():this.selectionManager.enable();this.options.screenReaderMode&&(this._accessibilityManager=new df.AccessibilityManager(this,this._renderCoordinator.dimensions),this._accessibilityManager.register(this._renderCoordinator.onDimensionsChange(function(a){return b._accessibilityManager.setDimensions(a)})));
this.charMeasure.measure(this.options);this.refresh(0,this.rows-1);this._initGlobal();this.bindMouse()};b.prototype._createRenderer=function(){switch(this.options.rendererType){case "canvas":return new Li.Renderer(this,this._colorManager.colors);case "dom":return new Ri.DomRenderer(this,this._colorManager.colors);default:throw Error('Unrecognized rendererType "'+this.options.rendererType+'"');}};b.prototype._setTheme=function(a){this._theme=a;this._colorManager&&this._colorManager.setTheme(a);this._renderCoordinator&&
this._renderCoordinator.setColors(this._colorManager.colors);if(this.viewport)this.viewport.onThemeChange(this._colorManager.colors)};b.prototype.bindMouse=function(){function a(a){switch(a.overrideType||a.type){case "mousedown":var b=null!==a.button&&void 0!==a.button?+a.button:null!==a.which&&void 0!==a.which?a.which-1:null;ma.isMSIE&&(b=1===b?0:4===b?1:b);break;case "mouseup":b=3;break;case "DOMMouseScroll":b=0>a.detail?64:65;break;case "wheel":b=0>a.deltaY?64:65}var d=a.shiftKey?4:0;var e=a.metaKey?
8:0;var h=a.ctrlKey?16:0;d=d|e|h;f.vt200Mouse?d&=h:f.normalMouse||(d=0);b=32+(d<<2)+b;if(h=f.mouseHelper.getRawByteCoords(a,f.screenElement,f.charMeasure,f.cols,f.rows))switch(c(b,h),a.overrideType||a.type){case "mousedown":g=b;break;case "mouseup":g=32}}function b(a,b){if(!f.utfMouse){if(255===b){a.push(0);return}127<b&&(b=127)}else if(2047<b){a.push(2047);return}a.push(b)}function c(a,c){if(f._vt300Mouse){a&=3;c.x-=32;c.y-=32;var d=v.C0.ESC+"[24";if(0===a)d+="1";else if(1===a)d+="3";else if(2===
a)d+="5";else{if(3===a)return;d+="0"}d+="~["+c.x+","+c.y+"]\r";f.handler(d)}else f._decLocator?(a&=3,c.x-=32,c.y-=32,0===a?a=2:1===a?a=4:2===a?a=6:3===a&&(a=3),f.handler(v.C0.ESC+"["+a+";"+(3===a?4:0)+";"+c.y+";"+c.x+";"+c.page||"0&w")):f.urxvtMouse?(c.x-=32,c.y-=32,c.x++,c.y++,f.handler(v.C0.ESC+"["+a+";"+c.x+";"+c.y+"M")):f.sgrMouse?(c.x-=32,c.y-=32,f.handler(v.C0.ESC+"[<"+((3===(a&3)?a&-4:a)-32)+";"+c.x+";"+c.y+(3===(a&3)?"m":"M"))):(d=[],b(d,a),b(d,c.x),b(d,c.y),f.handler(v.C0.ESC+"[M"+String.fromCharCode.apply(String,
d)))}var d=this,e=this.element,f=this,g=32;this.register(R.addDisposableDomListener(e,"mousedown",function(b){b.preventDefault();d.focus();if(d.mouseEvents&&!d.selectionManager.shouldForceSelection(b)){a(b);if(d.vt200Mouse)return b.overrideType="mouseup",a(b),d.cancel(b);if(d.normalMouse){var e=function(a){if(d.normalMouse){var b=g;(a=f.mouseHelper.getRawByteCoords(a,f.screenElement,f.charMeasure,f.cols,f.rows))&&c(b+32,a)}};d._document.addEventListener("mousemove",e)}var h=function(b){d.normalMouse&&
!d.x10Mouse&&a(b);e&&(d._document.removeEventListener("mousemove",e),e=null);d._document.removeEventListener("mouseup",h);return d.cancel(b)};d._document.addEventListener("mouseup",h);return d.cancel(b)}}));this.register(R.addDisposableDomListener(e,"wheel",function(b){if(d.mouseEvents)d.x10Mouse||d._vt300Mouse||d._decLocator||(a(b),b.preventDefault());else if(!d.buffer.hasScrollback){var c=d.viewport.getLinesScrolled(b);if(0!==c){b=v.C0.ESC+(d.applicationCursor?"O":"[")+(0>b.deltaY?"A":"B");for(var e=
"",f=0;f<Math.abs(c);f++)e+=b;d.handler(e)}}}));this.register(R.addDisposableDomListener(e,"wheel",function(a){if(!d.mouseEvents)return d.viewport.onWheel(a),d.cancel(a)}));this.register(R.addDisposableDomListener(e,"touchstart",function(a){if(!d.mouseEvents)return d.viewport.onTouchStart(a),d.cancel(a)}));this.register(R.addDisposableDomListener(e,"touchmove",function(a){if(!d.mouseEvents)return d.viewport.onTouchMove(a),d.cancel(a)}))};b.prototype.refresh=function(a,b){this._renderCoordinator&&
this._renderCoordinator.refreshRows(a,b)};b.prototype._queueLinkification=function(a,b){this.linkifier&&this.linkifier.linkifyRows(a,b)};b.prototype.updateCursorStyle=function(a){this.selectionManager&&this.selectionManager.shouldColumnSelect(a)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")};b.prototype.showCursor=function(){this.cursorState||(this.cursorState=1,this.refresh(this.buffer.y,this.buffer.y))};b.prototype.scroll=function(a){void 0===a&&(a=!1);
var b=this._blankLine;var c=this.eraseAttrData();b&&b.length===this.cols&&b.getFg(0)===c.fg&&b.getBg(0)===c.bg||(this._blankLine=b=this.buffer.getBlankLine(c,a));b.isWrapped=a;c=this.buffer.ybase+this.buffer.scrollTop;a=this.buffer.ybase+this.buffer.scrollBottom;0===this.buffer.scrollTop?(c=this.buffer.lines.isFull,a===this.buffer.lines.length-1?c?this.buffer.lines.recycle().copyFrom(b):this.buffer.lines.push(b.clone()):this.buffer.lines.splice(a+1,0,b.clone()),c)?this._userScrolling&&(this.buffer.ydisp=
Math.max(this.buffer.ydisp-1,0)):(this.buffer.ybase++,this._userScrolling||this.buffer.ydisp++):(this.buffer.lines.shiftElements(c+1,a-c+1-1,-1),this.buffer.lines.set(a,b.clone()));this._userScrolling||(this.buffer.ydisp=this.buffer.ybase);this.updateRange(this.buffer.scrollTop);this.updateRange(this.buffer.scrollBottom);this._onScroll.fire(this.buffer.ydisp)};b.prototype.scrollLines=function(a,b){if(0>a){if(0===this.buffer.ydisp)return;this._userScrolling=!0}else a+this.buffer.ydisp>=this.buffer.ybase&&
(this._userScrolling=!1);var c=this.buffer.ydisp;this.buffer.ydisp=Math.max(Math.min(this.buffer.ydisp+a,this.buffer.ybase),0);c!==this.buffer.ydisp&&(b||this._onScroll.fire(this.buffer.ydisp),this.refresh(0,this.rows-1))};b.prototype.scrollPages=function(a){this.scrollLines(a*(this.rows-1))};b.prototype.scrollToTop=function(){this.scrollLines(-this.buffer.ydisp)};b.prototype.scrollToBottom=function(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)};b.prototype.scrollToLine=function(a){a-=this.buffer.ydisp;
0!==a&&this.scrollLines(a)};b.prototype.writeUtf8=function(a){var b=this;!this._isDisposed&&a&&(this.writeBufferUtf8.push(a),this.options.useFlowControl&&!this._xoffSentToCatchUp&&5<=this.writeBufferUtf8.length&&(this.handler(v.C0.DC3),this._xoffSentToCatchUp=!0),!this._writeInProgress&&0<this.writeBufferUtf8.length&&(this._writeInProgress=!0,setTimeout(function(){b._innerWriteUtf8()})))};b.prototype._innerWriteUtf8=function(a){var b=this;void 0===a&&(a=0);this._isDisposed&&(this.writeBufferUtf8=
[]);for(var c=Date.now();this.writeBufferUtf8.length>a;){var d=this.writeBufferUtf8[a];a++;this._xoffSentToCatchUp&&this.writeBufferUtf8.length===a&&(this.handler(v.C0.DC1),this._xoffSentToCatchUp=!1);this._refreshEnd=this._refreshStart=this.buffer.y;this._inputHandler.parseUtf8(d);this.updateRange(this.buffer.y);this.refresh(this._refreshStart,this._refreshEnd);if(12<=Date.now()-c)break}this.writeBufferUtf8.length>a?(50<a&&(this.writeBufferUtf8=this.writeBufferUtf8.slice(a),a=0),setTimeout(function(){return b._innerWriteUtf8(a)},
0)):(this._writeInProgress=!1,this.writeBufferUtf8=[])};b.prototype.write=function(a){var b=this;!this._isDisposed&&a&&(this.writeBuffer.push(a),this.options.useFlowControl&&!this._xoffSentToCatchUp&&5<=this.writeBuffer.length&&(this.handler(v.C0.DC3),this._xoffSentToCatchUp=!0),!this._writeInProgress&&0<this.writeBuffer.length&&(this._writeInProgress=!0,setTimeout(function(){b._innerWrite()})))};b.prototype._innerWrite=function(a){var b=this;void 0===a&&(a=0);this._isDisposed&&(this.writeBuffer=
[]);for(var c=Date.now();this.writeBuffer.length>a;){var d=this.writeBuffer[a];a++;this._xoffSentToCatchUp&&this.writeBuffer.length===a&&(this.handler(v.C0.DC1),this._xoffSentToCatchUp=!1);this._refreshEnd=this._refreshStart=this.buffer.y;this._inputHandler.parse(d);this.updateRange(this.buffer.y);this.refresh(this._refreshStart,this._refreshEnd);if(12<=Date.now()-c)break}this.writeBuffer.length>a?(50<a&&(this.writeBuffer=this.writeBuffer.slice(a),a=0),setTimeout(function(){return b._innerWrite(a)},
0)):(this._writeInProgress=!1,this.writeBuffer=[])};b.prototype.writeln=function(a){this.write(a+"\r\n")};b.prototype.attachCustomKeyEventHandler=function(a){this._customKeyEventHandler=a};b.prototype.addCsiHandler=function(a,b){return this._inputHandler.addCsiHandler(a,b)};b.prototype.addOscHandler=function(a,b){return this._inputHandler.addOscHandler(a,b)};b.prototype.registerLinkMatcher=function(a,b,c){a=this.linkifier.registerLinkMatcher(a,b,c);this.refresh(0,this.rows-1);return a};b.prototype.deregisterLinkMatcher=
function(a){this.linkifier.deregisterLinkMatcher(a)&&this.refresh(0,this.rows-1)};b.prototype.registerCharacterJoiner=function(a){a=this._renderCoordinator.registerCharacterJoiner(a);this.refresh(0,this.rows-1);return a};b.prototype.deregisterCharacterJoiner=function(a){this._renderCoordinator.deregisterCharacterJoiner(a)&&this.refresh(0,this.rows-1)};Object.defineProperty(b.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!0,configurable:!0});b.prototype.addMarker=function(a){if(this.buffer===
this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+a)};b.prototype.hasSelection=function(){return this.selectionManager?this.selectionManager.hasSelection:!1};b.prototype.select=function(a,b,c){this.selectionManager.setSelection(a,b,c)};b.prototype.getSelection=function(){return this.selectionManager?this.selectionManager.selectionText:""};b.prototype.getSelectionPosition=function(){if(this.selectionManager.hasSelection)return{startColumn:this.selectionManager.selectionStart[0],
startRow:this.selectionManager.selectionStart[1],endColumn:this.selectionManager.selectionEnd[0],endRow:this.selectionManager.selectionEnd[1]}};b.prototype.clearSelection=function(){this.selectionManager&&this.selectionManager.clearSelection()};b.prototype.selectAll=function(){this.selectionManager&&this.selectionManager.selectAll()};b.prototype.selectLines=function(a,b){this.selectionManager&&this.selectionManager.selectLines(a,b)};b.prototype._keyDown=function(a){if(this._customKeyEventHandler&&
!1===this._customKeyEventHandler(a))return!1;if(!this._compositionHelper.keydown(a))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var b=Si.evaluateKeyboardEvent(a,this.applicationCursor,this.browser.isMac,this.options.macOptionIsMeta);this.updateCursorStyle(a);if(3===b.type||2===b.type){var c=this.rows-1;this.scrollLines(2===b.type?-c:c);return this.cancel(a,!0)}1===b.type&&this.selectAll();if(this._isThirdLevelShift(this.browser,a))return!0;b.cancel&&this.cancel(a,!0);if(!b.key)return!0;
this.emit("keydown",a);this._onKey.fire({key:b.key,domEvent:a});this.showCursor();this.handler(b.key);return this.cancel(a,!0)};b.prototype._isThirdLevelShift=function(a,b){a=a.isMac&&!this.options.macOptionIsMeta&&b.altKey&&!b.ctrlKey&&!b.metaKey||a.isMSWindows&&b.altKey&&b.ctrlKey&&!b.metaKey;return"keypress"===b.type?a:a&&(!b.keyCode||47<b.keyCode)};b.prototype.setgLevel=function(a){this.glevel=a;this.charset=this.charsets[a]};b.prototype.setgCharset=function(a,b){this.charsets[a]=b;this.glevel===
a&&(this.charset=b)};b.prototype._keyUp=function(a){this.updateCursorStyle(a)};b.prototype._keyPress=function(a){if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(a))return!1;this.cancel(a);if(a.charCode)var b=a.charCode;else if(null===a.which||void 0===a.which)b=a.keyCode;else if(0!==a.which&&0!==a.charCode)b=a.which;else return!1;if(!b||(a.altKey||a.ctrlKey||a.metaKey)&&!this._isThirdLevelShift(this.browser,a))return!1;b=String.fromCharCode(b);this.emit("keypress",b,a);this._onKey.fire({key:b,
domEvent:a});this.showCursor();this.handler(b);return!0};b.prototype.bell=function(){var a=this;this.emit("bell");this._soundBell()&&this.soundManager.playBellSound();this._visualBell()&&(this.element.classList.add("visual-bell-active"),clearTimeout(this._visualBellTimer),this._visualBellTimer=window.setTimeout(function(){a.element.classList.remove("visual-bell-active")},200))};b.prototype.log=function(a,b){this.options.debug&&this._context.console&&this._context.console.log&&this._context.console.log(a,
b)};b.prototype.error=function(a,b){this.options.debug&&this._context.console&&this._context.console.error&&this._context.console.error(a,b)};b.prototype.resize=function(a,b){isNaN(a)||isNaN(b)||(a===this.cols&&b===this.rows?!this.charMeasure||this.charMeasure.width&&this.charMeasure.height||this.charMeasure.measure(this.options):(2>a&&(a=2),1>b&&(b=1),this.buffers.resize(a,b),this.cols=a,this.rows=b,this.buffers.setupTabStops(this.cols),this.charMeasure&&this.charMeasure.measure(this.options),this.refresh(0,
this.rows-1),this._onResize.fire({cols:a,rows:b})))};b.prototype.updateRange=function(a){a<this._refreshStart&&(this._refreshStart=a);a>this._refreshEnd&&(this._refreshEnd=a)};b.prototype.maxRange=function(){this._refreshStart=0;this._refreshEnd=this.rows-1};b.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y));this.buffer.lines.length=1;this.buffer.ydisp=0;this.buffer.ybase=0;this.buffer.y=0;for(var a=
1;a<this.rows;a++)this.buffer.lines.push(this.buffer.getBlankLine(D.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1);this._onScroll.fire(this.buffer.ydisp)}};b.prototype.is=function(a){return 0===(this.options.termName+"").indexOf(a)};b.prototype.handler=function(a){this.options.disableStdin||(this.selectionManager&&this.selectionManager.hasSelection&&this.selectionManager.clearSelection(),this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),this._onData.fire(a))};b.prototype.handleTitle=function(a){this._onTitleChange.fire(a)};
b.prototype.index=function(){this.buffer.y++;this.buffer.y>this.buffer.scrollBottom&&(this.buffer.y--,this.scroll());this.buffer.x>=this.cols&&this.buffer.x--};b.prototype.reverseIndex=function(){this.buffer.y===this.buffer.scrollTop?(this.buffer.lines.shiftElements(this.buffer.y+this.buffer.ybase,this.buffer.scrollBottom-this.buffer.scrollTop,1),this.buffer.lines.set(this.buffer.y+this.buffer.ybase,this.buffer.getBlankLine(this.eraseAttrData())),this.updateRange(this.buffer.scrollTop),this.updateRange(this.buffer.scrollBottom)):
this.buffer.y--};b.prototype.reset=function(){this.options.rows=this.rows;this.options.cols=this.cols;var a=this._customKeyEventHandler,b=this._inputHandler,c=this.cursorState,d=this.writeBuffer,e=this.writeBufferUtf8,f=this._writeInProgress,g=this._xoffSentToCatchUp,h=this._userScrolling;this._setup();this._customKeyEventHandler=a;this._inputHandler=b;this.cursorState=c;this.writeBuffer=d;this.writeBufferUtf8=e;this._writeInProgress=f;this._xoffSentToCatchUp=g;this._userScrolling=h;this.refresh(0,
this.rows-1);this.viewport&&this.viewport.syncScrollArea()};b.prototype.tabSet=function(){this.buffer.tabs[this.buffer.x]=!0};b.prototype.cancel=function(a,b){if(this.options.cancelEvents||b)return a.preventDefault(),a.stopPropagation(),!1};b.prototype._visualBell=function(){return!1};b.prototype._soundBell=function(){return"sound"===this.options.bellStyle};return b}(yi.EventEmitter);b.Terminal=a});E(Vi);var Wi=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this._addons=
[]}a.prototype.dispose=function(){for(var a=this._addons.length-1;0<=a;a--)this._addons[a].instance.dispose()};a.prototype.loadAddon=function(a,b){var c=this,d={instance:b,dispose:b.dispose,isDisposed:!1};this._addons.push(d);b.dispose=function(){return c._wrappedAddonDispose(d)};b.activate(a)};a.prototype._wrappedAddonDispose=function(a){if(!a.isDisposed){for(var b=-1,c=0;c<this._addons.length;c++)if(this._addons[c]===a){b=c;break}if(-1===b)throw Error("Could not dispose an addon that has not been loaded");
a.isDisposed=!0;a.dispose.apply(a.instance);this._addons.splice(b,1)}};return a}();b.AddonManager=a});E(Wi);var Xi=C(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(a){this._core=new Vi.Terminal(a);this._addonManager=new Wi.AddonManager}Object.defineProperty(a.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onData",{get:function(){return this._core.onData},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"element",{get:function(){return this._core.element},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"textarea",{get:function(){return this._core.textarea},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rows",{get:function(){return this._core.rows},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cols",{get:function(){return this._core.cols},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"buffer",{get:function(){return new c(this._core.buffer)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"markers",{get:function(){return this._core.markers},
enumerable:!0,configurable:!0});a.prototype.blur=function(){this._core.blur()};a.prototype.focus=function(){this._core.focus()};a.prototype.on=function(a,b){this._core.on(a,b)};a.prototype.off=function(a,b){this._core.off(a,b)};a.prototype.emit=function(a,b){this._core.emit(a,b)};a.prototype.addDisposableListener=function(a,b){return this._core.addDisposableListener(a,b)};a.prototype.resize=function(a,b){this._core.resize(a,b)};a.prototype.writeln=function(a){this._core.writeln(a)};a.prototype.open=
function(a){this._core.open(a)};a.prototype.attachCustomKeyEventHandler=function(a){this._core.attachCustomKeyEventHandler(a)};a.prototype.addCsiHandler=function(a,b){return this._core.addCsiHandler(a,b)};a.prototype.addOscHandler=function(a,b){return this._core.addOscHandler(a,b)};a.prototype.registerLinkMatcher=function(a,b,c){return this._core.registerLinkMatcher(a,b,c)};a.prototype.deregisterLinkMatcher=function(a){this._core.deregisterLinkMatcher(a)};a.prototype.registerCharacterJoiner=function(a){return this._core.registerCharacterJoiner(a)};
a.prototype.deregisterCharacterJoiner=function(a){this._core.deregisterCharacterJoiner(a)};a.prototype.addMarker=function(a){return this._core.addMarker(a)};a.prototype.hasSelection=function(){return this._core.hasSelection()};a.prototype.select=function(a,b,c){this._core.select(a,b,c)};a.prototype.getSelection=function(){return this._core.getSelection()};a.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()};a.prototype.clearSelection=function(){this._core.clearSelection()};
a.prototype.selectAll=function(){this._core.selectAll()};a.prototype.selectLines=function(a,b){this._core.selectLines(a,b)};a.prototype.dispose=function(){this._addonManager.dispose();this._core.dispose()};a.prototype.destroy=function(){this._core.destroy()};a.prototype.scrollLines=function(a){this._core.scrollLines(a)};a.prototype.scrollPages=function(a){this._core.scrollPages(a)};a.prototype.scrollToTop=function(){this._core.scrollToTop()};a.prototype.scrollToBottom=function(){this._core.scrollToBottom()};
a.prototype.scrollToLine=function(a){this._core.scrollToLine(a)};a.prototype.clear=function(){this._core.clear()};a.prototype.write=function(a){this._core.write(a)};a.prototype.writeUtf8=function(a){this._core.writeUtf8(a)};a.prototype.getOption=function(a){return this._core.getOption(a)};a.prototype.setOption=function(a,b){this._core.setOption(a,b)};a.prototype.refresh=function(a,b){this._core.refresh(a,b)};a.prototype.reset=function(){this._core.reset()};a.applyAddon=function(b){b.apply(a)};a.prototype.loadAddon=
function(a){return this._addonManager.loadAddon(this,a)};Object.defineProperty(a,"strings",{get:function(){return Lc},enumerable:!0,configurable:!0});return a}();b.Terminal=a;var c=function(){function a(a){this._buffer=a}Object.defineProperty(a.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"viewportY",{get:function(){return this._buffer.ydisp},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!0,configurable:!0});a.prototype.getLine=function(a){if(a=this._buffer.lines.get(a))return new d(a)};return a}(),d=function(){function a(a){this._line=a}Object.defineProperty(a.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!0,
configurable:!0});a.prototype.getCell=function(a){if(!(0>a||a>=this._line.length))return new e(this._line,a)};a.prototype.translateToString=function(a,b,c){return this._line.translateToString(a,b,c)};return a}(),e=function(){function a(a,b){this._line=a;this._x=b}Object.defineProperty(a.prototype,"char",{get:function(){return this._line.getString(this._x)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"width",{get:function(){return this._line.getWidth(this._x)},enumerable:!0,configurable:!0});
return a}()});E(Xi);var Yi=Xi.Terminal,Mc=C(function(a,b){function c(a){if(!a.element.parentElement)return null;var b=window.getComputedStyle(a.element.parentElement),c=parseInt(b.getPropertyValue("height"));b=Math.max(0,parseInt(b.getPropertyValue("width")));var d=window.getComputedStyle(a.element),e=parseInt(d.getPropertyValue("padding-top")),n=parseInt(d.getPropertyValue("padding-bottom")),p=parseInt(d.getPropertyValue("padding-right"));d=parseInt(d.getPropertyValue("padding-left"));return{cols:Math.floor((b-
(p+d)-a._core.viewport.scrollBarWidth)/a._core._renderCoordinator.dimensions.actualCellWidth),rows:Math.floor((c-(e+n))/a._core._renderCoordinator.dimensions.actualCellHeight)}}function d(a){var b=c(a);!b||a.rows===b.rows&&a.cols===b.cols||(a._core._renderCoordinator.clear(),a.resize(b.cols,b.rows))}Object.defineProperty(b,"__esModule",{value:!0});b.proposeGeometry=c;b.fit=d;b.apply=function(a){a.prototype.proposeGeometry=function(){return c(this)};a.prototype.fit=function(){d(this)}}}),zl=E(Mc),
Al=Object.freeze({__proto__:null,"default":zl,__moduleExports:Mc,proposeGeometry:Mc.proposeGeometry,fit:Mc.fit,apply:Mc.apply}),Zi=C(function(a,b){!function(b,d){a.exports=d()}(window,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&
Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if((1&c&&(a=b(a)),8&c)||4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),
c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,e){function c(a,b){window.open(b,"_blank")}Object.defineProperty(b,"__esModule",{value:!0});var d=/(?:^|[^\da-z\.-]+)((https?:\/\/)((([\da-z\.-]+)\.([a-z\.]{2,6}))|((\d{1,3}\.){3}\d{1,3})|(localhost))(:\d{1,5})?((\/[\/\w\.\-%~:+]*)*([^:"'\s]))?(\?[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?(#[0-9\w\[\]\(\)\/\?\!#@$%&'*+,:;~\=\.\-]*)?)($|[^\/\w\.\-%]+)/;a=function(){function a(a,b){void 0===a&&(a=c);
void 0===b&&(b={});this._handler=a;this._options=b;this._options.matchIndex=1}return a.prototype.activate=function(a){this._terminal=a;this._linkMatcherId=this._terminal.registerLinkMatcher(d,this._handler,this._options)},a.prototype.dispose=function(){void 0!==this._linkMatcherId&&void 0!==this._terminal&&this._terminal.deregisterLinkMatcher(this._linkMatcherId)},a}();b.WebLinksAddon=a}])})});E(Zi);for(var Bl=Zi.WebLinksAddon,Cl=function(){return function(a){if(!a)throw Error("You must provide a config for the Wasm terminal.");
if(!a.fetchCommand)throw Error("You must provide a fetchCommand for the Wasm terminal config, to handle fetching commands to be run");a.processWorkerUrl||console.warn("Note: It is HIGHLY reccomended you pass in the processWorkerUrl in the terminal config to create process workers. Without this, some wasi programs will not work.");this.fetchCommand=a.fetchCommand;this.processWorkerUrl=a.processWorkerUrl}}(),Ud=function(a,b){Ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=
b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return Ud(a,b)},Qa=function(){Qa=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return Qa.apply(this,arguments)},Dl=function(){function a(a){this._firstInit=!0;this.xterm=a;this._termSize={cols:this.xterm.cols,rows:this.xterm.rows};this._input=this._continuationPromptPrefix=this._promptPrefix="";this._cursor=0}a.prototype._getAsyncRead=
function(){var a=this,c,d;return{promise:new Promise(function(b,f){c=function(c){a._promptPrefix="";a._continuationPromptPrefix="";b(c)};d=f}),resolve:c,reject:d}};a.prototype.read=function(a,c){void 0===c&&(c="> ");0<a.length&&this.print(a);this._firstInit=!0;this._promptPrefix=a;this._continuationPromptPrefix=c;this._input="";this._cursor=0;return Qa({promptPrefix:a,continuationPromptPrefix:c},this._getAsyncRead())};a.prototype.readChar=function(a){0<a.length&&this.print(a);return Qa({promptPrefix:a},
this._getAsyncRead())};a.prototype.println=function(a){this.print(a+"\n")};a.prototype.print=function(a){a=a.replace(/[\r\n]+/g,"\n");this.xterm.write(a.replace(/\n/g,"\r\n"))};a.prototype.printWide=function(a,c){void 0===c&&(c=2);if(0===a.length)return this.println("");c=a.reduce(function(a,b){return Math.max(a,b.length)},0)+c;for(var b=Math.floor(this._termSize.cols/c),e=Math.ceil(a.length/b),f=0,g=0;g<e;++g){for(var h="",k=0;k<b;++k)if(f<a.length){var n=a[f++];n+=" ".repeat(c-n.length);h+=n}this.println(h)}};
a.prototype.applyPrompts=function(a){return this._promptPrefix+a.replace(/\n/g,"\n"+this._continuationPromptPrefix)};a.prototype.applyPromptOffset=function(a,c){return this.applyPrompts(a.substr(0,c)).length};a.prototype.clearInput=function(){var a=this.applyPrompts(this._input),c=fb(a,a.length,this._termSize.cols).row+1,d=this.applyPromptOffset(this._input,this._cursor);a=fb(a,d,this._termSize.cols).row;a=c-a-1;for(d=0;d<a;++d)this.xterm.write("\u001b[E");this.xterm.write("\r\u001b[K");for(d=1;d<
c;++d)this.xterm.write("\u001b[F\u001b[K")};a.prototype.clearTty=function(){this.xterm.write("\u001b[2J");this.xterm.write("\u001b[0;0H");this._cursor=0};a.prototype.getFirstInit=function(){return this._firstInit};a.prototype.getPromptPrefix=function(){return this._promptPrefix};a.prototype.getContinuationPromptPrefix=function(){return this._continuationPromptPrefix};a.prototype.getTermSize=function(){return this._termSize};a.prototype.getInput=function(){return this._input};a.prototype.getCursor=
function(){return this._cursor};a.prototype.getBuffer=function(){return this.xterm.buffer};a.prototype.setInput=function(a,c){void 0===c&&(c=!1);c||this.clearInput();var b=this.applyPrompts(a);this.print(b);this._cursor>a.length&&(this._cursor=a.length);var e=this.applyPromptOffset(a,this._cursor);c=fb(b,b.length,this._termSize.cols).row+1;e=fb(b,e,this._termSize.cols);b=e.col;c=c-e.row-1;this.xterm.write("\r");for(e=0;e<c;++e)this.xterm.write("\u001b[F");for(e=0;e<b;++e)this.xterm.write("\u001b[C");
this._input=a};a.prototype.setCursor=function(a){0>a&&(a=0);a>this._input.length&&(a=this._input.length);this._writeCursorPosition(a)};a.prototype.setCursorDirectly=function(a){this._writeCursorPosition(a)};a.prototype._writeCursorPosition=function(a){var b=this.applyPrompts(this._input);fb(b,b.length,this._termSize.cols);var d=this.applyPromptOffset(this._input,this._cursor),e=fb(b,d,this._termSize.cols);d=e.col;e=e.row;var f=this.applyPromptOffset(this._input,a);f=fb(b,f,this._termSize.cols);b=
f.col;f=f.row;if(f>e)for(var g=e;g<f;++g)this.xterm.write("\u001b[B");else for(g=f;g<e;++g)this.xterm.write("\u001b[A");if(b>d)for(g=d;g<b;++g)this.xterm.write("\u001b[C");else for(g=b;g<d;++g)this.xterm.write("\u001b[D");this._cursor=a};a.prototype.setTermSize=function(a,c){this._termSize={cols:a,rows:c}};a.prototype.setFirstInit=function(a){this._firstInit=a};a.prototype.setPromptPrefix=function(a){this._promptPrefix=a};a.prototype.setContinuationPromptPrefix=function(a){this._continuationPromptPrefix=
a};return a}(),Db="",$i=0;4>$i;$i++)Db+=(Math.pow(16,8)*Math.random()).toString(16);var Mf=function(a,b,c){a=yj(a,b,c);return"function"!==typeof b?a:a.reduce(function(a,b){if("object"===typeof b)return a.concat(b);b=b.split(RegExp("("+Db+".*?"+Db+")","g"));return 1===b.length?a.concat(b[0]):a.concat(b.filter(Boolean).map(function(a){return RegExp("^"+Db).test(a)?JSON.parse(a.split(Db)[1]):a}))},[])},El=function(){function a(a){this.size=a;this.entries=[];this.cursor=0}a.prototype.push=function(a){""!==
a.trim()&&a!==this.entries[this.entries.length-1]&&(this.entries.push(a),this.entries.length>this.size&&this.entries.pop(),this.cursor=this.entries.length)};a.prototype.includes=function(a){return this.entries.includes(a)};a.prototype.rewind=function(){this.cursor=this.entries.length};a.prototype.getPrevious=function(){var a=Math.max(0,this.cursor-1);this.cursor=a;return this.entries[a]};a.prototype.getNext=function(){var a=Math.min(this.entries.length,this.cursor+1);this.cursor=a;return this.entries[a]};
return a}(),Rf=Symbol("Comlink.proxy"),Ej=Symbol("Comlink.endpoint"),Of=new WeakSet,Sf=new Map([["proxy",{canHandle:function(a){return a&&a[Rf]},serialize:function(a){var b=new MessageChannel,c=b.port2;Nf(a,b.port1);return[c,[c]]},deserialize:function(a){a.start();return Uc(a)}}],["throw",{canHandle:function(a){return Of.has(a)},serialize:function(a){var b=a instanceof Error,c=a;b&&(c={isError:b,message:a.message,stack:a.stack});return[c,[]]},deserialize:function(a){if(a.isError)throw Object.assign(Error(),
a);throw a;}}]]),Qf=new WeakMap,Fl=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},Hl=function(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++){var e=a[d];Gl.call(a,d)&&c.push(b(e,d,a))}return c},Gl=Object.prototype.hasOwnProperty,bj=function(a,b){b?"string"==typeof b&&(b={startRule:b}):b={};return aj.parse(a,b)},aj=function(){function a(a,b,e,f,g,h){this.message=a;this.expected=b;this.found=e;this.offset=f;this.line=g;this.column=h;this.name="SyntaxError"}
function b(c){function d(a){if(pb!==a){pb>a&&(pb=0,Nb={line:1,column:1,seenCR:!1});var b=Nb,d;for(d=pb;d<a;d++){var e=c.charAt(d);"\n"===e?(b.seenCR||b.line++,b.column=1,b.seenCR=!1):"\r"===e||"\u2028"===e||"\u2029"===e?(b.line++,b.column=1,b.seenCR=!0):(b.column++,b.seenCR=!1)}pb=a}return Nb}function e(a){l<Bb||(l>Bb&&(Bb=l,Ob=[]),Ob.push(a))}function f(){var a,b;var c=l;var d=[];var e=l;var f=[];for(a=M();a!==m;)f.push(a),a=M();if(f!==m)if(a=g(),a!==m){var h=[];for(b=M();b!==m;)h.push(b),b=M();
h!==m?e=f=[f,a,h]:(l=e,e=w)}else l=e,e=w;else l=e,e=w;if(e!==m)for(;e!==m;){d.push(e);e=l;f=[];for(a=M();a!==m;)f.push(a),a=M();if(f!==m)if(a=g(),a!==m){h=[];for(b=M();b!==m;)h.push(b),b=M();h!==m?e=f=[f,a,h]:(l=e,e=w)}else l=e,e=w;else l=e,e=w}else d=w;d!==m&&(S=c,d=X(d));return d}function g(){var a,b;z++;var c=l;var d=h();if(d!==m){var f=[];var g=l;var G=[];for(a=V();a!==m;)G.push(a),a=V();if(G!==m)if(a=k(),a!==m){var Q=[];for(b=M();b!==m;)Q.push(b),b=M();Q!==m?(b=h(),b!==m?g=G=[G,a,Q,b]:(l=g,g=
w)):(l=g,g=w)}else l=g,g=w;else l=g,g=w;for(;g!==m;){f.push(g);g=l;G=[];for(a=V();a!==m;)G.push(a),a=V();if(G!==m)if(a=k(),a!==m){Q=[];for(b=M();b!==m;)Q.push(b),b=M();Q!==m?(b=h(),b!==m?g=G=[G,a,Q,b]:(l=g,g=w)):(l=g,g=w)}else l=g,g=w;else l=g,g=w}if(f!==m){g=l;G=[];for(a=V();a!==m;)G.push(a),a=V();G!==m?(a=k(),a!==m?g=G=[G,a]:(l=g,g=w)):(l=g,g=w);g===m&&(g=K);g!==m?(S=c,c=d=Y(d,f)):(l=c,c=w)}else l=c,c=w}else l=c,c=w;z--;c===m&&0===z&&e(ca);return c}function h(){var a=l;var b=n();if(b===m&&(b=y(),
b===m)){var d;var g=l;c.substr(l,5)===ma?(b=ma,l+=5):(b=m,0===z&&e(sa));b===m&&(c.substr(l,5)===na?(b=na,l+=5):(b=m,0===z&&e(Ja)));if(b!==m){var k=[];var u=M();if(u!==m)for(;u!==m;)k.push(u),u=M();else k=w;if(k!==m)if(u=q(),u!==m){k=[];for(d=M();d!==m;)k.push(d),d=M();k!==m?(c.substr(l,2)===pa?(d=pa,l+=2):(d=m,0===z&&e(cj)),d!==m?(k=M(),k!==m?(k=f(),k!==m?(c.substr(l,4)===G?(d=G,l+=4):(d=m,0===z&&e(Q)),d!==m?(S=g,g=b={type:b+"-loop",test:u,body:k}):(l=g,g=w)):(l=g,g=w)):(l=g,g=w)):(l=g,g=w)):(l=g,
g=w)}else l=g,g=w;else l=g,g=w}else l=g,g=w;b=g;if(b===m){g=l;c.substr(l,2)===cc?(b=cc,l+=2):(b=m,0===z&&e(dj));if(b!==m){u=[];b=M();if(b!==m)for(;b!==m;)u.push(b),b=M();else u=w;if(u!==m)if(b=f(),b!==m)if(c.substr(l,4)===rb?(u=rb,l+=4):(u=m,0===z&&e(mc)),u!==m){k=[];u=M();if(u!==m)for(;u!==m;)k.push(u),u=M();else k=w;if(k!==m)if(u=f(),u!==m){k=[];for(d=p();d!==m;)k.push(d),d=p();if(k!==m){d=l;if(c.substr(l,4)===Fd){var aa=Fd;l+=4}else aa=m,0===z&&e(ej);if(aa!==m){var r=f();r!==m?d=aa=[aa,r]:(l=d,
d=w)}else l=d,d=w;d===m&&(d=K);d!==m?(c.substr(l,2)===qa?(aa=qa,l+=2):(aa=m,0===z&&e(ua)),aa!==m?(S=g,g=b={type:"ifElse",test:b,body:u,elifBlocks:k.length?k:null,elseBody:d?d[1]:null}):(l=g,g=w)):(l=g,g=w)}else l=g,g=w}else l=g,g=w;else l=g,g=w}else l=g,g=w;else l=g,g=w;else l=g,g=w}else l=g,g=w;b=g}}if(b!==m){g=l;u=[];for(k=V();k!==m;)u.push(k),k=V();if(u!==m){k=l;c.substr(l,2)===da?(d=da,l+=2):(d=m,0===z&&e(ea));d===m&&(c.substr(l,2)===ka?(d=ka,l+=2):(d=m,0===z&&e(oa)));if(d!==m){aa=[];for(r=M();r!==
m;)aa.push(r),r=M();aa!==m?(r=h(),r!==m?(S=k,k=d=[d,r]):(l=k,k=w)):(l=k,k=w)}else l=k,k=w;k!==m?g=u=[u,k]:(l=g,g=w)}else l=g,g=w;g===m&&(g=K);g!==m?(S=a,a=b,"undefined"!==typeof g&&g?(g=g[1],a.control=g[0],a.next=g[1]):(a.control=";",a.next=null)):(l=a,a=w)}else l=a,a=w;return a}function k(){var a=l;if(38===c.charCodeAt(l)){var b=W;l++}else b=m,0===z&&e(la);b===m&&(59===c.charCodeAt(l)?(b=Z,l++):(b=m,0===z&&e(ja)),b===m&&(10===c.charCodeAt(l)?(b=wa,l++):(b=m,0===z&&e(xa))));b!==m&&(S=a,b="\n"==b?
";":b);return b}function n(){z++;var a=l;var b=[];var d=l;var f=y();f===m&&(f=Nc());if(f!==m){var g=[];var G=V();if(G!==m)for(;G!==m;)g.push(G),G=V();else g=w;g!==m?d=f=[f,g]:(l=d,d=w)}else l=d,d=w;for(;d!==m;)if(b.push(d),d=l,f=y(),f===m&&(f=Nc()),f!==m){g=[];G=V();if(G!==m)for(;G!==m;)g.push(G),G=V();else g=w;g!==m?d=f=[f,g]:(l=d,d=w)}else l=d,d=w;if(b!==m)if(d=u(),d===m&&(d=r()),d!==m){f=[];g=l;G=[];var h=V();if(h!==m)for(;h!==m;)G.push(h),h=V();else G=w;G!==m?(h=Nc(),h===m&&(h=t()),h!==m?g=G=
[G,h]:(l=g,g=w)):(l=g,g=w);for(;g!==m;){f.push(g);g=l;G=[];h=V();if(h!==m)for(;h!==m;)G.push(h),h=V();else G=w;G!==m?(h=Nc(),h===m&&(h=t()),h!==m?g=G=[G,h]:(l=g,g=w)):(l=g,g=w)}if(f!==m){g=l;G=[];for(h=V();h!==m;)G.push(h),h=V();if(G!==m){var Q;h=l;if(124===c.charCodeAt(l)){var k=Mb;l++}else k=m,0===z&&e(Sb);if(k!==m){k=[];for(Q=M();Q!==m;)k.push(Q),Q=M();k!==m?(Q=n(),Q!==m?(S=h,h=k={type:"pipe",command:Q}):(l=h,h=w)):(l=h,h=w)}else l=h,h=w;h!==m?g=G=[G,h]:(l=g,g=w)}else l=g,g=w;g===m&&(g=K);g!==
m?(S=a,a=b=va(b,d,f,g)):(l=a,a=w)}else l=a,a=w}else l=a,a=w;else l=a,a=w;z--;a===m&&0===z&&e(ta);return a}function p(){var a=l;if(c.substr(l,4)===ra){var b=ra;l+=4}else b=m,0===z&&e(ya);if(b!==m){var d=[];b=M();if(b!==m)for(;b!==m;)d.push(b),b=M();else d=w;if(d!==m)if(b=q(),b!==m)if(c.substr(l,4)===rb?(d=rb,l+=4):(d=m,0===z&&e(mc)),d!==m){d=[];var g=M();if(g!==m)for(;g!==m;)d.push(g),g=M();else d=w;d!==m?(g=f(),g!==m?(S=a,a=b={type:"ifElse",test:b,body:g}):(l=a,a=w)):(l=a,a=w)}else l=a,a=w;else l=
a,a=w;else l=a,a=w}else l=a,a=w;return a}function q(){var a=l;var b=f();b!==m&&(S=a);return b}function y(){var a=l;var b=E();if(b!==m){if(61===c.charCodeAt(l)){var d=Ea;l++}else d=m,0===z&&e(Fa);d!==m?(d=t(),d!==m?(S=a,a=b={type:"variableAssignment",name:b,value:d}):(l=a,a=w)):(l=a,a=w)}else l=a,a=w;return a}function u(){var a;z++;var b=a=l;z++;var c=Nc();z--;c===m?b=ia:(l=b,b=w);if(b!==m)if(c=l,z++,b=O(),z--,b===m?c=ia:(l=c,c=w),c!==m)if(b=l,z++,c=y(),z--,c===m?b=ia:(l=b,b=w),b!==m){c=l;b=[];var d=
B();d===m&&(d=v(),d===m&&(d=ff(),d===m&&(d=gf(),d===m&&(d=hf(),d===m&&(d=aa(),d===m&&(d=ha()))))));if(d!==m)for(;d!==m;)b.push(d),d=B(),d===m&&(d=v(),d===m&&(d=ff(),d===m&&(d=gf(),d===m&&(d=hf(),d===m&&(d=aa(),d===m&&(d=ha()))))));else b=w;b!==m&&(S=c,b=T(b));c=b;c===m&&(c=r());c!==m?(S=a,a=c):(l=a,a=w)}else l=a,a=w;else l=a,a=w;else l=a,a=w;z--;a===m&&0===z&&e(Da);return a}function r(){if(91===c.charCodeAt(l)){var a=za;l++}else a=m,0===z&&e(Aa);a===m&&(c.substr(l,2)===Ga?(a=Ga,l+=2):(a=m,0===z&&
e(Ia)));return a}function t(){z++;var a=u();if(a===m){a=l;if(Jb.test(c.charAt(l))){var b=c.charAt(l);l++}else b=m,0===z&&e(Kb);if(b!==m){if(40===c.charCodeAt(l)){var d=zb;l++}else d=m,0===z&&e(Ab);if(d!==m)if(d=g(),d!==m){if(41===c.charCodeAt(l)){var f=wb;l++}else f=m,0===z&&e(xb);f!==m?(S=a,a=b={type:"processSubstitution",readWrite:b,commands:d}):(l=a,a=w)}else l=a,a=w;else l=a,a=w}else l=a,a=w}z--;a===m&&0===z&&e(Sa);return a}function v(){var a=l;var b=[];var c=x();if(c!==m)for(;c!==m;)b.push(c),
c=x();else b=w;b!==m&&(S=a,b=N(b));return b}function x(){var a=l;if(92===c.charCodeAt(l)){var b=Ca;l++}else b=m,0===z&&e(Ma);if(b!==m){var d=A();d!==m?(S=a,a=d):(l=a,a=w)}else l=a,a=w;a===m&&(b=a=l,z++,d=A(),z--,d===m?b=ia:(l=b,b=w),b!==m?(c.length>l?(d=c.charAt(l),l++):(d=m,0===z&&e(ba)),d!==m?(S=a,a=d):(l=a,a=w)):(l=a,a=w));return a}function A(){if(Ya.test(c.charAt(l))){var a=c.charAt(l);l++}else a=m,0===z&&e($a);return a}function B(){var a;var b=l;var d=[];for(a=x();a!==m;)d.push(a),a=x();if(d!==
m){a=[];42===c.charCodeAt(l)?(d=Oa,l++):(d=m,0===z&&e(Pa));d===m&&(63===c.charCodeAt(l)?(d=Ka,l++):(d=m,0===z&&e(Qa)),d===m&&(d=D(),d===m&&(d=C())));if(d!==m)for(;d!==m;)a.push(d),42===c.charCodeAt(l)?(d=Oa,l++):(d=m,0===z&&e(Pa)),d===m&&(63===c.charCodeAt(l)?(d=Ka,l++):(d=m,0===z&&e(Qa)),d===m&&(d=D(),d===m&&(d=C())));else a=w;if(a!==m){d=[];for(a=x();a!==m;)d.push(a),a=x();d!==m?(S=b,b=d={type:"glob",value:c.substring(S,l)}):(l=b,b=w)}else l=b,b=w}else l=b,b=w;return b}function D(){var a;var b=
a=l;if(91===c.charCodeAt(l)){var d=za;l++}else d=m,0===z&&e(Aa);if(d!==m){var f=l;z++;if(45===c.charCodeAt(l)){var g=Ha;l++}else g=m,0===z&&e(Ba);z--;g===m?f=ia:(l=f,f=w);if(f!==m)if(c.length>l?(g=c.charAt(l),l++):(g=m,0===z&&e(ba)),g!==m){if(45===c.charCodeAt(l)){var h=Ha;l++}else h=m,0===z&&e(Ba);if(h!==m){var G=l;z++;if(45===c.charCodeAt(l)){var Q=Ha;l++}else Q=m,0===z&&e(Ba);z--;Q===m?G=ia:(l=G,G=w);if(G!==m)if(c.length>l?(Q=c.charAt(l),l++):(Q=m,0===z&&e(ba)),Q!==m){if(93===c.charCodeAt(l)){var k=
ib;l++}else k=m,0===z&&e(jb);k!==m?b=d=[d,f,g,h,G,Q,k]:(l=b,b=w)}else l=b,b=w;else l=b,b=w}else l=b,b=w}else l=b,b=w;else l=b,b=w}else l=b,b=w;b!==m&&(b=c.substring(a,l));return b}function C(){var a;var b=a=l;if(c.length>l){var d=c.charAt(l);l++}else d=m,0===z&&e(ba);d===m&&(d=K);if(d!==m){var f=l;z++;if(36===c.charCodeAt(l)){var g=Ua;l++}else g=m,0===z&&e(Va);z--;g===m?f=ia:(l=f,f=w);f!==m?b=d=[d,f]:(l=b,b=w)}else l=b,b=w;if(b!==m)if(123===c.charCodeAt(l)?(d=kb,l++):(d=m,0===z&&e(mb)),d!==m){f=[];
g=x();if(g!==m)for(;g!==m;)f.push(g),g=x();else f=w;f!==m?(125===c.charCodeAt(l)?(g=cb,l++):(g=m,0===z&&e(db)),g!==m?a=b=[b,d,f,g]:(l=a,a=w)):(l=a,a=w)}else l=a,a=w;else l=a,a=w;return a}function aa(){var a=l;if(39===c.charCodeAt(l)){var b=Xa;l++}else b=m,0===z&&e(Za);if(b!==m){b=l;var d=[];if(eb.test(c.charAt(l))){var f=c.charAt(l);l++}else f=m,0===z&&e(hb);for(;f!==m;)d.push(f),eb.test(c.charAt(l))?(f=c.charAt(l),l++):(f=m,0===z&&e(hb));d!==m&&(d=c.substring(b,l));b=d;b!==m?(39===c.charCodeAt(l)?
(d=Xa,l++):(d=m,0===z&&e(Za)),d!==m?(S=a,a=b=N(b)):(l=a,a=w)):(l=a,a=w)}else l=a,a=w;return a}function ha(){var a=l;if(34===c.charCodeAt(l)){var b=Ra;l++}else b=m,0===z&&e(Ta);if(b!==m){b=[];var d=fj();if(d===m){d=[];var f=Dd();if(f!==m)for(;f!==m;)d.push(f),f=Dd();else d=w}for(;d!==m;)if(b.push(d),d=fj(),d===m)if(d=[],f=Dd(),f!==m)for(;f!==m;)d.push(f),f=Dd();else d=w;b!==m?(34===c.charCodeAt(l)?(d=Ra,l++):(d=m,0===z&&e(Ta)),d!==m?(S=a,a=b=ub(b)):(l=a,a=w)):(l=a,a=w)}else l=a,a=w;return a}function Dd(){var a=
l;if(92===c.charCodeAt(l)){var b=Ca;l++}else b=m,0===z&&e(Ma);if(b!==m){var d=gj();d!==m?(S=a,a=d):(l=a,a=w)}else l=a,a=w;a===m&&(a=l,c.substr(l,2)===Wa?(b=Wa,l+=2):(b=m,0===z&&e(lb)),b!==m&&(S=a,b="\\"),a=b,a===m&&(b=a=l,z++,d=gj(),z--,d===m?b=ia:(l=b,b=w),b!==m?(c.length>l?(d=c.charAt(l),l++):(d=m,0===z&&e(ba)),d!==m?(S=a,a=d):(l=a,a=w)):(l=a,a=w)));return a}function gj(){if(34===c.charCodeAt(l)){var a=Ra;l++}else a=m,0===z&&e(Ta);a===m&&(36===c.charCodeAt(l)?(a=Ua,l++):(a=m,0===z&&e(Va)),a===m&&
(96===c.charCodeAt(l)?(a=La,l++):(a=m,0===z&&e(Na))));return a}function fj(){var a=hf();a===m&&(a=ff(),a===m&&(a=gf()));return a}function ff(){var a=l;if(36===c.charCodeAt(l)){var b=Ua;l++}else b=m,0===z&&e(Va);b!==m?(b=E(),b===m&&(63===c.charCodeAt(l)?(b=Ka,l++):(b=m,0===z&&e(Qa))),b!==m?(S=a,a=b={type:"variable",name:b}):(l=a,a=w)):(l=a,a=w);return a}function E(){var a=l;var b=[];if(nb.test(c.charAt(l))){var d=c.charAt(l);l++}else d=m,0===z&&e(ob);if(d!==m)for(;d!==m;)b.push(d),nb.test(c.charAt(l))?
(d=c.charAt(l),l++):(d=m,0===z&&e(ob));else b=w;b!==m&&(S=a,b=c.substring(S,l));return b}function gf(){var a=l;if(c.substr(l,2)===ab){var b=ab;l+=2}else b=m,0===z&&e(qb);if(b!==m){b=[];if(sb.test(c.charAt(l))){var d=c.charAt(l);l++}else d=m,0===z&&e(tb);for(;d!==m;)b.push(d),sb.test(c.charAt(l))?(d=c.charAt(l),l++):(d=m,0===z&&e(tb));b!==m?(125===c.charCodeAt(l)?(d=cb,l++):(d=m,0===z&&e(db)),d!==m?(S=a,a=b={type:"variableSubstitution",expression:b.join("")}):(l=a,a=w)):(l=a,a=w)}else l=a,a=w;return a}
function hf(){var a=l;if(c.substr(l,2)===bb){var d=bb;l+=2}else d=m,0===z&&e(vb);if(d!==m)if(d=g(),d!==m){if(41===c.charCodeAt(l)){var f=wb;l++}else f=m,0===z&&e(xb);f!==m?(S=a,a=d={type:"commandSubstitution",commands:d}):(l=a,a=w)}else l=a,a=w;else l=a,a=w;if(a===m)if(a=l,96===c.charCodeAt(l)?(d=La,l++):(d=m,0===z&&e(Na)),d!==m){d=[];f=F();if(f!==m)for(;f!==m;)d.push(f),f=F();else d=w;d!==m?(96===c.charCodeAt(l)?(f=La,l++):(f=m,0===z&&e(Na)),f!==m?(S=a,a=d={type:"commandSubstitution",commands:b(d.join(""))}):
(l=a,a=w)):(l=a,a=w)}else l=a,a=w;return a}function F(){var a=l;if(c.substr(l,2)===yb){var b=yb;l+=2}else b=m,0===z&&e(Hb);b!==m&&(S=a,b="`");a=b;if(a===m&&(a=l,c.substr(l,2)===Wa?(b=Wa,l+=2):(b=m,0===z&&e(lb)),b!==m&&(S=a,b="\\"),a=b,a===m)){b=a=l;z++;if(96===c.charCodeAt(l)){var d=La;l++}else d=m,0===z&&e(Na);z--;d===m?b=ia:(l=b,b=w);b!==m?(c.length>l?(d=c.charAt(l),l++):(d=m,0===z&&e(ba)),d!==m?(S=a,a=d):(l=a,a=w)):(l=a,a=w)}return a}function Nc(){var a=l;var b=I();b===m&&(b=K);if(b!==m){if(c.substr(l,
2)===fb){var d=fb;l+=2}else d=m,0===z&&e(Db);d===m&&(c.substr(l,2)===gb?(d=gb,l+=2):(d=m,0===z&&e(Eb)));if(d!==m){var f=I();if(f!==m){if(45===c.charCodeAt(l)){var g=Ha;l++}else g=m,0===z&&e(Ba);g!==m?(S=a,a=b,null==a&&(a="<"==d[0]?0:1),a=b={type:"moveFd",fd:a,op:d,dest:f}):(l=a,a=w)}else l=a,a=w}else l=a,a=w}else l=a,a=w;d=a;if(d===m){a=l;b=I();b===m&&(b=K);if(b!==m)if(c.substr(l,2)===fb?(d=fb,l+=2):(d=m,0===z&&e(Db)),d===m&&(c.substr(l,2)===gb?(d=gb,l+=2):(d=m,0===z&&e(Eb))),d!==m){g=[];for(f=V();f!==
m;)g.push(f),f=V();g!==m?(f=I(),f!==m?(S=a,a=b,null==a&&(a="<"==d[0]?0:1),a=b={type:"duplicateFd",srcFd:a,op:d,destFd:f}):(l=a,a=w)):(l=a,a=w)}else l=a,a=w;else l=a,a=w;d=a;if(d===m)if(d=l,f=I(),f===m&&(f=K),f!==m)if(60===c.charCodeAt(l)?(a=Tb,l++):(a=m,0===z&&e(Ub)),a===m&&(62===c.charCodeAt(l)?(a=Vb,l++):(a=m,0===z&&e(Wb)),a===m&&(c.substr(l,2)===Fb?(a=Fb,l+=2):(a=m,0===z&&e(Xb)),a===m&&(c.substr(l,2)===Gb?(a=Gb,l+=2):(a=m,0===z&&e($b)),a===m&&(c.substr(l,2)===Ib?(a=Ib,l+=2):(a=m,0===z&&e(bc)),
a===m&&(c.substr(l,3)===Lb?(a=Lb,l+=3):(a=m,0===z&&e(dc))))))),a!==m){g=[];for(b=V();b!==m;)g.push(b),b=V();g!==m?(b=t(),b!==m?(S=d,d=f,null==d&&(d="<"==a[0]?0:1),d=f={type:"redirectFd",fd:d,op:a,filename:b}):(l=d,d=w)):(l=d,d=w)}else l=d,d=w;else l=d,d=w}return d}function I(){var a=l;var b=[];if(Pb.test(c.charAt(l))){var d=c.charAt(l);l++}else d=m,0===z&&e(Rb);if(d!==m)for(;d!==m;)b.push(d),Pb.test(c.charAt(l))?(d=c.charAt(l),l++):(d=m,0===z&&e(Rb));else b=w;b!==m&&(S=a,b=parseInt(b.join(""),10));
return b}function V(){if(32===c.charCodeAt(l)){var a=fc;l++}else a=m,0===z&&e(gc);a===m&&(9===c.charCodeAt(l)?(a=hc,l++):(a=m,0===z&&e(ic)));return a}function M(){var a=V();a===m&&(10===c.charCodeAt(l)?(a=wa,l++):(a=m,0===z&&e(xa)));return a}function O(){var a=l;if(c.substr(l,5)===ma){var b=ma;l+=5}else b=m,0===z&&e(sa);b===m&&(c.substr(l,5)===na?(b=na,l+=5):(b=m,0===z&&e(Ja)),b===m&&(c.substr(l,3)===Yb?(b=Yb,l+=3):(b=m,0===z&&e(jc)),b===m&&(c.substr(l,4)===G?(b=G,l+=4):(b=m,0===z&&e(Q)),b===m&&(c.substr(l,
2)===pa?(b=pa,l+=2):(b=m,0===z&&e(cj)),b===m&&(c.substr(l,4)===Zb?(b=Zb,l+=4):(b=m,0===z&&e(kc)),b===m&&(c.substr(l,4)===ac?(b=ac,l+=4):(b=m,0===z&&e(lc)),b===m&&(c.substr(l,2)===cc?(b=cc,l+=2):(b=m,0===z&&e(dj)),b===m&&(c.substr(l,4)===rb?(b=rb,l+=4):(b=m,0===z&&e(mc)),b===m&&(c.substr(l,4)===Fd?(b=Fd,l+=4):(b=m,0===z&&e(ej)),b===m&&(c.substr(l,4)===ra?(b=ra,l+=4):(b=m,0===z&&e(ya)),b===m&&(c.substr(l,2)===qa?(b=qa,l+=2):(b=m,0===z&&e(ua)),b===m&&(c.substr(l,2)===Ga?(b=Ga,l+=2):(b=m,0===z&&e(Ia))))))))))))));
if(b!==m){var d=[];var f=M();if(f!==m)for(;f!==m;)d.push(f),f=M();else d=w;d===m&&(d=l,z++,c.length>l?(f=c.charAt(l),l++):(f=m,0===z&&e(ba)),z--,f===m?d=ia:(l=d,d=w));d!==m?a=b=[b,d]:(l=a,a=w)}else l=a,a=w;return a}function N(a){return{type:"literal",value:ec(a)?a.join(""):a}}function L(a){return a[0]}function J(a){return a[1]}function T(a){for(var b=[a[0]],c=a.length,d=a[0],e,f=1;f<c;f++)e=a[f],"concatenation"==e.type&&(e=T(e.pieces)),"concatenation"==e.type?b=b.concat(e.pieces):"literal"!=e.type&&
"glob"!=e.type||"literal"!=d.type&&"glob"!=d.type?(b.push(e),d=e):(d.value+=e.value,"glob"!=d.type&&"glob"==e.type&&(d.type="glob"));return 1==b.length?b[0]:{type:"concatenation",pieces:b}}var P=1<arguments.length?arguments[1]:{},m={},U={script:f,command:n,argument:t,continuationStart:function(){var a;var b=a=l;z++;var d=O();d===m&&(34===c.charCodeAt(l)?(d=Ra,l++):(d=m,0===z&&e(Ta)),d===m&&(39===c.charCodeAt(l)?(d=Xa,l++):(d=m,0===z&&e(Za)),d===m&&(96===c.charCodeAt(l)?(d=La,l++):(d=m,0===z&&e(Na)),
d===m&&(c.substr(l,2)===bb?(d=bb,l+=2):(d=m,0===z&&e(vb)),d===m&&(c.substr(l,2)===ab?(d=ab,l+=2):(d=m,0===z&&e(qb)),d===m&&(40===c.charCodeAt(l)?(d=zb,l++):(d=m,0===z&&e(Ab))))))));z--;d!==m?(l=b,b=ia):b=w;if(b!==m){d=[];if(c.length>l){var f=c.charAt(l);l++}else f=m,0===z&&e(ba);for(;f!==m;)d.push(f),c.length>l?(f=c.charAt(l),l++):(f=m,0===z&&e(ba));d!==m?a=b=[b,d]:(l=a,a=w)}else l=a,a=w;return a}},R=f,w=m,X=function(a){var b=[];Cb(a,function(a){b=b.concat(a[1])});return b},ca={type:"other",description:"a list of statements"},
K=null,Y=function(a,b,c){var d=[a],e=a;Cb(b,function(a,b,c){for(b=e;b.next;)b=b.next;b.control=a[1];d.push(e=a[3])});return d},da="&&",ea={type:"literal",value:"&&",description:'"&&"'},ka="||",oa={type:"literal",value:"||",description:'"||"'},W="&",la={type:"literal",value:"&",description:'"&"'},Z=";",ja={type:"literal",value:";",description:'";"'},wa="\n",xa={type:"literal",value:"\n",description:'"\\n"'},ta={type:"other",description:"a single command"},va=function(a,b,c,d){var e={type:"command",
command:b,args:[],redirects:[],env:{},control:";",next:null};Cb(a,L).concat(Cb(c,J)).forEach(function(a){if(a&&a.type)switch(a.type){case "moveFd":case "duplicateFd":case "redirectFd":return e.redirects.push(a);case "variableAssignment":return e.env[a.name]=a.value;default:e.args.push(a)}});d&&e.redirects.push(d[1]);return e},ma="while",sa={type:"literal",value:"while",description:'"while"'},na="until",Ja={type:"literal",value:"until",description:'"until"'},pa="do",cj={type:"literal",value:"do",description:'"do"'},
G="done",Q={type:"literal",value:"done",description:'"done"'},cc="if",dj={type:"literal",value:"if",description:'"if"'},rb="then",mc={type:"literal",value:"then",description:'"then"'},Fd="else",ej={type:"literal",value:"else",description:'"else"'},qa="fi",ua={type:"literal",value:"fi",description:'"fi"'},ra="elif",ya={type:"literal",value:"elif",description:'"elif"'},Ea="=",Fa={type:"literal",value:"=",description:'"="'},Da={type:"other",description:"command name"},ia=void 0,za="[",Aa={type:"literal",
value:"[",description:'"["'},Ga="[[",Ia={type:"literal",value:"[[",description:'"[["'},Sa={type:"other",description:"command argument"},Ca="\\",Ma={type:"literal",value:"\\",description:'"\\\\"'},ba={type:"any",description:"any character"},Ya=/^[$"';&<>\n()[*?|` ]/,$a={type:"class",value:"[$\"';&<>\\n()[*?|` ]",description:"[$\"';&<>\\n()[*?|` ]"},Oa="*",Pa={type:"literal",value:"*",description:'"*"'},Ka="?",Qa={type:"literal",value:"?",description:'"?"'},Ha="-",Ba={type:"literal",value:"-",description:'"-"'},
ib="]",jb={type:"literal",value:"]",description:'"]"'},Ua="$",Va={type:"literal",value:"$",description:'"$"'},kb="{",mb={type:"literal",value:"{",description:'"{"'},cb="}",db={type:"literal",value:"}",description:'"}"'},Xa="'",Za={type:"literal",value:"'",description:'"\'"'},eb=/^[^']/,hb={type:"class",value:"[^']",description:"[^']"},Ra='"',Ta={type:"literal",value:'"',description:'"\\""'},ub=function(a){a=a.map(function(a){return ec(a)?N(a):a});return T(a)},Wa="\\\\",lb={type:"literal",value:"\\\\",
description:'"\\\\\\\\"'},La="`",Na={type:"literal",value:"`",description:'"`"'},nb=/^[a-zA-Z0-9_]/,ob={type:"class",value:"[a-zA-Z0-9_]",description:"[a-zA-Z0-9_]"},ab="${",qb={type:"literal",value:"${",description:'"${"'},sb=/^[^}]/,tb={type:"class",value:"[^}]",description:"[^}]"},bb="$(",vb={type:"literal",value:"$(",description:'"$("'},wb=")",xb={type:"literal",value:")",description:'")"'},yb="\\`",Hb={type:"literal",value:"\\`",description:'"\\\\`"'},Jb=/^[<>]/,Kb={type:"class",value:"[<>]",
description:"[<>]"},zb="(",Ab={type:"literal",value:"(",description:'"("'},Mb="|",Sb={type:"literal",value:"|",description:'"|"'},fb="<&",Db={type:"literal",value:"<&",description:'"<&"'},gb=">&",Eb={type:"literal",value:">&",description:'">&"'},Tb="<",Ub={type:"literal",value:"<",description:'"<"'},Vb=">",Wb={type:"literal",value:">",description:'">"'},Fb=">|",Xb={type:"literal",value:">|",description:'">|"'},Gb="&>",$b={type:"literal",value:"&>",description:'"&>"'},Ib=">>",bc={type:"literal",value:">>",
description:'">>"'},Lb="&>>",dc={type:"literal",value:"&>>",description:'"&>>"'},Pb=/^[0-9]/,Rb={type:"class",value:"[0-9]",description:"[0-9]"},fc=" ",gc={type:"literal",value:" ",description:'" "'},hc="\t",ic={type:"literal",value:"\t",description:'"\\t"'},Yb="for",jc={type:"literal",value:"for",description:'"for"'},Zb="case",kc={type:"literal",value:"case",description:'"case"'},ac="esac",lc={type:"literal",value:"esac",description:'"esac"'},l=0,S=0,pb=0,Nb={line:1,column:1,seenCR:!1},Bb=0,Ob=[],
z=0;if("startRule"in P){if(!(P.startRule in U))throw Error("Can't start parsing from rule \""+P.startRule+'".');R=U[P.startRule]}var ec=Fl,Cb=Hl;var Qb=R();if(Qb!==m&&l===c.length)return Qb;Qb!==m&&l<c.length&&e({type:"end",description:"end of input"});throw function(b,e,f){function g(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function h(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}
return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d=Array(a.length),e;for(e=0;e<a.length;e++)d[e]=a[e].description;a=1<a.length?d.slice(0,-1).join(", ")+
" or "+d[a.length-1]:d[0];b=b?'"'+c(b)+'"':"end of input";return"Expected "+a+" but "+b+" found."}var G=d(f),Q=f<c.length?c.charAt(f):null;null!==e&&g(e);return new a(null!==b?b:h(e,Q),e,Q,f,G.line,G.column)}(null,Ob,Bb);}(function(a,b){function c(){this.constructor=a}c.prototype=b.prototype;a.prototype=new c})(a,Error);return{SyntaxError:a,parse:b}}();bj.SyntaxError=aj.SyntaxError;var za="undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},hj=Number,
jf={BigInt:{}};jf=self;jf.BigInt&&(hj=jf.BigInt);var F=hj,kf=DataView;kf.prototype.setBigUint64||(kf.prototype.setBigUint64=function(a,b,c){this.setUint32(c?0:4,b,c);this.setUint32(c?4:0,0,c)});var dc="undefined"!==typeof za?za:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},Ha=[],Ia=[],Kj="undefined"!==typeof Uint8Array?Uint8Array:Array,Zd=!1,Ll={}.toString,$f=Array.isArray||function(a){return"[object Array]"==Ll.call(a)};B.TYPED_ARRAY_SUPPORT=void 0!==dc.TYPED_ARRAY_SUPPORT?
dc.TYPED_ARRAY_SUPPORT:!0;B.poolSize=8192;B._augment=function(a){a.__proto__=B.prototype;return a};B.from=function(a,b,c){return Xf(null,a,b,c)};B.TYPED_ARRAY_SUPPORT&&(B.prototype.__proto__=Uint8Array.prototype,B.__proto__=Uint8Array);B.alloc=function(a,b,c){Zf(a);return a=0>=a?hb(null,a):void 0!==b?"string"===typeof c?hb(null,a).fill(b,c):hb(null,a).fill(b):hb(null,a)};B.allocUnsafe=function(a){return $d(null,a)};B.allocUnsafeSlow=function(a){return $d(null,a)};B.isBuffer=function(a){return null!=
a&&(!!a._isBuffer||gg(a)||"function"===typeof a.readFloatLE&&"function"===typeof a.slice&&gg(a.slice(0,0)))};B.compare=function(a,b){if(!Ba(a)||!Ba(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};B.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};B.concat=function(a,b){if(!$f(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return B.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=B.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!Ba(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};B.byteLength=Yf;B.prototype._isBuffer=!0;B.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var b=0;b<a;b+=2)Eb(this,b,b+1);return this};B.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)Eb(this,b,b+3),Eb(this,b+1,b+2);return this};B.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)Eb(this,b,b+7),Eb(this,b+1,b+6),Eb(this,b+2,b+5),Eb(this,b+3,b+4);return this};B.prototype.toString=function(){var a=
this.length|0;return 0===a?"":0===arguments.length?bg(this,0,a):Ij.apply(this,arguments)};B.prototype.equals=function(a){if(!Ba(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===B.compare(this,a)};B.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};B.prototype.compare=function(a,b,c,d,e){if(!Ba(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);
void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,h=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};B.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};B.prototype.indexOf=function(a,
b,c){return cg(this,a,b,c,!0)};B.prototype.lastIndexOf=function(a,b,c){return cg(this,a,b,c,!1)};B.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return vc(Yc(a,this.length-b),this,b,c);case "ascii":return vc(fg(a),this,b,c);case "latin1":case "binary":return vc(fg(a),this,b,c);case "base64":return vc(ag(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
a;e=this.length-b;for(var f=[],g=0;g<d.length&&!(0>(e-=2));++g){var h=d.charCodeAt(g);a=h>>8;h%=256;f.push(h);f.push(a)}return vc(f,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};B.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var eg=4096;B.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(B.TYPED_ARRAY_SUPPORT)b=
this.subarray(a,b),b.__proto__=B.prototype;else{c=b-a;b=new B(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};B.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||ka(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};B.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||ka(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};B.prototype.readUInt8=function(a,b){b||ka(a,1,this.length);return this[a]};B.prototype.readUInt16LE=function(a,
b){b||ka(a,2,this.length);return this[a]|this[a+1]<<8};B.prototype.readUInt16BE=function(a,b){b||ka(a,2,this.length);return this[a]<<8|this[a+1]};B.prototype.readUInt32LE=function(a,b){b||ka(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};B.prototype.readUInt32BE=function(a,b){b||ka(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};B.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||ka(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&
(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};B.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||ka(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};B.prototype.readInt8=function(a,b){b||ka(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};B.prototype.readInt16LE=function(a,b){b||ka(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};B.prototype.readInt16BE=function(a,b){b||
ka(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};B.prototype.readInt32LE=function(a,b){b||ka(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};B.prototype.readInt32BE=function(a,b){b||ka(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};B.prototype.readFloatLE=function(a,b){b||ka(a,4,this.length);return Wc(this,a,!0,23,4)};B.prototype.readFloatBE=function(a,b){b||ka(a,4,this.length);return Wc(this,a,!1,23,4)};B.prototype.readDoubleLE=
function(a,b){b||ka(a,8,this.length);return Wc(this,a,!0,52,8)};B.prototype.readDoubleBE=function(a,b){b||ka(a,8,this.length);return Wc(this,a,!1,52,8)};B.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||na(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};B.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||na(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};
B.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||na(this,a,b,1,255,0);B.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};B.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||na(this,a,b,2,65535,0);B.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):Zc(this,a,b,!0);return b+2};B.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||na(this,a,b,2,65535,0);B.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Zc(this,a,b,!1);return b+2};B.prototype.writeUInt32LE=function(a,b,c){a=
+a;b|=0;c||na(this,a,b,4,4294967295,0);B.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):$c(this,a,b,!0);return b+4};B.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||na(this,a,b,4,4294967295,0);B.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):$c(this,a,b,!1);return b+4};B.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),na(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>
a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};B.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),na(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};B.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||na(this,a,b,1,127,-128);B.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};B.prototype.writeInt16LE=function(a,b,c){a=+a;
b|=0;c||na(this,a,b,2,32767,-32768);B.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):Zc(this,a,b,!0);return b+2};B.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||na(this,a,b,2,32767,-32768);B.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):Zc(this,a,b,!1);return b+2};B.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||na(this,a,b,4,2147483647,-2147483648);B.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):$c(this,a,b,!0);return b+4};B.prototype.writeInt32BE=
function(a,b,c){a=+a;b|=0;c||na(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);B.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):$c(this,a,b,!1);return b+4};B.prototype.writeFloatLE=function(a,b,c){c||ad(this,a,b,4);Xc(this,a,b,!0,23,4);return b+4};B.prototype.writeFloatBE=function(a,b,c){c||ad(this,a,b,4);Xc(this,a,b,!1,23,4);return b+4};B.prototype.writeDoubleLE=function(a,b,c){c||ad(this,a,b,8);Xc(this,a,b,!0,52,8);return b+8};B.prototype.writeDoubleBE=
function(a,b,c){c||ad(this,a,b,8);Xc(this,a,b,!1,52,8);return b+8};B.prototype.copy=function(a,b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===
a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!B.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};B.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!B.isEncoding(d))throw new TypeError("Unknown encoding: "+
d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=Ba(a)?a:Yc((new B(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var Jj=/[^+\/0-9A-Za-z-_]/g,ca=B,Gd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof za?za:"undefined"!==typeof self?
self:{},tb=hg,bb=ig;"function"===typeof dc.setTimeout&&(tb=setTimeout);"function"===typeof dc.clearTimeout&&(bb=clearTimeout);var Ra=[],fc=!1,Tb,bd=-1;mg.prototype.run=function(){this.fun.apply(null,this.array)};var Ob=dc.performance||{},Ml=Ob.now||Ob.mozNow||Ob.msNow||Ob.oNow||Ob.webkitNow||function(){return(new Date).getTime()},Nl=new Date,Ol={nextTick:lg,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ub,addListener:Ub,once:Ub,off:Ub,removeListener:Ub,removeAllListeners:Ub,
emit:Ub,binding:function(){throw Error("process.binding is not supported");},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(a){var b=.001*Ml.call(Ob),c=Math.floor(b);b=Math.floor(b%1*1E9);a&&(c-=a[0],b-=a[1],0>b&&(c--,b+=1E9));return[c,b]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Nl)/1E3}},ib=[],Sa=[],Rj="undefined"!==typeof Uint8Array?Uint8Array:Array,de=!1,Pl={}.toString,sg=Array.isArray||
function(a){return"[object Array]"==Pl.call(a)};A.TYPED_ARRAY_SUPPORT=void 0!==dc.TYPED_ARRAY_SUPPORT?dc.TYPED_ARRAY_SUPPORT:!0;var Ql=A.TYPED_ARRAY_SUPPORT?2147483647:1073741823;A.poolSize=8192;A._augment=function(a){a.__proto__=A.prototype;return a};A.from=function(a,b,c){return pg(null,a,b,c)};A.TYPED_ARRAY_SUPPORT&&(A.prototype.__proto__=Uint8Array.prototype,A.__proto__=Uint8Array);A.alloc=function(a,b,c){rg(a);return a=0>=a?Ta(null,a):void 0!==b?"string"===typeof c?Ta(null,a).fill(b,c):Ta(null,
a).fill(b):Ta(null,a)};A.allocUnsafe=function(a){return ee(null,a)};A.allocUnsafeSlow=function(a){return ee(null,a)};A.isBuffer=zg;A.compare=function(a,b){if(!jb(a)||!jb(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};A.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};A.concat=function(a,b){if(!sg(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return A.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=A.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!jb(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};A.byteLength=qg;A.prototype._isBuffer=!0;A.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var b=0;b<a;b+=2)Vb(this,b,b+1);return this};A.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)Vb(this,b,b+3),Vb(this,b+1,b+2);return this};A.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)Vb(this,b,b+7),Vb(this,b+1,b+6),Vb(this,b+2,b+5),Vb(this,b+3,b+4);return this};A.prototype.toString=function(){var a=
this.length|0;return 0===a?"":0===arguments.length?ug(this,0,a):Pj.apply(this,arguments)};A.prototype.equals=function(a){if(!jb(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===A.compare(this,a)};A.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};A.prototype.compare=function(a,b,c,d,e){if(!jb(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);
void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,h=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};A.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};A.prototype.indexOf=function(a,
b,c){return vg(this,a,b,c,!0)};A.prototype.lastIndexOf=function(a,b,c){return vg(this,a,b,c,!1)};A.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return wc(ed(a,this.length-b),this,b,c);case "ascii":return wc(yg(a),this,b,c);case "latin1":case "binary":return wc(yg(a),this,b,c);case "base64":return wc(tg(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
a;e=this.length-b;for(var f=[],g=0;g<d.length&&!(0>(e-=2));++g){var h=d.charCodeAt(g);a=h>>8;h%=256;f.push(h);f.push(a)}return wc(f,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var xg=4096;A.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(A.TYPED_ARRAY_SUPPORT)b=
this.subarray(a,b),b.__proto__=A.prototype;else{c=b-a;b=new A(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};A.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||oa(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};A.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||oa(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};A.prototype.readUInt8=function(a,b){b||oa(a,1,this.length);return this[a]};A.prototype.readUInt16LE=function(a,
b){b||oa(a,2,this.length);return this[a]|this[a+1]<<8};A.prototype.readUInt16BE=function(a,b){b||oa(a,2,this.length);return this[a]<<8|this[a+1]};A.prototype.readUInt32LE=function(a,b){b||oa(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};A.prototype.readUInt32BE=function(a,b){b||oa(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};A.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||oa(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&
(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};A.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||oa(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};A.prototype.readInt8=function(a,b){b||oa(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};A.prototype.readInt16LE=function(a,b){b||oa(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};A.prototype.readInt16BE=function(a,b){b||
oa(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};A.prototype.readInt32LE=function(a,b){b||oa(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};A.prototype.readInt32BE=function(a,b){b||oa(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};A.prototype.readFloatLE=function(a,b){b||oa(a,4,this.length);return cd(this,a,!0,23,4)};A.prototype.readFloatBE=function(a,b){b||oa(a,4,this.length);return cd(this,a,!1,23,4)};A.prototype.readDoubleLE=
function(a,b){b||oa(a,8,this.length);return cd(this,a,!0,52,8)};A.prototype.readDoubleBE=function(a,b){b||oa(a,8,this.length);return cd(this,a,!1,52,8)};A.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||pa(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};A.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||pa(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};
A.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||pa(this,a,b,1,255,0);A.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};A.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||pa(this,a,b,2,65535,0);A.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):fd(this,a,b,!0);return b+2};A.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||pa(this,a,b,2,65535,0);A.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):fd(this,a,b,!1);return b+2};A.prototype.writeUInt32LE=function(a,b,c){a=
+a;b|=0;c||pa(this,a,b,4,4294967295,0);A.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):gd(this,a,b,!0);return b+4};A.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||pa(this,a,b,4,4294967295,0);A.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):gd(this,a,b,!1);return b+4};A.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),pa(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>
a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};A.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),pa(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};A.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||pa(this,a,b,1,127,-128);A.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};A.prototype.writeInt16LE=function(a,b,c){a=+a;
b|=0;c||pa(this,a,b,2,32767,-32768);A.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):fd(this,a,b,!0);return b+2};A.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||pa(this,a,b,2,32767,-32768);A.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):fd(this,a,b,!1);return b+2};A.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||pa(this,a,b,4,2147483647,-2147483648);A.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):gd(this,a,b,!0);return b+4};A.prototype.writeInt32BE=
function(a,b,c){a=+a;b|=0;c||pa(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);A.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):gd(this,a,b,!1);return b+4};A.prototype.writeFloatLE=function(a,b,c){c||hd(this,a,b,4);dd(this,a,b,!0,23,4);return b+4};A.prototype.writeFloatBE=function(a,b,c){c||hd(this,a,b,4);dd(this,a,b,!1,23,4);return b+4};A.prototype.writeDoubleLE=function(a,b,c){c||hd(this,a,b,8);dd(this,a,b,!0,52,8);return b+8};A.prototype.writeDoubleBE=
function(a,b,c){c||hd(this,a,b,8);dd(this,a,b,!1,52,8);return b+8};A.prototype.copy=function(a,b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===
a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!A.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};A.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!A.isEncoding(d))throw new TypeError("Unknown encoding: "+
d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=jb(a)?a:ed((new A(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var Qj=/[^+\/0-9A-Za-z-_]/g,Hd=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:Ql,Buffer:A,SlowBuffer:function(a){+a!=a&&(a=0);return A.alloc(+a)},isBuffer:zg}),
ij=ce(function(a,b){function c(a,b){for(var c in a)b[c]=a[c]}function d(a,b,c){return e(a,b,c)}var e=Hd.Buffer;e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=Hd:(c(Hd,b),b.Buffer=d);d.prototype=Object.create(e.prototype);c(e,d);d.from=function(a,b,c){if("number"===typeof a)throw new TypeError("Argument must not be a number");return e(a,b,c)};d.alloc=function(a,b,c){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=e(a);void 0!==b?"string"===typeof c?a.fill(b,c):
a.fill(b):a.fill(0);return a};d.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return e(a)};d.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return Hd.SlowBuffer(a)}}),Rl=ce(function(a,b){function c(){throw Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11");}function d(a,b){if("number"!==typeof a||a!==a)throw new TypeError("offset must be a number");
if(a>q||0>a)throw new TypeError("offset must be a uint32");if(a>n||a>b)throw new RangeError("offset out of range");}function e(a,b,c){if("number"!==typeof a||a!==a)throw new TypeError("size must be a number");if(a>q||0>a)throw new TypeError("size must be a uint32");if(a+b>c||a>n)throw new RangeError("buffer too small");}function f(a,b,c,f){if(!(k.isBuffer(a)||a instanceof Gd.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"===typeof b)f=b,b=0,c=a.length;
else if("function"===typeof c)f=c,c=a.length-b;else if("function"!==typeof f)throw new TypeError('"cb" argument must be a function');d(b,a.length);e(c,b,a.length);return g(a,b,c,f)}function g(a,b,c,d){b=new Uint8Array(a.buffer,b,c);p.getRandomValues(b);if(d)lg(function(){d(null,a)});else return a}function h(a,b,c){"undefined"===typeof b&&(b=0);if(!(k.isBuffer(a)||a instanceof Gd.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');d(b,a.length);void 0===c&&(c=a.length-
b);e(c,b,a.length);return g(a,b,c)}var k=ij.Buffer,n=ij.kMaxLength,p=Gd.crypto||Gd.msCrypto,q=Math.pow(2,32)-1;p&&p.getRandomValues?(b.randomFill=f,b.randomFillSync=h):(b.randomFill=c,b.randomFillSync=c)}),Sl=ce(function(a){a.exports=Rl}).randomFillSync,Oc={resolve:function(){for(var a="",b=!1,c,d=arguments.length-1;-1<=d&&!b;d--){if(0<=d)var e=arguments[d];else void 0===c&&(c=Ol.cwd()),e=c;Ua(e);0!==e.length&&(a=e+"/"+a,b=47===e.charCodeAt(0))}a=Bg(a,!b);return b?0<a.length?"/"+a:"/":0<a.length?
a:"."},normalize:function(a){Ua(a);if(0===a.length)return".";var b=47===a.charCodeAt(0),c=47===a.charCodeAt(a.length-1);a=Bg(a,!b);0!==a.length||b||(a=".");0<a.length&&c&&(a+="/");return b?"/"+a:a},isAbsolute:function(a){Ua(a);return 0<a.length&&47===a.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var a,b=0;b<arguments.length;++b){var c=arguments[b];Ua(c);0<c.length&&(a=void 0===a?c:a+("/"+c))}return void 0===a?".":Oc.normalize(a)},relative:function(a,b){Ua(a);Ua(b);if(a===
b)return"";a=Oc.resolve(a);b=Oc.resolve(b);if(a===b)return"";for(var c=1;c<a.length&&47===a.charCodeAt(c);++c);for(var d=a.length,e=d-c,f=1;f<b.length&&47===b.charCodeAt(f);++f);for(var g=b.length-f,h=e<g?e:g,k=-1,n=0;n<=h;++n){if(n===h){if(g>h){if(47===b.charCodeAt(f+n))return b.slice(f+n+1);if(0===n)return b.slice(f+n)}else e>h&&(47===a.charCodeAt(c+n)?k=n:0===n&&(k=0));break}var p=a.charCodeAt(c+n),q=b.charCodeAt(f+n);if(p!==q)break;else 47===p&&(k=n)}e="";for(n=c+k+1;n<=d;++n)if(n===d||47===a.charCodeAt(n))e=
0===e.length?e+"..":e+"/..";if(0<e.length)return e+b.slice(f+k);f+=k;47===b.charCodeAt(f)&&++f;return b.slice(f)},_makeLong:function(a){return a},dirname:function(a){Ua(a);if(0===a.length)return".";for(var b=a.charCodeAt(0),c=47===b,d=-1,e=!0,f=a.length-1;1<=f;--f)if(b=a.charCodeAt(f),47===b){if(!e){d=f;break}}else e=!1;return-1===d?c?"/":".":c&&1===d?"//":a.slice(0,d)},basename:function(a,b){if(void 0!==b&&"string"!==typeof b)throw new TypeError('"ext" argument must be a string');Ua(a);var c=0,d=
-1,e=!0,f;if(void 0!==b&&0<b.length&&b.length<=a.length){if(b.length===a.length&&b===a)return"";var g=b.length-1,h=-1;for(f=a.length-1;0<=f;--f){var k=a.charCodeAt(f);if(47===k){if(!e){c=f+1;break}}else-1===h&&(e=!1,h=f+1),0<=g&&(k===b.charCodeAt(g)?-1===--g&&(d=f):(g=-1,d=h))}c===d?d=h:-1===d&&(d=a.length);return a.slice(c,d)}for(f=a.length-1;0<=f;--f)if(47===a.charCodeAt(f)){if(!e){c=f+1;break}}else-1===d&&(e=!1,d=f+1);return-1===d?"":a.slice(c,d)},extname:function(a){Ua(a);for(var b=-1,c=0,d=-1,
e=!0,f=0,g=a.length-1;0<=g;--g){var h=a.charCodeAt(g);if(47===h){if(!e){c=g+1;break}}else-1===d&&(e=!1,d=g+1),46===h?-1===b?b=g:1!==f&&(f=1):-1!==b&&(f=-1)}return-1===b||-1===d||0===f||1===f&&b===d-1&&b===c+1?"":a.slice(b,d)},format:function(a){if(null===a||"object"!==typeof a)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);var b=a.dir||a.root,c=a.base||(a.name||"")+(a.ext||"");return a=b?b===a.root?b+c:b+"/"+c:c},parse:function(a){Ua(a);var b={root:"",
dir:"",base:"",ext:"",name:""};if(0===a.length)return b;var c=a.charCodeAt(0),d=47===c;if(d){b.root="/";var e=1}else e=0;for(var f=-1,g=0,h=-1,k=!0,n=a.length-1,p=0;n>=e;--n)if(c=a.charCodeAt(n),47===c){if(!k){g=n+1;break}}else-1===h&&(k=!1,h=n+1),46===c?-1===f?f=n:1!==p&&(p=1):-1!==f&&(p=-1);-1===f||-1===h||0===p||1===p&&f===h-1&&f===g+1?-1!==h&&(b.base=0===g&&d?b.name=a.slice(1,h):b.name=a.slice(g,h)):(0===g&&d?(b.name=a.slice(1,f),b.base=a.slice(1,h)):(b.name=a.slice(g,f),b.base=a.slice(g,h)),
b.ext=a.slice(f,h));0<g?b.dir=a.slice(0,g-1):d&&(b.dir="/");return b},sep:"/",delimiter:":",win32:null,posix:null},Tl=Oc.posix=Oc,jj={hrtime:function(a){var b=a();return function(c){c=a(c||b);return 1E9*c[0]+c[1]}}(function(a){var b=.001*performance.now(),c=Math.floor(b);b=Math.floor(b%1*1E9);a&&(c-=a[0],b-=a[1],0>b&&(c--,b+=1E9));return[c,b]}),exit:function(a){throw new Ul(a);},kill:function(a){throw new Vl(a);},randomFillSync:Sl,isTTY:function(){return!0},path:Tl,fs:null},X,Pc=F(1),Pb=F(2),ec=F(4),
Cb=F(8),Qb=F(16),lf=F(32),Rb=F(64),Id=F(128),Jd=F(256),mf=F(512),nf=F(1024),of=F(2048),pf=F(4096),Kd=F(8192),Ld=F(16384),qf=F(32768),rf=F(65536),sf=F(131072),tf=F(262144),uf=F(524288),vf=F(1048576),nc=F(2097152),Md=F(4194304),Nd=F(8388608),wf=F(16777216),xf=F(33554432),yf=F(67108864),Qc=F(134217728),kj=F(268435456),hc=Pc|Pb|ec|Cb|Qb|lf|Rb|Id|Jd|mf|nf|of|pf|Kd|Ld|qf|rf|sf|tf|uf|vf|nc|Nd|Md|wf|yf|xf|Qc|kj,xc=Pc|Pb|ec|Cb|Qb|lf|Rb|Id|Jd|nc|Md|Nd|Qc,Vj=F(0),he=Cb|Qb|Id|mf|nf|of|pf|Kd|Ld|qf|rf|sf|tf|uf|
vf|nc|Nd|wf|yf|xf|Qc,Eg=he|xc,Fg=Pb|Cb|Rb|nc|Qc|kj,Tj=Pb|Cb|Rb|nc|Qc,Uj=F(0),Sj={E2BIG:1,EACCES:2,EADDRINUSE:3,EADDRNOTAVAIL:4,EAFNOSUPPORT:5,EALREADY:7,EAGAIN:6,EBADF:8,EBADMSG:9,EBUSY:10,ECANCELED:11,ECHILD:12,ECONNABORTED:13,ECONNREFUSED:14,ECONNRESET:15,EDEADLOCK:16,EDESTADDRREQ:17,EDOM:18,EDQUOT:19,EEXIST:20,EFAULT:21,EFBIG:22,EHOSTDOWN:23,EHOSTUNREACH:23,EIDRM:24,EILSEQ:25,EINPROGRESS:26,EINTR:27,EINVAL:28,EIO:29,EISCONN:30,EISDIR:31,ELOOP:32,EMFILE:33,EMLINK:34,EMSGSIZE:35,EMULTIHOP:36,ENAMETOOLONG:37,
ENETDOWN:38,ENETRESET:39,ENETUNREACH:40,ENFILE:41,ENOBUFS:42,ENODEV:43,ENOENT:44,ENOEXEC:45,ENOLCK:46,ENOLINK:47,ENOMEM:48,ENOMSG:49,ENOPROTOOPT:50,ENOSPC:51,ENOSYS:52,ENOTCONN:53,ENOTDIR:54,ENOTEMPTY:55,ENOTRECOVERABLE:56,ENOTSOCK:57,ENOTTY:59,ENXIO:60,EOVERFLOW:61,EOWNERDEAD:62,EPERM:63,EPIPE:64,EPROTO:65,EPROTONOSUPPORT:66,EPROTOTYPE:67,ERANGE:68,EROFS:69,ESPIPE:70,ESRCH:71,ESTALE:72,ETIMEDOUT:73,ETXTBSY:74,EXDEV:75},lj=(X={},X[6]="SIGHUP",X[8]="SIGINT",X[11]="SIGQUIT",X[7]="SIGILL",X[15]="SIGTRAP",
X[0]="SIGABRT",X[2]="SIGBUS",X[5]="SIGFPE",X[9]="SIGKILL",X[20]="SIGUSR1",X[12]="SIGSEGV",X[21]="SIGUSR2",X[10]="SIGPIPE",X[1]="SIGALRM",X[14]="SIGTERM",X[3]="SIGCHLD",X[4]="SIGCONT",X[13]="SIGSTOP",X[16]="SIGTSTP",X[17]="SIGTTIN",X[18]="SIGTTOU",X[19]="SIGURG",X[23]="SIGXCPU",X[24]="SIGXFSZ",X[22]="SIGVTALRM",X),Ul=function(a){function b(b){var c=a.call(this,"WASI Exit error: "+b)||this;c.code=b;return c}Tf(b,a);return b}(Error),Vl=function(a){function b(b){var c=a.call(this,"WASI Kill signal: "+
b)||this;c.signal=b;return c}Tf(b,a);return b}(Error),mj=function(){function a(a){function b(a){switch(a){case 0:case 2:return p.hrtime();case 1:case 3:return p.hrtime()-C;default:return null}}function d(a,b){a=Cg(g,a);if(b!==F(0)&&(a.rights.base&b)===F(0))throw 63;return a}function e(a,b){g.refreshMemory();return Array.from({length:b},function(b,c){c=a+8*c;b=g.view.getUint32(c,!0);c=g.view.getUint32(c+4,!0);return new Uint8Array(g.memory.buffer,b,c)})}var f,g=this,h={};a&&a.preopenDirectories&&(h=
a.preopenDirectories);var k={};a&&a.env&&(k=a.env);var n=[];a&&a.args&&(n=a.args);var p=jj;a&&a.bindings&&(p=a.bindings);this.view=this.memory=void 0;this.bindings=p;this.FD_MAP=new Map([[0,{real:0,filetype:void 0,rights:{base:xc,inheriting:F(0)},path:void 0}],[1,{real:1,filetype:void 0,rights:{base:xc,inheriting:F(0)},path:void 0}],[2,{real:2,filetype:void 0,rights:{base:xc,inheriting:F(0)},path:void 0}]]);var q=this.bindings.fs,y=this.bindings.path;try{for(var u=Uf(Object.entries(h)),r=u.next();!r.done;r=
u.next()){var t=Vc(r.value,2),v=t[0],x=t[1],A=q.openSync(x,q.constants.O_RDONLY),B=Yd(this.FD_MAP.keys()).reverse()[0]+1;this.FD_MAP.set(B,{real:A,filetype:3,rights:{base:he,inheriting:Eg},fakePath:v,path:x})}}catch(aa){var D={error:aa}}finally{try{r&&!r.done&&(f=u.return)&&f.call(u)}finally{if(D)throw D.error;}}var C=p.hrtime();this.wasiImport={args_get:function(a,b){g.refreshMemory();var c=a,d=b;n.forEach(function(a){g.view.setUint32(c,d,!0);c+=4;d+=ca.from(g.memory.buffer).write(a+"\x00",d)});
return 0},args_sizes_get:function(a,b){g.refreshMemory();g.view.setUint32(a,n.length,!0);a=n.reduce(function(a,b){return a+ca.byteLength(b)+1},0);g.view.setUint32(b,a,!0);return 0},environ_get:function(a,b){g.refreshMemory();var c=a,d=b;Object.entries(k).forEach(function(a){var b=Vc(a,2);a=b[0];b=b[1];g.view.setUint32(c,d,!0);c+=4;d+=ca.from(g.memory.buffer).write(a+"="+b+"\x00",d)});return 0},environ_sizes_get:function(a,b){g.refreshMemory();var c=Object.entries(k).map(function(a){a=Vc(a,2);return a[0]+
"="+a[1]+"\x00"}),d=c.reduce(function(a,b){return a+ca.byteLength(b)},0);g.view.setUint32(a,c.length,!0);g.view.setUint32(b,d,!0);return 0},clock_res_get:function(a,b){g.view.setBigUint64(b,F(0));return 0},clock_time_get:function(a,c,d){g.refreshMemory();a=b(a);if(null===a)return 28;g.view.setBigUint64(d,F(a),!0);return 0},fd_advise:J(function(a){d(a,Id);return 52}),fd_allocate:J(function(a){d(a,Jd);return 52}),fd_close:J(function(a){var b=d(a,F(0));q.closeSync(b.real);g.FD_MAP.delete(a);return 0}),
fd_datasync:function(a){a=d(a,Pc);q.fdatasyncSync(a.real);return 0},fd_fdstat_get:J(function(a,b){a=d(a,F(0));g.refreshMemory();g.view.setUint8(b,a.filetype);g.view.setUint16(b+2,0,!0);g.view.setUint16(b+4,0,!0);g.view.setBigUint64(b+8,a.rights.base,!0);g.view.setBigUint64(b+8+8,a.rights.inheriting,!0);return 0}),fd_fdstat_set_flags:J(function(a){d(a,Cb);return 52}),fd_fdstat_set_rights:J(function(a,b,c){a=d(a,F(0));b|=a.rights.base;if(b>a.rights.base)return 63;c|=a.rights.inheriting;if(c>a.rights.inheriting)return 63;
a.rights.base=b;a.rights.inheriting=c;return 0}),fd_filestat_get:J(function(a,b){a=d(a,nc);var c=q.fstatSync(a.real);g.refreshMemory();g.view.setBigUint64(b,F(c.dev),!0);b+=8;g.view.setBigUint64(b,F(c.ino),!0);b+=8;g.view.setUint8(b,a.filetype);b+=4;g.view.setUint32(b,Number(c.nlink),!0);b+=4;g.view.setBigUint64(b,F(c.size),!0);b+=8;g.view.setBigUint64(b,gc(c.atimeMs),!0);b+=8;g.view.setBigUint64(b,gc(c.mtimeMs),!0);g.view.setBigUint64(b+8,gc(c.ctimeMs),!0);return 0}),fd_filestat_set_size:J(function(a,
b){a=d(a,Md);q.ftruncate(a.real,Number(b));return 0}),fd_filestat_set_times:J(function(a,c,e,f){a=d(a,Nd);var g=b(2);q.futimesSync(a.real,2===(f&2)?g:c,8===(f&8)?g:e);return 0}),fd_prestat_get:J(function(a,b){a=d(a,F(0));if(!a.path)return 28;g.refreshMemory();g.view.setUint8(b,0);g.view.setUint32(b+4,ca.byteLength(a.fakePath),!0);return 0}),fd_prestat_dir_name:J(function(a,b,c){a=d(a,F(0));if(!a.path)return 28;g.refreshMemory();ca.from(g.memory.buffer).write(a.fakePath,b,c,"utf8");return 0}),fd_pwrite:J(function(a,
b,c,f,h){var k=d(a,Rb|ec),n=0;e(b,c).forEach(function(a){for(var b=0;b<a.byteLength;)b+=q.writeSync(k.real,a,b,a.byteLength-b,f+n+b);n+=b});g.view.setUint32(h,n,!0);return 0}),fd_write:J(function(a,b,c,f){var h=d(a,Rb),k=0;e(b,c).forEach(function(a){for(var b=0;b<a.byteLength;)b+=q.writeSync(h.real,a,b,a.byteLength-b);k+=b});g.view.setUint32(f,k,!0);return 0}),fd_pread:J(function(a,b,c,f,h){var k=d(a,Pb|ec),n=0;e(b,c).forEach(function(a){for(var b=0;b<a.byteLength;)b+=q.readSync(k.real,a,b,a.byteLength-
b,f+n+b);n+=b});g.view.setUint32(h,n,!0);return 0}),fd_read:J(function(a,b,c,f){var h;a=d(a,Pb);var k=0;try{var n=Uf(e(b,c)),p=n.next();a:for(;!p.done;p=n.next()){var y=p.value;for(b=0;b<y.byteLength;){var u=q.readSync(a.real,y,b,y.byteLength-b);b+=u;k+=u;if(0===u)break a}}}catch(Kl){var r={error:Kl}}finally{try{p&&!p.done&&(h=n.return)&&h.call(n)}finally{if(r)throw r.error;}}g.view.setUint32(f,k,!0);return 0}),fd_readdir:J(function(a,b,c,e,f){a=d(a,Ld);g.refreshMemory();var h=q.readdirSync(a.path,
{withFileTypes:!0}),k=b;for(e=Number(e);e<h.length;e+=1){var n=h[e];g.view.setBigUint64(b,F(e+1),!0);b+=8;var p=q.statSync(y.resolve(a.path,n.name));g.view.setBigUint64(b,F(p.ino),!0);b+=8;g.view.setUint32(b,ca.byteLength(n.name),!0);b+=4;switch(!0){case p.isBlockDevice():p=1;break;case p.isCharacterDevice():p=2;break;case p.isDirectory():p=3;break;case p.isFIFO():p=6;break;case p.isFile():p=4;break;case p.isSocket():p=6;break;case p.isSymbolicLink():p=7;break;default:p=0}g.view.setUint8(b,p);b+=
1;b+=3;ca.from(g.memory.buffer).write(n.name,b,c-b);b+=ca.byteLength(n.name);b+=8%b}g.view.setUint32(f,b-k,!0);return 0}),fd_renumber:J(function(a,b){d(a,F(0));d(b,F(0));q.closeSync(g.FD_MAP.get(a).real);g.FD_MAP.set(a,g.FD_MAP.get(b));g.FD_MAP.delete(b);return 0}),fd_seek:J(function(a){d(a,ec);g.refreshMemory();throw Error("fd_seek to be implemented (without binding)");}),fd_tell:J(function(a){d(a,lf);g.refreshMemory();throw Error("fd_tell to be implemented (without binding)");}),fd_sync:J(function(a){a=
d(a,Qb);q.fsyncSync(a.real);return 0}),path_create_directory:J(function(a,b,c){a=d(a,mf);if(!a.path)return 28;g.refreshMemory();b=ca.from(g.memory.buffer,b,c).toString();q.mkdirSync(y.resolve(a.path,b));return 0}),path_filestat_get:J(function(a,b,c,e,f){a=d(a,tf);if(!a.path)return 28;g.refreshMemory();c=ca.from(g.memory.buffer,c,e).toString();c=q.statSync(y.resolve(a.path,c));g.view.setBigUint64(f,F(c.dev),!0);f+=8;g.view.setBigUint64(f,F(c.ino),!0);f+=8;g.view.setUint8(f,Dg(g,void 0,c).filetype);
f+=4;g.view.setUint32(f,Number(c.nlink),!0);f+=4;g.view.setBigUint64(f,F(c.size),!0);f+=8;g.view.setBigUint64(f,gc(c.atimeMs),!0);f+=8;g.view.setBigUint64(f,gc(c.mtimeMs),!0);g.view.setBigUint64(f+8,gc(c.ctimeMs),!0);return 0}),path_filestat_set_times:J(function(a,c,e,f,h,k){a=d(a,vf);if(!a.path)return 28;g.refreshMemory();var n=b(2),p=2===(c&2);c=8===(c&8);e=ca.from(g.memory.buffer,e,f).toString();q.utimesSync(y.resolve(a.path,e),p?n:h,c?n:k);return 0}),path_link:J(function(a,b,c,e,f,h,k){a=d(a,
of);f=d(f,pf);if(!a.path||!f.path)return 28;g.refreshMemory();c=ca.from(g.memory.buffer,c,e).toString();h=ca.from(g.memory.buffer,h,k).toString();q.linkSync(y.resolve(a.path,c),y.resolve(f.path,h));return 0}),path_open:J(function(a,b,c,e,f,h,k,n,p){b=d(a,Kd);a=(h&(Pb|Ld))!==F(0);var u=(h&(Pc|Rb|Jd|Md))!==F(0);if(u&&a)var r=q.constants.O_RDWR;else a?r=q.constants.O_RDONLY:u&&(r=q.constants.O_WRONLY);a=Kd;h|=k;0!==(f&1)&&(r|=q.constants.O_CREAT,a|=nf);0!==(f&2)&&(r|=q.constants.O_DIRECTORY);0!==(f&
4)&&(r|=q.constants.O_EXCL);0!==(f&8)&&(r|=q.constants.O_TRUNC,a|=uf);0!==(n&1)&&(r|=q.constants.O_APPEND);0!==(n&2)&&(r=q.constants.O_DSYNC?r|q.constants.O_DSYNC:r|q.constants.O_SYNC,h|=Pc);0!==(n&4)&&(r|=q.constants.O_NONBLOCK);0!==(n&8)&&(r=q.constants.O_RSYNC?r|q.constants.O_RSYNC:r|q.constants.O_SYNC,h|=Qb);0!==(n&16)&&(r|=q.constants.O_SYNC,h|=Qb);u&&0===(r&(q.constants.O_APPEND|q.constants.O_TRUNC))&&(h|=ec);g.refreshMemory();c=ca.from(g.memory.buffer,c,e).toString();c=y.resolve(b.path,c);
if(y.relative(b.path,c).startsWith(".."))return 76;try{var t=q.realpathSync(c);if(y.relative(b.path,t).startsWith(".."))return 76}catch(V){if("ENOENT"===V.code)t=c;else throw V;}r=q.openSync(t,r);c=Yd(g.FD_MAP.keys()).reverse()[0]+1;g.FD_MAP.set(c,{real:r,filetype:void 0,rights:{base:a,inheriting:h},path:t});Cg(g,c);g.view.setUint32(p,c,!0);return 0}),path_readlink:J(function(a,b,c,e,f,h){a=d(a,qf);if(!a.path)return 28;g.refreshMemory();b=ca.from(g.memory.buffer,b,c).toString();b=y.resolve(a.path,
b);b=q.readlinkSync(b);e=ca.from(g.memory.buffer).write(b,e,f);g.view.setUint32(h,e,!0);return 0}),path_remove_directory:J(function(a,b,c){a=d(a,xf);if(!a.path)return 28;g.refreshMemory();b=ca.from(g.memory.buffer,b,c).toString();q.rmdirSync(y.resolve(a.path,b));return 0}),path_rename:J(function(a,b,c,e,f,h){a=d(a,rf);e=d(e,sf);if(!a.path||!e.path)return 28;g.refreshMemory();b=ca.from(g.memory.buffer,b,c).toString();f=ca.from(g.memory.buffer,f,h).toString();q.renameSync(y.resolve(a.path,b),y.resolve(e.path,
f));return 0}),path_symlink:J(function(a,b,c,e,f){c=d(c,wf);if(!c.path)return 28;g.refreshMemory();a=ca.from(g.memory.buffer,a,b).toString();e=ca.from(g.memory.buffer,e,f).toString();q.symlinkSync(a,y.resolve(c.path,e));return 0}),path_unlink_file:J(function(a,b,c){a=d(a,yf);if(!a.path)return 28;g.refreshMemory();b=ca.from(g.memory.buffer,b,c).toString();q.unlinkSync(y.resolve(a.path,b));return 0}),poll_oneoff:function(a,c,d,e){var f=0,h=0;g.refreshMemory();for(var k=0;k<d;k+=1){var n=g.view.getBigUint64(a,
!0);a+=8;var q=g.view.getUint8(a);a+=1;switch(q){case 0:a+=7;g.view.getBigUint64(a,!0);a+=8;var y=g.view.getUint32(a,!0);a+=4;a+=4;q=g.view.getBigUint64(a,!0);a+=8;g.view.getBigUint64(a,!0);a+=8;var u=g.view.getUint16(a,!0);a+=2;a+=6;var r=1===u;u=0;y=b(y);null===y?u=28:(q=r?q:y+q,h=q>h?q:h);g.view.setBigUint64(c,n,!0);c+=8;g.view.setUint16(c,u,!0);c+=2;g.view.setUint8(c,0);c+=1;c+=5;f+=1;break;case 1:case 2:a+=3;g.view.getUint32(a,!0);a+=4;g.view.setBigUint64(c,n,!0);c+=8;g.view.setUint16(c,52,!0);
c+=2;g.view.setUint8(c,q);c+=1;c+=5;f+=1;break;default:return 28}}for(g.view.setUint32(e,f,!0);p.hrtime()<h;);return 0},proc_exit:function(a){p.exit(a);return 0},proc_raise:function(a){if(!(a in lj))return 28;p.kill(lj[a]);return 0},random_get:function(a,b){g.refreshMemory();p.randomFillSync(new Uint8Array(g.memory.buffer),a,b);return 0},sched_yield:function(){return 52},sock_recv:function(){return 52},sock_send:function(){return 52},sock_shutdown:function(){return 52}}}a.prototype.refreshMemory=
function(){this.view&&0!==this.view.buffer.byteLength||(this.view=new kf(this.memory.buffer))};a.prototype.setMemory=function(a){this.memory=a};a.prototype.start=function(a){a=a.exports;if(null===a||"object"!==typeof a)throw Error("instance.exports must be an Object. Received "+a+".");var b=a.memory;if(!(b instanceof WebAssembly.Memory))throw Error("instance.exports.memory must be a WebAssembly.Memory. Recceived "+b+".");this.setMemory(b);a._start&&a._start()};a.defaultBindings=jj;return a}(),wa=
"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof za?za:"undefined"!==typeof self?self:{},N=W(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_DIRECT:16384,
O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4}});qa(N);var Wl=W(function(a,b){b.default="function"===typeof BigInt?BigInt:function(){throw Error("BigInt is not supported in this environment.");
}}),oc=W(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=N.constants.S_IFMT,d=N.constants.S_IFDIR,e=N.constants.S_IFREG,f=N.constants.S_IFBLK,g=N.constants.S_IFCHR,h=N.constants.S_IFLNK,k=N.constants.S_IFIFO,n=N.constants.S_IFSOCK;a=function(){function a(){}a.build=function(b,c){void 0===c&&(c=!1);var d=new a,e=b.gid,f=b.atime,g=b.mtime,h=b.ctime;c=c?Wl.default:function(a){return a};d.uid=c(b.uid);d.gid=c(e);d.rdev=c(0);d.blksize=c(4096);d.ino=c(b.ino);d.size=c(b.getSize());d.blocks=
c(1);d.atime=f;d.mtime=g;d.ctime=h;d.birthtime=h;d.atimeMs=c(f.getTime());d.mtimeMs=c(g.getTime());e=c(h.getTime());d.ctimeMs=e;d.birthtimeMs=e;d.dev=c(0);d.mode=c(b.mode);d.nlink=c(b.nlink);return d};a.prototype._checkModeProperty=function(a){return(Number(this.mode)&c)===a};a.prototype.isDirectory=function(){return this._checkModeProperty(d)};a.prototype.isFile=function(){return this._checkModeProperty(e)};a.prototype.isBlockDevice=function(){return this._checkModeProperty(f)};a.prototype.isCharacterDevice=
function(){return this._checkModeProperty(g)};a.prototype.isSymbolicLink=function(){return this._checkModeProperty(h)};a.prototype.isFIFO=function(){return this._checkModeProperty(k)};a.prototype.isSocket=function(){return this._checkModeProperty(n)};return a}();b.Stats=a;b.default=a});qa(oc);var Gb="undefined"!==typeof za?za:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},Va=[],Ca=[],ck="undefined"!==typeof Uint8Array?Uint8Array:Array,ie=!1,Xl={}.toString,Lg=Array.isArray||function(a){return"[object Array]"==
Xl.call(a)};t.TYPED_ARRAY_SUPPORT=void 0!==Gb.TYPED_ARRAY_SUPPORT?Gb.TYPED_ARRAY_SUPPORT:!0;var Yl=t.TYPED_ARRAY_SUPPORT?2147483647:1073741823;t.poolSize=8192;t._augment=function(a){a.__proto__=t.prototype;return a};t.from=function(a,b,c){return Ig(null,a,b,c)};t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array);t.alloc=function(a,b,c){Kg(a);return a=0>=a?ub(null,a):void 0!==b?"string"===typeof c?ub(null,a).fill(b,c):ub(null,a).fill(b):ub(null,a)};t.allocUnsafe=
function(a){return je(null,a)};t.allocUnsafeSlow=function(a){return je(null,a)};t.isBuffer=Wa;t.compare=function(a,b){if(!kb(a)||!kb(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};t.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};t.concat=function(a,b){if(!Lg(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return t.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=t.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!kb(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};t.byteLength=Jg;t.prototype._isBuffer=!0;t.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var b=0;b<a;b+=2)Wb(this,b,b+1);return this};t.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)Wb(this,b,b+3),Wb(this,b+1,b+2);return this};t.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)Wb(this,b,b+7),Wb(this,b+1,b+6),Wb(this,b+2,b+5),Wb(this,b+3,b+4);return this};t.prototype.toString=function(){var a=
this.length|0;return 0===a?"":0===arguments.length?Ng(this,0,a):ak.apply(this,arguments)};t.prototype.equals=function(a){if(!kb(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===t.compare(this,a)};t.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};t.prototype.compare=function(a,b,c,d,e){if(!kb(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);
void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,h=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};t.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};t.prototype.indexOf=function(a,
b,c){return Og(this,a,b,c,!0)};t.prototype.lastIndexOf=function(a,b,c){return Og(this,a,b,c,!1)};t.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return yc(kd(a,this.length-b),this,b,c);case "ascii":return yc(Rg(a),this,b,c);case "latin1":case "binary":return yc(Rg(a),this,b,c);case "base64":return yc(Mg(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
a;e=this.length-b;for(var f=[],g=0;g<d.length&&!(0>(e-=2));++g){var h=d.charCodeAt(g);a=h>>8;h%=256;f.push(h);f.push(a)}return yc(f,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Qg=4096;t.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(t.TYPED_ARRAY_SUPPORT)b=
this.subarray(a,b),b.__proto__=t.prototype;else{c=b-a;b=new t(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};t.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||la(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};t.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||la(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};t.prototype.readUInt8=function(a,b){b||la(a,1,this.length);return this[a]};t.prototype.readUInt16LE=function(a,
b){b||la(a,2,this.length);return this[a]|this[a+1]<<8};t.prototype.readUInt16BE=function(a,b){b||la(a,2,this.length);return this[a]<<8|this[a+1]};t.prototype.readUInt32LE=function(a,b){b||la(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};t.prototype.readUInt32BE=function(a,b){b||la(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};t.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||la(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&
(d*=256);)c+=this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};t.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||la(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};t.prototype.readInt8=function(a,b){b||la(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};t.prototype.readInt16LE=function(a,b){b||la(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};t.prototype.readInt16BE=function(a,b){b||
la(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};t.prototype.readInt32LE=function(a,b){b||la(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};t.prototype.readInt32BE=function(a,b){b||la(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};t.prototype.readFloatLE=function(a,b){b||la(a,4,this.length);return id(this,a,!0,23,4)};t.prototype.readFloatBE=function(a,b){b||la(a,4,this.length);return id(this,a,!1,23,4)};t.prototype.readDoubleLE=
function(a,b){b||la(a,8,this.length);return id(this,a,!0,52,8)};t.prototype.readDoubleBE=function(a,b){b||la(a,8,this.length);return id(this,a,!1,52,8)};t.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||ua(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};t.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||ua(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};
t.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||ua(this,a,b,1,255,0);t.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};t.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||ua(this,a,b,2,65535,0);t.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):ld(this,a,b,!0);return b+2};t.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||ua(this,a,b,2,65535,0);t.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):ld(this,a,b,!1);return b+2};t.prototype.writeUInt32LE=function(a,b,c){a=
+a;b|=0;c||ua(this,a,b,4,4294967295,0);t.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):md(this,a,b,!0);return b+4};t.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||ua(this,a,b,4,4294967295,0);t.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):md(this,a,b,!1);return b+4};t.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),ua(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>
a&&0===f&&0!==this[b+d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};t.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),ua(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};t.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||ua(this,a,b,1,127,-128);t.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};t.prototype.writeInt16LE=function(a,b,c){a=+a;
b|=0;c||ua(this,a,b,2,32767,-32768);t.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):ld(this,a,b,!0);return b+2};t.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||ua(this,a,b,2,32767,-32768);t.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):ld(this,a,b,!1);return b+2};t.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||ua(this,a,b,4,2147483647,-2147483648);t.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):md(this,a,b,!0);return b+4};t.prototype.writeInt32BE=
function(a,b,c){a=+a;b|=0;c||ua(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);t.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):md(this,a,b,!1);return b+4};t.prototype.writeFloatLE=function(a,b,c){c||nd(this,a,b,4);jd(this,a,b,!0,23,4);return b+4};t.prototype.writeFloatBE=function(a,b,c){c||nd(this,a,b,4);jd(this,a,b,!1,23,4);return b+4};t.prototype.writeDoubleLE=function(a,b,c){c||nd(this,a,b,8);jd(this,a,b,!0,52,8);return b+8};t.prototype.writeDoubleBE=
function(a,b,c){c||nd(this,a,b,8);jd(this,a,b,!1,52,8);return b+8};t.prototype.copy=function(a,b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===
a&&c<b&&b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!t.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};t.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!t.isEncoding(d))throw new TypeError("Unknown encoding: "+
d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=kb(a)?a:kd((new t(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var bk=/[^+\/0-9A-Za-z-_]/g,Ga=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:Yl,Buffer:t,SlowBuffer:function(a){+a!=a&&(a=0);return t.alloc(+a)},isBuffer:Wa}),
vb=Tg,wb=Ug;"function"===typeof Gb.setTimeout&&(vb=setTimeout);"function"===typeof Gb.clearTimeout&&(wb=clearTimeout);var lb=[],ic=!1,Fb,od=-1;Xg.prototype.run=function(){this.fun.apply(null,this.array)};var pc=Gb.performance||{},Zl=pc.now||pc.mozNow||pc.msNow||pc.oNow||pc.webkitNow||function(){return(new Date).getTime()},$l=new Date,xb={nextTick:Da,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Xb,addListener:Xb,once:Xb,off:Xb,removeListener:Xb,removeAllListeners:Xb,emit:Xb,
binding:function(){throw Error("process.binding is not supported");},cwd:function(){return"/"},chdir:function(){throw Error("process.chdir is not supported");},umask:function(){return 0},hrtime:function(a){var b=.001*Zl.call(pc),c=Math.floor(b);b=Math.floor(b%1*1E9);a&&(c-=a[0],b-=a[1],0>b&&(c--,b+=1E9));return[c,b]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-$l)/1E3}},Sb="function"===typeof Object.create?function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,
{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){function c(){}a.super_=b;c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},fk=/%[sdj%]/g,qd={},oe;mb.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};mb.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",
regexp:"red"};var nk="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Od={inherits:Sb,_extend:Zg,log:function(){console.log("%s - %s",mk(),me.apply(null,arguments))},isBuffer:function(a){return Wa(a)},isPrimitive:se,isFunction:jc,isError:zc,isDate:Ac,isObject:Yb,isRegExp:Zb,isUndefined:La,isSymbol:function(a){return"symbol"===typeof a},isString:pd,isNumber:ah,isNullOrUndefined:function(a){return null==a},isNull:function(a){return null===a},isBoolean:pe,isArray:$g,inspect:mb,deprecate:ne,
format:me,debuglog:Yg},am=Object.prototype.hasOwnProperty,mh=Object.keys||function(a){var b=[],c;for(c in a)am.call(a,c)&&b.push(c);return b},lh=Array.prototype.slice,ue,ok=/\s*function\s+([^\(\s]*)\s*/;sa.AssertionError=we;Sb(we,Error);sa.fail=ra;sa.ok=ve;sa.equal=hh;sa.notEqual=ih;sa.deepEqual=jh;sa.deepStrictEqual=kh;sa.notDeepEqual=nh;sa.notDeepStrictEqual=oh;sa.strictEqual=ph;sa.notStrictEqual=qh;sa.throws=function(a,b,c){sh(!0,a,b,c)};sa.doesNotThrow=function(a,b,c){sh(!1,a,b,c)};sa.ifError=
function(a){if(a)throw a;};var Rc=W(function(a,b){function c(a){return function(a){function b(b){for(var c=[],e=1;e<arguments.length;e++)c[e-1]=arguments[e];c=a.call(this,d(b,c))||this;c.code=b;c[h]=b;c.name=a.prototype.name+" ["+c[h]+"]";return c}g(b,a);return b}(a)}function d(a,b){null===n&&(n=sa);n.strictEqual(typeof a,"string");var c=k[a];n(c,"An invalid error message key was used: "+a+".");if("function"===typeof c)a=c;else{null===p&&(p=Od);a=p.format;if(void 0===b||0===b.length)return c;b.unshift(c)}return String(a.apply(null,
b))}function e(a,b){k[a]="function"===typeof b?b:String(b)}function f(a,b){n(a,"expected is required");n("string"===typeof b,"thing is required");if(Array.isArray(a)){var c=a.length;n(0<c,"At least one expected value needs to be specified");a=a.map(function(a){return String(a)});return 2<c?"one of "+b+" "+a.slice(0,c-1).join(", ")+", or "+a[c-1]:2===c?"one of "+b+" "+a[0]+" or "+a[1]:"of "+b+" "+a[0]}return"of "+b+" "+String(a)}var g=wa&&wa.__extends||function(){function a(b,c){a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)}return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var h="undefined"===typeof Symbol?"_kCode":Symbol("code"),k={},n=null,p=null;a=function(a){function c(c){if("object"!==typeof c||null===c)throw new b.TypeError("ERR_INVALID_ARG_TYPE",
"options","object");if(c.message)var d=a.call(this,c.message)||this;else null===p&&(p=Od),d=a.call(this,p.inspect(c.actual).slice(0,128)+" "+(c.operator+" "+p.inspect(c.expected).slice(0,128)))||this;d.generatedMessage=!c.message;d.name="AssertionError [ERR_ASSERTION]";d.code="ERR_ASSERTION";d.actual=c.actual;d.expected=c.expected;d.operator=c.operator;b.Error.captureStackTrace(d,c.stackStartFunction);return d}g(c,a);return c}(wa.Error);b.AssertionError=a;b.message=d;b.E=e;b.Error=c(wa.Error);b.TypeError=
c(wa.TypeError);b.RangeError=c(wa.RangeError);e("ERR_ARG_NOT_ITERABLE","%s must be iterable");e("ERR_ASSERTION","%s");e("ERR_BUFFER_OUT_OF_BOUNDS",function(a,b){return b?"Attempt to write outside buffer bounds":'"'+a+'" is outside of buffer bounds'});e("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received");e("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s");e("ERR_CPU_USAGE","Unable to obtain cpu usage %s");e("ERR_DNS_SET_SERVERS_FAILED",function(a,
b){return'c-ares failed to set servers: "'+a+'" ['+b+"]"});e("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value");e("ERR_ENCODING_NOT_SUPPORTED",function(a){return'The "'+a+'" encoding is not supported'});e("ERR_ENCODING_INVALID_ENCODED_DATA",function(a){return"The encoded data was not valid for encoding "+a});e("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client");e("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s");e("ERR_HTTP_TRAILER_INVALID",
"Trailers are invalid with this transfer encoding");e("ERR_INDEX_OUT_OF_RANGE","Index out of range");e("ERR_INVALID_ARG_TYPE",function(a,b,c){n(a,"name is required");if(b.includes("not ")){var d="must not be";b=b.split("not ")[1]}else d="must be";if(Array.isArray(a))d="The "+a.map(function(a){return'"'+a+'"'}).join(", ")+" arguments "+d+" "+f(b,"type");else if(a.includes(" argument"))d="The "+a+" "+d+" "+f(b,"type");else{var e=a.includes(".")?"property":"argument";d='The "'+a+'" '+e+" "+d+" "+f(b,
"type")}3<=arguments.length&&(d+=". Received type "+(null!==c?typeof c:"null"));return d});e("ERR_INVALID_ARRAY_LENGTH",function(a,b,c){n.strictEqual(typeof c,"number");return'The array "'+a+'" (length '+c+") must be of length "+b+"."});e("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s");e("ERR_INVALID_CALLBACK","Callback must be a function");e("ERR_INVALID_CHAR","Invalid character in %s");e("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column");e("ERR_INVALID_FD",
'"fd" must be a positive integer: %s');e("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s');e("ERR_INVALID_FILE_URL_PATH","File URL path %s");e("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent");e("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s");e("ERR_INVALID_OPT_VALUE",function(a,b){return'The value "'+String(b)+'" is invalid for option "'+a+'"'});e("ERR_INVALID_OPT_VALUE_ENCODING",function(a){return'The value "'+String(a)+'" is invalid for option "encoding"'});
e("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL');e("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s");e("ERR_INVALID_THIS",'Value of "this" must be of type %s');e("ERR_INVALID_TUPLE","%s must be an iterable %s tuple");e("ERR_INVALID_URL","Invalid URL: %s");e("ERR_INVALID_URL_SCHEME",function(a){return"The URL must be "+f(a,"scheme")});e("ERR_IPC_CHANNEL_CLOSED","Channel closed");e("ERR_IPC_DISCONNECTED",
"IPC channel is already disconnected");e("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe");e("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks");e("ERR_MISSING_ARGS",function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];n(0<a.length,"At least one arg needs to be specified");b="The ";var c=a.length;a=a.map(function(a){return'"'+a+'"'});switch(c){case 1:b+=a[0]+" argument";break;case 2:b+=a[0]+" and "+a[1]+" arguments";break;default:b+=a.slice(0,c-1).join(", "),
b+=", and "+a[c-1]+" arguments"}return b+" must be specified"});e("ERR_MULTIPLE_CALLBACK","Callback called multiple times");e("ERR_NAPI_CONS_FUNCTION","Constructor must be a function");e("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object");e("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support");e("ERR_NO_LONGER_SUPPORTED","%s is no longer supported");e("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s");e("ERR_SOCKET_ALREADY_BOUND","Socket is already bound");
e("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536");e("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6");e("ERR_SOCKET_CANNOT_SEND","Unable to send data");e("ERR_SOCKET_CLOSED","Socket is closed");e("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running");e("ERR_STDERR_CLOSE","process.stderr cannot be closed");e("ERR_STDOUT_CLOSE","process.stdout cannot be closed");e("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode");e("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s");
e("ERR_TLS_DH_PARAM_SIZE",function(a){return"DH parameter size "+a+" is less than 2048"});e("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout");e("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate");e("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext');e("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected");e("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming");e("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0");
e("ERR_UNKNOWN_ENCODING","Unknown encoding: %s");e("ERR_UNKNOWN_SIGNAL","Unknown signal: %s");e("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type");e("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type");e("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl")});qa(Rc);var Ka=W(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.ENCODING_UTF8="utf8";b.assertEncoding=function(a){if(a&&!t.isEncoding(a))throw new Rc.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",
a);};b.strToEncoding=function(a,d){return d&&d!==b.ENCODING_UTF8?"buffer"===d?new t(a):(new t(a)).toString(d):a}});qa(Ka);var zf=W(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});var c=N.constants.S_IFMT,d=N.constants.S_IFDIR,e=N.constants.S_IFREG,f=N.constants.S_IFBLK,g=N.constants.S_IFCHR,h=N.constants.S_IFLNK,k=N.constants.S_IFIFO,n=N.constants.S_IFSOCK;a=function(){function a(){this.name="";this.mode=0}a.build=function(b,c){var d=new a,e=b.getNode().mode;d.name=Ka.strToEncoding(b.getName(),
c);d.mode=e;return d};a.prototype._checkModeProperty=function(a){return(this.mode&c)===a};a.prototype.isDirectory=function(){return this._checkModeProperty(d)};a.prototype.isFile=function(){return this._checkModeProperty(e)};a.prototype.isBlockDevice=function(){return this._checkModeProperty(f)};a.prototype.isCharacterDevice=function(){return this._checkModeProperty(g)};a.prototype.isSymbolicLink=function(){return this._checkModeProperty(h)};a.prototype.isFIFO=function(){return this._checkModeProperty(k)};
a.prototype.isSocket=function(){return this._checkModeProperty(n)};return a}();b.Dirent=a;b.default=a});qa(zf);var nj=function(a,b){function c(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;0<=c&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=xe(a).substr(1);b=xe(b).substr(1);a=c(a.split("/"));b=c(b.split("/"));for(var d=Math.min(a.length,b.length),e=d,f=0;f<d;f++)if(a[f]!==b[f]){e=f;break}d=[];for(f=e;f<a.length;f++)d.push("..");d=d.concat(b.slice(e));return d.join("/")};"ab".substr(-1);
var qc=W(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});a="function"===typeof setImmediate?setImmediate.bind(wa):setTimeout.bind(wa);b.default=a});qa(qc);var xa=W(function(a,b){function c(){var a="undefined"!==typeof xb&&xb;if(!a)try{a=xb}catch(e){}a||(a={});a.getuid||(a.getuid=function(){return 0});a.getgid||(a.getgid=function(){return 0});a.cwd||(a.cwd=function(){return"/"});a.nextTick||(a.nextTick=qc.default);a.emitWarning||(a.emitWarning=function(a,b){console.warn(""+b+(b?": ":
"")+a)});a.env||(a.env={});return a}Object.defineProperty(b,"__esModule",{value:!0});b.createProcess=c;b.default=c()});qa(xa);yb.prototype=Object.create(null);O.EventEmitter=O;O.usingDomains=!1;O.prototype.domain=void 0;O.prototype._events=void 0;O.prototype._maxListeners=void 0;O.defaultMaxListeners=10;O.init=function(){this.domain=null;this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new yb,this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};O.prototype.setMaxListeners=
function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');this._maxListeners=a;return this};O.prototype.getMaxListeners=function(){return void 0===this._maxListeners?O.defaultMaxListeners:this._maxListeners};O.prototype.emit=function(a){var b,c,d="error"===a;if(b=this._events)d=d&&null==b.error;else if(!d)return!1;var e=this.domain;if(d){b=arguments[1];if(e)b||(b=Error('Uncaught, unspecified "error" event')),b.domainEmitter=this,b.domain=e,b.domainThrown=
!1,e.emit("error",b);else{if(b instanceof Error)throw b;e=Error('Uncaught, unspecified "error" event. ('+b+")");e.context=b;throw e;}return!1}e=b[a];if(!e)return!1;b="function"===typeof e;var f=arguments.length;switch(f){case 1:if(b)e.call(this);else for(b=e.length,e=Bc(e,b),d=0;d<b;++d)e[d].call(this);break;case 2:d=arguments[1];if(b)e.call(this,d);else for(b=e.length,e=Bc(e,b),f=0;f<b;++f)e[f].call(this,d);break;case 3:d=arguments[1];f=arguments[2];if(b)e.call(this,d,f);else for(b=e.length,e=Bc(e,
b),c=0;c<b;++c)e[c].call(this,d,f);break;case 4:d=arguments[1];f=arguments[2];c=arguments[3];if(b)e.call(this,d,f,c);else{b=e.length;e=Bc(e,b);for(var g=0;g<b;++g)e[g].call(this,d,f,c)}break;default:d=Array(f-1);for(c=1;c<f;c++)d[c-1]=arguments[c];if(b)e.apply(this,d);else for(b=e.length,e=Bc(e,b),f=0;f<b;++f)e[f].apply(this,d)}return!0};O.prototype.addListener=function(a,b){return th(this,a,b,!1)};O.prototype.on=O.prototype.addListener;O.prototype.prependListener=function(a,b){return th(this,a,b,
!0)};O.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,uh(this,a,b));return this};O.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.prependListener(a,uh(this,a,b));return this};O.prototype.removeListener=function(a,b){var c;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var d=this._events;if(!d)return this;
var e=d[a];if(!e)return this;if(e===b||e.listener&&e.listener===b)0===--this._eventsCount?this._events=new yb:(delete d[a],d.removeListener&&this.emit("removeListener",a,e.listener||b));else if("function"!==typeof e){var f=-1;for(c=e.length;0<c--;)if(e[c]===b||e[c].listener&&e[c].listener===b){var g=e[c].listener;f=c;break}if(0>f)return this;if(1===e.length){e[0]=void 0;if(0===--this._eventsCount)return this._events=new yb,this;delete d[a]}else{c=f+1;for(var h=e.length;c<h;f+=1,c+=1)e[f]=e[c];e.pop()}d.removeListener&&
this.emit("removeListener",a,g||b)}return this};O.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=new yb,this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=new yb:delete b[a]),this;if(0===arguments.length){b=Object.keys(b);for(var c=0,d;c<b.length;++c)d=b[c],"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events=new yb;this._eventsCount=0;return this}b=
b[a];if("function"===typeof b)this.removeListener(a,b);else if(b){do this.removeListener(a,b[b.length-1]);while(b[0])}return this};O.prototype.listeners=function(a){var b=this._events;if(b)if(a=b[a])if("function"===typeof a)a=[a.listener||a];else{b=Array(a.length);for(var c=0;c<b.length;++c)b[c]=a[c].listener||a[c];a=b}else a=[];else a=[];return a};O.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):vh.call(a,b)};O.prototype.listenerCount=vh;O.prototype.eventNames=
function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var Pd=W(function(a,b){var c=wa&&wa.__extends||function(){function a(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)}return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var d=N.constants.S_IFMT,
e=N.constants.S_IFDIR,f=N.constants.S_IFREG,g=N.constants.S_IFLNK,h=N.constants.O_APPEND;b.SEP="/";a=function(a){function b(b,c){void 0===c&&(c=438);var d=a.call(this)||this;d.uid=xa.default.getuid();d.gid=xa.default.getgid();d.atime=new Date;d.mtime=new Date;d.ctime=new Date;d.buf=null;d.perm=438;d.mode=f;d.nlink=1;d.symlink=null;d.perm=c;d.mode|=c;d.ino=b;return d}c(b,a);b.prototype.getString=function(a){void 0===a&&(a="utf8");return this.getBuffer().toString(a)};b.prototype.setString=function(a){this.buf=
t.from(a,"utf8");this.touch()};b.prototype.getBuffer=function(){this.buf||this.setBuffer(t.allocUnsafe(0));return t.from(this.buf)};b.prototype.setBuffer=function(a){this.buf=t.from(a);this.touch()};b.prototype.getSize=function(){return this.buf?this.buf.length:0};b.prototype.setModeProperty=function(a){this.mode=this.mode&~d|a};b.prototype.setIsFile=function(){this.setModeProperty(f)};b.prototype.setIsDirectory=function(){this.setModeProperty(e)};b.prototype.setIsSymlink=function(){this.setModeProperty(g)};
b.prototype.isFile=function(){return(this.mode&d)===f};b.prototype.isDirectory=function(){return(this.mode&d)===e};b.prototype.isSymlink=function(){return(this.mode&d)===g};b.prototype.makeSymlink=function(a){this.symlink=a;this.setIsSymlink()};b.prototype.write=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=a.length);void 0===d&&(d=0);this.buf||(this.buf=t.allocUnsafe(0));if(d+c>this.buf.length){var e=t.allocUnsafe(d+c);this.buf.copy(e,0,0,this.buf.length);this.buf=e}a.copy(this.buf,d,b,b+c);
this.touch();return c};b.prototype.read=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=a.byteLength);void 0===d&&(d=0);this.buf||(this.buf=t.allocUnsafe(0));c>a.byteLength&&(c=a.byteLength);c+d>this.buf.length&&(c=this.buf.length-d);this.buf.copy(a,b,d,d+c);return c};b.prototype.truncate=function(a){void 0===a&&(a=0);if(a)if(this.buf||(this.buf=t.allocUnsafe(0)),a<=this.buf.length)this.buf=this.buf.slice(0,a);else{var b=t.allocUnsafe(0);this.buf.copy(b);b.fill(0,a)}else this.buf=t.allocUnsafe(0);
this.touch()};b.prototype.chmod=function(a){this.perm=a;this.mode=this.mode&-512|a;this.touch()};b.prototype.chown=function(a,b){this.uid=a;this.gid=b;this.touch()};b.prototype.touch=function(){this.mtime=new Date;this.emit("change",this)};b.prototype.canRead=function(a,b){void 0===a&&(a=xa.default.getuid());void 0===b&&(b=xa.default.getgid());return this.perm&4||b===this.gid&&this.perm&32||a===this.uid&&this.perm&256?!0:!1};b.prototype.canWrite=function(a,b){void 0===a&&(a=xa.default.getuid());void 0===
b&&(b=xa.default.getgid());return this.perm&2||b===this.gid&&this.perm&16||a===this.uid&&this.perm&128?!0:!1};b.prototype.del=function(){this.emit("delete",this)};b.prototype.toJSON=function(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}};return b}(O.EventEmitter);b.Node=a;a=function(a){function d(b,c,d){var e=a.call(this)||this;
e.parent=null;e.children={};e.steps=[];e.node=null;e.ino=0;e.length=0;e.vol=b;e.parent=c;e.steps=c?c.steps.concat([d]):[d];return e}c(d,a);d.prototype.setNode=function(a){this.node=a;this.ino=a.ino};d.prototype.getNode=function(){return this.node};d.prototype.createChild=function(a,b){void 0===b&&(b=this.vol.createNode());var c=new d(this.vol,this,a);c.setNode(b);b.isDirectory();this.setChild(a,c);return c};d.prototype.setChild=function(a,b){void 0===b&&(b=new d(this.vol,this,a));this.children[a]=
b;b.parent=this;this.length++;this.emit("child:add",b,this);return b};d.prototype.deleteChild=function(a){delete this.children[a.getName()];this.length--;this.emit("child:delete",a,this)};d.prototype.getChild=function(a){return this.children[a]};d.prototype.getPath=function(){return this.steps.join(b.SEP)};d.prototype.getName=function(){return this.steps[this.steps.length-1]};d.prototype.walk=function(a,b,c){void 0===b&&(b=a.length);void 0===c&&(c=0);if(c>=a.length||c>=b)return this;var d=this.getChild(a[c]);
return d?d.walk(a,b,c+1):null};d.prototype.toJSON=function(){return{steps:this.steps,ino:this.ino,children:Object.keys(this.children)}};return d}(O.EventEmitter);b.Link=a;a=function(){function a(a,b,c,d){this.node=this.link=null;this.position=0;this.link=a;this.node=b;this.flags=c;this.fd=d}a.prototype.getString=function(){return this.node.getString()};a.prototype.setString=function(a){this.node.setString(a)};a.prototype.getBuffer=function(){return this.node.getBuffer()};a.prototype.setBuffer=function(a){this.node.setBuffer(a)};
a.prototype.getSize=function(){return this.node.getSize()};a.prototype.truncate=function(a){this.node.truncate(a)};a.prototype.seekTo=function(a){this.position=a};a.prototype.stats=function(){return oc.default.build(this.node)};a.prototype.write=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=a.length);"number"!==typeof d&&(d=this.position);this.flags&h&&(d=this.getSize());a=this.node.write(a,b,c,d);this.position=d+a;return a};a.prototype.read=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=
a.byteLength);"number"!==typeof d&&(d=this.position);a=this.node.read(a,b,c,d);this.position=d+a;return a};a.prototype.chmod=function(a){this.node.chmod(a)};a.prototype.chown=function(a,b){this.node.chown(a,b)};return a}();b.File=a});qa(Pd);var oj=W(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b,e){var c=setTimeout.apply(null,arguments);c&&"object"===typeof c&&"function"===typeof c.unref&&c.unref();return c}});qa(oj);$b.prototype.push=function(a){a={data:a,next:null};
0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length};$b.prototype.unshift=function(a){a={data:a,next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length};$b.prototype.shift=function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}};$b.prototype.clear=function(){this.head=this.tail=null;this.length=0};$b.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=
b.next;)c+=a+b.data;return c};$b.prototype.concat=function(a){if(0===this.length)return t.alloc(0);if(1===this.length)return this.head.data;a=t.allocUnsafe(a>>>0);for(var b=this.head,c=0;b;)b.data.copy(a,c),c+=b.data.length,b=b.next;return a};var ye=W(function(a,b){function c(a,b){for(var c in a)b[c]=a[c]}function d(a,b,c){return e(a,b,c)}var e=Ga.Buffer;e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=Ga:(c(Ga,b),b.Buffer=d);c(e,d);d.from=function(a,b,c){if("number"===typeof a)throw new TypeError("Argument must not be a number");
return e(a,b,c)};d.alloc=function(a,b,c){if("number"!==typeof a)throw new TypeError("Argument must be a number");a=e(a);void 0!==b?"string"===typeof c?a.fill(b,c):a.fill(b):a.fill(0);return a};d.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return e(a)};d.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return Ga.SlowBuffer(a)}}).Buffer,wh=ye.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},yh=Cc;Cc.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};Cc.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};Cc.prototype.text=function(a,b){var c=Ak(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,
0,c);return a.toString("utf8",b,c)};Cc.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};K.ReadableState=xh;var T=Yg("stream");Sb(K,O);K.prototype.push=function(a,b){var c=this._readableState;c.objectMode||"string"!==typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=t.from(a,
b),b=""));return zh(this,c,a,b,!1)};K.prototype.unshift=function(a){return zh(this,this._readableState,a,"",!0)};K.prototype.isPaused=function(){return!1===this._readableState.flowing};K.prototype.setEncoding=function(a){this._readableState.decoder=new yh(a);this._readableState.encoding=a;return this};K.prototype.read=function(a){T("read",a);a=parseInt(a,10);var b=this._readableState,c=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return T("read: emitReadable",
b.length,b.ended),0===b.length&&b.ended?Be(this):sd(this),null;a=Ah(a,b);if(0===a&&b.ended)return 0===b.length&&Be(this),null;var d=b.needReadable;T("need readable",d);if(0===b.length||b.length-a<b.highWaterMark)d=!0,T("length less than watermark",d);b.ended||b.reading?T("reading or ended",!1):d&&(T("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=Ah(c,b)));d=0<a?Ch(a,b):null;null===d?(b.needReadable=!0,a=0):b.length-=a;0===b.length&&
(b.ended||(b.needReadable=!0),c!==a&&b.ended&&Be(this));null!==d&&this.emit("data",d);return d};K.prototype._read=function(){this.emit("error",Error("not implemented"))};K.prototype.pipe=function(a,b){function c(a){T("onunpipe");a===p&&e()}function d(){T("onend");a.end()}function e(){T("cleanup");a.removeListener("close",h);a.removeListener("finish",k);a.removeListener("drain",y);a.removeListener("error",g);a.removeListener("unpipe",c);p.removeListener("end",d);p.removeListener("end",e);p.removeListener("data",
f);u=!0;!q.awaitDrain||a._writableState&&!a._writableState.needDrain||y()}function f(b){T("ondata");r=!1;!1!==a.write(b)||r||((1===q.pipesCount&&q.pipes===a||1<q.pipesCount&&-1!==Dh(q.pipes,a))&&!u&&(T("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,r=!0),p.pause())}function g(b){T("onerror",b);n();a.removeListener("error",g);0===a.listeners("error").length&&a.emit("error",b)}function h(){a.removeListener("finish",k);n()}function k(){T("onfinish");a.removeListener("close",
h);n()}function n(){T("unpipe");p.unpipe(a)}var p=this,q=this._readableState;switch(q.pipesCount){case 0:q.pipes=a;break;case 1:q.pipes=[q.pipes,a];break;default:q.pipes.push(a)}q.pipesCount+=1;T("pipe count=%d opts=%j",q.pipesCount,b);b=b&&!1===b.end?e:d;if(q.endEmitted)Da(b);else p.once("end",b);a.on("unpipe",c);var y=Dk(p);a.on("drain",y);var u=!1,r=!1;p.on("data",f);Bk(a,"error",g);a.once("close",h);a.once("finish",k);a.emit("pipe",p);q.flowing||(T("pipe resume"),p.resume());return a};K.prototype.unpipe=
function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this);return this}if(!a){a=b.pipes;var c=b.pipesCount;b.pipes=null;b.pipesCount=0;b.flowing=!1;for(b=0;b<c;b++)a[b].emit("unpipe",this);return this}c=Dh(b.pipes,a);if(-1===c)return this;b.pipes.splice(c,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this);return this};K.prototype.on=
function(a,b){b=O.prototype.on.call(this,a,b);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&sd(this):Da(Ek,this)));return b};K.prototype.addListener=K.prototype.on;K.prototype.resume=function(){var a=this._readableState;a.flowing||(T("resume"),a.flowing=!0,a.resumeScheduled||(a.resumeScheduled=!0,Da(Fk,this,a)));return this};K.prototype.pause=
function(){T("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};K.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){T("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)});a.on("data",function(e){T("wrapped data");b.decoder&&(e=b.decoder.write(e));b.objectMode&&(null===e||void 0===e)||!(b.objectMode||e&&e.length)||
d.push(e)||(c=!0,a.pause())});for(var e in a)void 0===this[e]&&"function"===typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));Hk(["error","close","destroy","pause","resume"],function(b){a.on(b,d.emit.bind(d,b))});d._read=function(b){T("wrapped _read",b);c&&(c=!1,a.resume())};return d};K._fromList=Ch;ta.WritableState=Ce;Sb(ta,O);Ce.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};ta.prototype.pipe=function(){this.emit("error",
Error("Cannot pipe, not readable"))};ta.prototype.write=function(a,b,c){var d=this._writableState,e=!1;"function"===typeof b&&(c=b,b=null);t.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding);"function"!==typeof c&&(c=Ik);if(d.ended)d=c,a=Error("write after end"),this.emit("error",a),Da(d,a);else{var f=c,g=!0,h=!1;null===a?h=new TypeError("May not write null values to stream"):t.isBuffer(a)||"string"===typeof a||void 0===a||d.objectMode||(h=new TypeError("Invalid non-string/buffer chunk"));h&&(this.emit("error",
h),Da(f,h),g=!1);g&&(d.pendingcb++,e=b,d.objectMode||!1===d.decodeStrings||"string"!==typeof a||(a=t.from(a,e)),t.isBuffer(a)&&(e="buffer"),f=d.objectMode?1:a.length,d.length+=f,b=d.length<d.highWaterMark,b||(d.needDrain=!0),d.writing||d.corked?(f=d.lastBufferedRequest,d.lastBufferedRequest=new Jk(a,e,c),f?f.next=d.lastBufferedRequest:d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1):De(this,d,!1,f,a,e,c),e=b)}return e};ta.prototype.cork=function(){this._writableState.corked++};ta.prototype.uncork=
function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||Fh(this,a))};ta.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};ta.prototype._write=function(a,b,c){c(Error("not implemented"))};
ta.prototype._writev=null;ta.prototype.end=function(a,b,c){var d=this._writableState;"function"===typeof a?(c=a,b=a=null):"function"===typeof b&&(c=b,b=null);null!==a&&void 0!==a&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending&&!d.finished){a=c;d.ending=!0;Ih(this,d);if(a)if(d.finished)Da(a);else this.once("finish",a);d.ended=!0;this.writable=!1}};Sb(Ma,K);for(var pj=Object.keys(ta.prototype),Af=0;Af<pj.length;Af++){var Bf=pj[Af];Ma.prototype[Bf]||(Ma.prototype[Bf]=ta.prototype[Bf])}Sb(cb,
Ma);cb.prototype.push=function(a,b){this._transformState.needTransform=!1;return Ma.prototype.push.call(this,a,b)};cb.prototype._transform=function(){throw Error("Not implemented");};cb.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;d.transforming||(a=this._readableState,(d.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};cb.prototype._read=function(){var a=this._transformState;null!==a.writechunk&&a.writecb&&
!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0};Sb(Dc,cb);Dc.prototype._transform=function(a,b,c){c(null,a)};Sb(ia,O);ia.Readable=K;ia.Writable=ta;ia.Duplex=Ma;ia.Transform=cb;ia.PassThrough=Dc;ia.Stream=ia;ia.prototype.pipe=function(a,b){function c(b){a.writable&&!1===a.write(b)&&k.pause&&k.pause()}function d(){k.readable&&k.resume&&k.resume()}function e(){n||(n=!0,a.end())}function f(){n||(n=!0,"function"===typeof a.destroy&&
a.destroy())}function g(a){h();if(0===O.listenerCount(this,"error"))throw a;}function h(){k.removeListener("data",c);a.removeListener("drain",d);k.removeListener("end",e);k.removeListener("close",f);k.removeListener("error",g);a.removeListener("error",g);k.removeListener("end",h);k.removeListener("close",h);a.removeListener("close",h)}var k=this;k.on("data",c);a.on("drain",d);a._isStdio||b&&!1===b.end||(k.on("end",e),k.on("close",f));var n=!1;k.on("error",g);a.on("error",g);k.on("end",h);k.on("close",
h);a.on("close",h);a.emit("pipe",k);return a};var Nk=Array.prototype.slice,qj=W(function(a,b){function c(a,b,c){void 0===c&&(c=function(a){return a});return function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];return new Promise(function(e,f){a[b].bind(a).apply(void 0,d.concat([function(a,b){return a?f(a):e(c(b))}]))})}}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){this.vol=a;this.fd=b}a.prototype.appendFile=function(a,b){return c(this.vol,"appendFile")(this.fd,
a,b)};a.prototype.chmod=function(a){return c(this.vol,"fchmod")(this.fd,a)};a.prototype.chown=function(a,b){return c(this.vol,"fchown")(this.fd,a,b)};a.prototype.close=function(){return c(this.vol,"close")(this.fd)};a.prototype.datasync=function(){return c(this.vol,"fdatasync")(this.fd)};a.prototype.read=function(a,b,d,e){return c(this.vol,"read",function(b){return{bytesRead:b,buffer:a}})(this.fd,a,b,d,e)};a.prototype.readFile=function(a){return c(this.vol,"readFile")(this.fd,a)};a.prototype.stat=
function(a){return c(this.vol,"fstat")(this.fd,a)};a.prototype.sync=function(){return c(this.vol,"fsync")(this.fd)};a.prototype.truncate=function(a){return c(this.vol,"ftruncate")(this.fd,a)};a.prototype.utimes=function(a,b){return c(this.vol,"futimes")(this.fd,a,b)};a.prototype.write=function(a,b,d,e){return c(this.vol,"write",function(b){return{bytesWritten:b,buffer:a}})(this.fd,a,b,d,e)};a.prototype.writeFile=function(a,b){return c(this.vol,"writeFile")(this.fd,a,b)};return a}();b.FileHandle=d;
b.default=function(a){return"undefined"===typeof Promise?null:{FileHandle:d,access:function(b,d){return c(a,"access")(b,d)},appendFile:function(b,e,h){return c(a,"appendFile")(b instanceof d?b.fd:b,e,h)},chmod:function(b,d){return c(a,"chmod")(b,d)},chown:function(b,d,e){return c(a,"chown")(b,d,e)},copyFile:function(b,d,e){return c(a,"copyFile")(b,d,e)},lchmod:function(b,d){return c(a,"lchmod")(b,d)},lchown:function(b,d,e){return c(a,"lchown")(b,d,e)},link:function(b,d){return c(a,"link")(b,d)},lstat:function(b,
d){return c(a,"lstat")(b,d)},mkdir:function(b,d){return c(a,"mkdir")(b,d)},mkdtemp:function(b,d){return c(a,"mkdtemp")(b,d)},open:function(b,e,h){return c(a,"open",function(b){return new d(a,b)})(b,e,h)},readdir:function(b,d){return c(a,"readdir")(b,d)},readFile:function(b,e){return c(a,"readFile")(b instanceof d?b.fd:b,e)},readlink:function(b,d){return c(a,"readlink")(b,d)},realpath:function(b,d){return c(a,"realpath")(b,d)},rename:function(b,d){return c(a,"rename")(b,d)},rmdir:function(b){return c(a,
"rmdir")(b)},stat:function(b,d){return c(a,"stat")(b,d)},symlink:function(b,d,e){return c(a,"symlink")(b,d,e)},truncate:function(b,d){return c(a,"truncate")(b,d)},unlink:function(b){return c(a,"unlink")(b)},utimes:function(b,d,e){return c(a,"utimes")(b,d,e)},writeFile:function(b,e,h){return c(a,"writeFile")(b instanceof d?b.fd:b,e,h)}}}});qa(qj);var bm=W(function(a,b){(function(c){function d(a){throw RangeError(B[a]);}function e(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function f(a,
b){var c=a.split("@"),d="";1<c.length&&(d=c[0]+"@",a=c[1]);a=a.replace(A,".");a=a.split(".");b=e(a,b).join(".");return d+b}function g(a){for(var b=[],c=0,d=a.length,e,f;c<d;)e=a.charCodeAt(c++),55296<=e&&56319>=e&&c<d?(f=a.charCodeAt(c++),56320==(f&64512)?b.push(((e&1023)<<10)+(f&1023)+65536):(b.push(e),c--)):b.push(e);return b}function h(a){return e(a,function(a){var b="";65535<a&&(a-=65536,b+=C(a>>>10&1023|55296),a=56320|a&1023);return b+C(a)}).join("")}function k(a,b){return a+22+75*(26>a)-((0!=
b)<<5)}function n(a,b,c){var d=0;a=c?D(a/700):a>>1;for(a+=D(a/b);455<a;d+=36)a=D(a/35);return D(d+36*a/(a+38))}function p(a){var b=[],c=a.length,e=0,f=128,g=72,k,p,q=a.lastIndexOf("-");0>q&&(q=0);for(k=0;k<q;++k)128<=a.charCodeAt(k)&&d("not-basic"),b.push(a.charCodeAt(k));for(q=0<q?q+1:0;q<c;){k=e;var r=1;for(p=36;;p+=36){q>=c&&d("invalid-input");var u=a.charCodeAt(q++);u=10>u-48?u-22:26>u-65?u-65:26>u-97?u-97:36;(36<=u||u>D((2147483647-e)/r))&&d("overflow");e+=u*r;var t=p<=g?1:p>=g+26?26:p-g;if(u<
t)break;u=36-t;r>D(2147483647/u)&&d("overflow");r*=u}r=b.length+1;g=n(e-k,r,0==k);D(e/r)>2147483647-f&&d("overflow");f+=D(e/r);e%=r;b.splice(e++,0,f)}return h(b)}function q(a){var b,c,e,f=[];a=g(a);var h=a.length,p=128,q=0,r=72;for(e=0;e<h;++e){var u=a[e];128>u&&f.push(C(u))}for((b=c=f.length)&&f.push("-");b<h;){var t=2147483647;for(e=0;e<h;++e)u=a[e],u>=p&&u<t&&(t=u);var y=b+1;t-p>D((2147483647-q)/y)&&d("overflow");q+=(t-p)*y;p=t;for(e=0;e<h;++e)if(u=a[e],u<p&&2147483647<++q&&d("overflow"),u==p){var v=
q;for(t=36;;t+=36){u=t<=r?1:t>=r+26?26:t-r;if(v<u)break;var x=v-u;v=36-u;f.push(C(k(u+x%v,0)));v=D(x/v)}f.push(C(k(v,0)));r=n(q,y,b==c);q=0;++b}++q;++p}return f.join("")}var t=b&&!b.nodeType&&b,u=a&&!a.nodeType&&a,r="object"==typeof wa&&wa;if(r.global===r||r.window===r||r.self===r)c=r;var v=/^xn--/,x=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},
D=Math.floor,C=String.fromCharCode,E;r={version:"1.3.2",ucs2:{decode:g,encode:h},decode:p,encode:q,toASCII:function(a){return f(a,function(a){return x.test(a)?"xn--"+q(a):a})},toUnicode:function(a){return f(a,function(a){return v.test(a)?p(a.slice(4).toLowerCase()):a})}};if(t&&u)if(a.exports==t)u.exports=r;else for(E in r)r.hasOwnProperty(E)&&(t[E]=r[E]);else c.punycode=r})(wa)}),db={isString:function(a){return"string"===typeof a},isObject:function(a){return"object"===typeof a&&null!==a},isNull:function(a){return null===
a},isNullOrUndefined:function(a){return null==a}},Cf=W(function(a,b){b.decode=b.parse=Ok;b.encode=b.stringify=Pk}),cm=/^([a-z0-9.+-]+:)/i,dm=/:[0-9]*$/,em=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,fm="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),Df=["'"].concat(fm),rj=["%","/","?",";","#"].concat(Df),sj=["/","?","#"],tj=/^[+a-z0-9A-Z_-]{0,63}$/,gm=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hm={javascript:!0,"javascript:":!0},Ef={javascript:!0,"javascript:":!0},rc={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,
"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};ba.prototype.parse=function(a,b,c){if(!db.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?");d=-1!==d&&d<a.indexOf("#")?"?":"#";a=a.split(d);a[0]=a[0].replace(/\\/g,"/");a=a.join(d);d=a.trim();if(!c&&1===a.split("#").length&&(a=em.exec(d)))return this.href=this.path=d,this.pathname=a[1],a[2]?(this.search=a[2],this.query=b?Cf.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query=
{}),this;if(a=cm.exec(d)){a=a[0];var e=a.toLowerCase();this.protocol=e;d=d.substr(a.length)}if(c||a||d.match(/^\/\/[^@\/]+@[^@\/]+/)){var f="//"===d.substr(0,2);!f||a&&Ef[a]||(d=d.substr(2),this.slashes=!0)}if(!Ef[a]&&(f||a&&!rc[a])){f=-1;for(c=0;c<sj.length;c++)a=d.indexOf(sj[c]),-1!==a&&(-1===f||a<f)&&(f=a);f=-1===f?d.lastIndexOf("@"):d.lastIndexOf("@",f);-1!==f&&(c=d.slice(0,f),d=d.slice(f+1),this.auth=decodeURIComponent(c));f=-1;for(c=0;c<rj.length;c++)a=d.indexOf(rj[c]),-1!==a&&(-1===f||a<f)&&
(f=a);-1===f&&(f=d.length);this.host=d.slice(0,f);d=d.slice(f);this.parseHost();this.hostname=this.hostname||"";f="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!f){var g=this.hostname.split(/\./);c=0;for(a=g.length;c<a;c++){var h=g[c];if(h&&!h.match(tj)){for(var k="",n=0,p=h.length;n<p;n++)k=127<h.charCodeAt(n)?k+"x":k+h[n];if(!k.match(tj)){a=g.slice(0,c);c=g.slice(c+1);if(h=h.match(gm))a.push(h[1]),c.unshift(h[2]);c.length&&(d="/"+c.join(".")+d);this.hostname=a.join(".");
break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();f||(this.hostname=bm.toASCII(this.hostname));c=this.port?":"+this.port:"";this.host=(this.hostname||"")+c;this.href+=this.host;f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==d[0]&&(d="/"+d))}if(!hm[e])for(c=0,a=Df.length;c<a;c++)f=Df[c],-1!==d.indexOf(f)&&(h=encodeURIComponent(f),h===f&&(h=escape(f)),d=d.split(f).join(h));c=d.indexOf("#");-1!==c&&(this.hash=d.substr(c),d=d.slice(0,c));c=d.indexOf("?");
-1!==c?(this.search=d.substr(c),this.query=d.substr(c+1),b&&(this.query=Cf.parse(this.query)),d=d.slice(0,c)):b&&(this.search="",this.query={});d&&(this.pathname=d);rc[e]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)c=this.pathname||"",this.path=c+(this.search||"");this.href=this.format();return this};ba.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||
"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port));this.query&&db.isObject(this.query)&&Object.keys(this.query).length&&(f=Cf.stringify(this.query));a=this.search||f&&"?"+f||"";b&&":"!==b.substr(-1)&&(b+=":");this.slashes||(!b||rc[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e="");d&&"#"!==d.charAt(0)&&(d="#"+d);a&&"?"!==a.charAt(0)&&(a="?"+a);c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)});
a=a.replace("#","%23");return b+e+c+a+d};ba.prototype.resolve=function(a){return this.resolveObject(Fc(a,!1,!0)).format()};ba.prototype.resolveObject=function(a){if(db.isString(a)){var b=new ba;b.parse(a,!1,!0);a=b}b=new ba;for(var c=Object.keys(this),d=0;d<c.length;d++){var e=c[d];b[e]=this[e]}b.hash=a.hash;if(""===a.href)return b.href=b.format(),b;if(a.slashes&&!a.protocol){c=Object.keys(a);for(d=0;d<c.length;d++)e=c[d],"protocol"!==e&&(b[e]=a[e]);rc[b.protocol]&&b.hostname&&!b.pathname&&(b.path=
b.pathname="/");b.href=b.format();return b}if(a.protocol&&a.protocol!==b.protocol){if(!rc[a.protocol]){c=Object.keys(a);for(d=0;d<c.length;d++)e=c[d],b[e]=a[e];b.href=b.format();return b}b.protocol=a.protocol;if(a.host||Ef[a.protocol])b.pathname=a.pathname;else{for(var f=(a.pathname||"").split("/");f.length&&!(a.host=f.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==f[0]&&f.unshift("");2>f.length&&f.unshift("");b.pathname=f.join("/")}b.search=a.search;b.query=a.query;b.host=a.host||
"";b.auth=a.auth;b.hostname=a.hostname||a.host;b.port=a.port;if(b.pathname||b.search)b.path=(b.pathname||"")+(b.search||"");b.slashes=b.slashes||a.slashes;b.href=b.format();return b}c=b.pathname&&"/"===b.pathname.charAt(0);var g=a.host||a.pathname&&"/"===a.pathname.charAt(0),h=c=g||c||b.host&&a.pathname;d=b.pathname&&b.pathname.split("/")||[];f=a.pathname&&a.pathname.split("/")||[];if(e=b.protocol&&!rc[b.protocol])b.hostname="",b.port=null,b.host&&(""===d[0]?d[0]=b.host:d.unshift(b.host)),b.host=
"",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===f[0]?f[0]=a.host:f.unshift(a.host)),a.host=null),c=c&&(""===f[0]||""===d[0]);if(g)b.host=a.host||""===a.host?a.host:b.host,b.hostname=a.hostname||""===a.hostname?a.hostname:b.hostname,b.search=a.search,b.query=a.query,d=f;else if(f.length)d||(d=[]),d.pop(),d=d.concat(f),b.search=a.search,b.query=a.query;else if(!db.isNullOrUndefined(a.search))return e&&(b.hostname=b.host=d.shift(),e=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=
e.shift(),b.host=b.hostname=e.shift()),b.search=a.search,b.query=a.query,db.isNull(b.pathname)&&db.isNull(b.search)||(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.href=b.format(),b;if(!d.length)return b.pathname=null,b.path=b.search?"/"+b.search:null,b.href=b.format(),b;g=d.slice(-1)[0];f=(b.host||a.host||1<d.length)&&("."===g||".."===g)||""===g;for(var k=0,n=d.length;0<=n;n--)g=d[n],"."===g?d.splice(n,1):".."===g?(d.splice(n,1),k++):k&&(d.splice(n,1),k--);if(!c&&!h)for(;k--;k)d.unshift("..");
!c||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift("");f&&"/"!==d.join("/").substr(-1)&&d.push("");h=""===d[0]||d[0]&&"/"===d[0].charAt(0);e&&(b.hostname=b.host=h?"":d.length?d.shift():"",e=b.host&&0<b.host.indexOf("@")?b.host.split("@"):!1)&&(b.auth=e.shift(),b.host=b.hostname=e.shift());(c||b.host&&d.length)&&!h&&d.unshift("");d.length?b.pathname=d.join("/"):(b.pathname=null,b.path=null);db.isNull(b.pathname)&&db.isNull(b.search)||(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:""));b.auth=
a.auth||b.auth;b.slashes=b.slashes||a.slashes;b.href=b.format();return b};ba.prototype.parseHost=function(){var a=this.host,b=dm.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length));a&&(this.hostname=a)};var im={parse:Fc,resolve:function(a,b){return Fc(a,!1,!0).resolve(b)},resolveObject:function(a,b){return a?Fc(a,!1,!0).resolveObject(b):b},format:function(a){db.isString(a)&&(a=Fc(a));return a instanceof ba?a.format():ba.prototype.format.call(a)},Url:ba},uj=W(function(a,
b){function c(a,b){a=a[b];return 0<b&&("/"===a||e&&"\\"===a)}function d(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(e){var d=a;if("string"!==typeof d)throw new TypeError("expected a string");d=d.replace(/[\\\/]+/g,"/");if(!1!==b)if(b=d,d=b.length-1,2>d)d=b;else{for(;c(b,d);)d--;d=b.substr(0,d+1)}return d.replace(/^([a-zA-Z]+:|\.\/)/,"")}return a}Object.defineProperty(b,"__esModule",{value:!0});b.unixify=d;b.correctPath=function(a){return d(a.replace(/^\\\\\?\\.:\\/,"\\"))};
var e="win32"===xb.platform});qa(uj);var Sc=W(function(a,b){function c(a,b){void 0===b&&(b=xa.default.cwd());return X(b,a)}function d(a,b){return"function"===typeof a?[e(),a]:[e(a),t(b)]}function e(a){void 0===a&&(a={});return Na({},Fa,a)}function f(a){return"number"===typeof a?Na({},za,{mode:a}):Na({},za,a)}function g(a,b,c,d){void 0===b&&(b="");void 0===c&&(c="");void 0===d&&(d="");var e="";c&&(e=" '"+c+"'");d&&(e+=" -> '"+d+"'");switch(a){case "ENOENT":return"ENOENT: no such file or directory, "+
b+e;case "EBADF":return"EBADF: bad file descriptor, "+b+e;case "EINVAL":return"EINVAL: invalid argument, "+b+e;case "EPERM":return"EPERM: operation not permitted, "+b+e;case "EPROTO":return"EPROTO: protocol error, "+b+e;case "EEXIST":return"EEXIST: file already exists, "+b+e;case "ENOTDIR":return"ENOTDIR: not a directory, "+b+e;case "EISDIR":return"EISDIR: illegal operation on a directory, "+b+e;case "EACCES":return"EACCES: permission denied, "+b+e;case "ENOTEMPTY":return"ENOTEMPTY: directory not empty, "+
b+e;case "EMFILE":return"EMFILE: too many open files, "+b+e;case "ENOSYS":return"ENOSYS: function not implemented, "+b+e;default:return a+": error occurred, "+b+e}}function h(a,b,c,d,e){void 0===b&&(b="");void 0===c&&(c="");void 0===d&&(d="");void 0===e&&(e=Error);b=new e(g(a,b,c,d));b.code=a;return b}function k(a,b,c,d,e){void 0===b&&(b="");void 0===c&&(c="");void 0===d&&(d="");void 0===e&&(e=Error);throw h(a,b,c,d,e);}function n(a){if("number"===typeof a)return a;if("string"===typeof a){var b=Z[a];
if("undefined"!==typeof b)return b}throw new Rc.TypeError("ERR_INVALID_OPT_VALUE","flags",a);}function p(a,b){if(b){var c=typeof b;switch(c){case "string":a=Na({},a,{encoding:b});break;case "object":a=Na({},a,b);break;default:throw TypeError("Expected options to be either an object or a string, but got "+c+" instead");}}else return a;"buffer"!==a.encoding&&Ka.assertEncoding(a.encoding);return a}function q(a){return function(b){return p(a,b)}}function t(a){if("function"!==typeof a)throw TypeError(w.CB);
return a}function u(a){return function(b,c){return"function"===typeof b?[a(),b]:[a(b),t(c)]}}function r(a){if("string"!==typeof a&&!Ga.Buffer.isBuffer(a)){try{if(!(a instanceof im.URL))throw new TypeError(w.PATH_STR);}catch(cc){throw new TypeError(w.PATH_STR);}if(""!==a.hostname)throw new Rc.TypeError("ERR_INVALID_FILE_URL_HOST",xa.default.platform);a=a.pathname;for(var b=0;b<a.length;b++)if("%"===a[b]){var c=a.codePointAt(b+2)|32;if("2"===a[b+1]&&102===c)throw new Rc.TypeError("ERR_INVALID_FILE_URL_PATH",
"must not include encoded / characters");}a=decodeURIComponent(a)}a=String(a);D(a);return a}function v(a,b){return(a=c(a,b).substr(1))?a.split(W):[]}function x(a){return v(r(a))}function A(a,b){void 0===b&&(b=Ka.ENCODING_UTF8);return Ga.Buffer.isBuffer(a)?a:a instanceof Uint8Array?Ga.Buffer.from(a):Ga.Buffer.from(String(a),b)}function B(a,b){return b&&"buffer"!==b?a.toString(b):a}function D(a,b){if(-1!==(""+a).indexOf("\x00")){a=Error("Path must be a string without null bytes");a.code="ENOENT";if("function"!==
typeof b)throw a;xa.default.nextTick(b,a);return!1}return!0}function C(a,b){a="number"===typeof a?a:"string"===typeof a?parseInt(a,8):b?C(b):void 0;if("number"!==typeof a||isNaN(a))throw new TypeError(w.MODE_INT);return a}function E(a){if(a>>>0!==a)throw TypeError(w.FD);}function F(a){if("string"===typeof a&&+a==a)return+a;if(a instanceof Date)return a.getTime()/1E3;if(isFinite(a))return 0>a?Date.now()/1E3:a;throw Error("Cannot parse time: "+a);}function I(a,b,c){return"function"===typeof a?[c,a]:
[a,b]}function L(a){if("number"!==typeof a)throw TypeError(w.UID);}function P(a){if("number"!==typeof a)throw TypeError(w.GID);}function T(a){a.emit("stop")}function J(a,b,c){if(!(this instanceof J))return new J(a,b,c);this._vol=a;c=Na({},p(c,{}));void 0===c.highWaterMark&&(c.highWaterMark=65536);ia.Readable.call(this,c);this.path=r(b);this.fd=void 0===c.fd?null:c.fd;this.flags=void 0===c.flags?"r":c.flags;this.mode=void 0===c.mode?438:c.mode;this.start=c.start;this.end=c.end;this.autoClose=void 0===
c.autoClose?!0:c.autoClose;this.pos=void 0;this.bytesRead=0;if(void 0!==this.start){if("number"!==typeof this.start)throw new TypeError('"start" option must be a Number');if(void 0===this.end)this.end=Infinity;else if("number"!==typeof this.end)throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw Error('"start" option must be <= "end" option');this.pos=this.start}"number"!==typeof this.fd&&this.open();this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}
function U(){this.close()}function K(a,b,c){if(!(this instanceof K))return new K(a,b,c);this._vol=a;c=Na({},p(c,{}));ia.Writable.call(this,c);this.path=r(b);this.fd=void 0===c.fd?null:c.fd;this.flags=void 0===c.flags?"w":c.flags;this.mode=void 0===c.mode?438:c.mode;this.start=c.start;this.autoClose=void 0===c.autoClose?!0:!!c.autoClose;this.pos=void 0;this.bytesWritten=0;if(void 0!==this.start){if("number"!==typeof this.start)throw new TypeError('"start" option must be a Number');if(0>this.start)throw Error('"start" must be >= zero');
this.pos=this.start}c.encoding&&this.setDefaultEncoding(c.encoding);"number"!==typeof this.fd&&this.open();this.once("finish",function(){this.autoClose&&this.close()})}var R=wa&&wa.__extends||function(){function a(b,c){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return a(b,c)}return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,
new d)}}();Object.defineProperty(b,"__esModule",{value:!0});var X=xe,ca=N.constants.O_RDONLY,Y=N.constants.O_WRONLY,V=N.constants.O_RDWR,M=N.constants.O_CREAT,da=N.constants.O_EXCL,ba=N.constants.O_TRUNC,ea=N.constants.O_APPEND,ka=N.constants.O_SYNC,ma=N.constants.F_OK,oa=N.constants.COPYFILE_EXCL,m=N.constants.COPYFILE_FICLONE_FORCE,W="/",la="win32"===xa.default.platform,w={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",
UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"},Z;(function(a){a[a.r=ca]="r";a[a["r+"]=V]="r+";a[a.rs=ca|ka]="rs";a[a.sr=a.rs]="sr";a[a["rs+"]=V|ka]="rs+";a[a["sr+"]=a["rs+"]]="sr+";
a[a.w=Y|M|ba]="w";a[a.wx=Y|M|ba|da]="wx";a[a.xw=a.wx]="xw";a[a["w+"]=V|M|ba]="w+";a[a["wx+"]=V|M|ba|da]="wx+";a[a["xw+"]=a["wx+"]]="xw+";a[a.a=Y|ea|M]="a";a[a.ax=Y|ea|M|da]="ax";a[a.xa=a.ax]="xa";a[a["a+"]=V|ea|M]="a+";a[a["ax+"]=V|ea|M|da]="ax+";a[a["xa+"]=a["ax+"]]="xa+"})(Z=b.FLAGS||(b.FLAGS={}));b.flagsToNumber=n;a={encoding:"utf8"};var ja=q(a),na=u(ja),pa=q({flag:"r"}),qa={encoding:"utf8",mode:438,flag:Z[Z.w]},ra=q(qa),sa={encoding:"utf8",mode:438,flag:Z[Z.a]},ta=q(sa),va=u(ta),ua=q(a),ya=u(ua),
za={mode:511,recursive:!1},Aa=q({encoding:"utf8",withFileTypes:!1}),Ea=u(Aa),Fa={bigint:!1};b.pathToFilename=r;if(la){var Ha=c,Ia=uj.unixify;c=function(a,b){return Ia(Ha(a,b))}}b.filenameToSteps=v;b.pathToSteps=x;b.dataToStr=function(a,b){void 0===b&&(b=Ka.ENCODING_UTF8);return Ga.Buffer.isBuffer(a)?a.toString(b):a instanceof Uint8Array?Ga.Buffer.from(a).toString(b):String(a)};b.dataToBuffer=A;b.bufferToEncoding=B;b.toUnixTimestamp=F;var Ba=!xa.default.env.MEMFS_DONT_WARN;a=function(){function a(a){void 0===
a&&(a={});this.ino=0;this.inodes={};this.releasedInos=[];this.fds={};this.releasedFds=[];this.maxFiles=1E4;this.openFiles=0;this.promisesApi=qj.default(this);this.statWatchers={};this.props=Na({Node:Pd.Node,Link:Pd.Link,File:Pd.File},a);a=this.createLink();a.setNode(this.createNode(!0));var b=this;this.StatWatcher=function(a){function c(){return a.call(this,b)||this}R(c,a);return c}(Ca);this.ReadStream=function(a){function c(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.apply(this,
[b].concat(c))||this}R(c,a);return c}(J);this.WriteStream=function(a){function c(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a.apply(this,[b].concat(c))||this}R(c,a);return c}(K);this.FSWatcher=function(a){function c(){return a.call(this,b)||this}R(c,a);return c}(Da);this.root=a}a.fromJSON=function(b,c){var d=new a;d.fromJSON(b,c);return d};Object.defineProperty(a.prototype,"promises",{get:function(){Ba&&(Ba=!1,xa.default.emitWarning("The fs.promises API is experimental","ExperimentalWarning"));
if(null===this.promisesApi)throw Error("Promise is not supported in this environment.");return this.promisesApi},enumerable:!0,configurable:!0});a.prototype.createLink=function(a,b,c,d){void 0===c&&(c=!1);return a?a.createChild(b,this.createNode(c,d)):new this.props.Link(this,null,"")};a.prototype.deleteLink=function(a){var b=a.parent;return b?(b.deleteChild(a),a.vol=null,a.parent=null,!0):!1};a.prototype.newInoNumber=function(){return this.releasedInos.length?this.releasedInos.pop():this.ino=(this.ino+
1)%4294967295};a.prototype.newFdNumber=function(){return this.releasedFds.length?this.releasedFds.pop():a.fd--};a.prototype.createNode=function(a,b){void 0===a&&(a=!1);b=new this.props.Node(this.newInoNumber(),b);a&&b.setIsDirectory();return this.inodes[b.ino]=b};a.prototype.getNode=function(a){return this.inodes[a]};a.prototype.deleteNode=function(a){a.del();delete this.inodes[a.ino];this.releasedInos.push(a.ino)};a.prototype.genRndStr=function(){var a=(Math.random()+1).toString(36).substr(2,6);
return 6===a.length?a:this.genRndStr()};a.prototype.getLink=function(a){return this.root.walk(a)};a.prototype.getLinkOrThrow=function(a,b){var c=v(a);(c=this.getLink(c))||k("ENOENT",b,a);return c};a.prototype.getResolvedLink=function(a){a="string"===typeof a?v(a):a;for(var b=this.root,c=0;c<a.length;){b=b.getChild(a[c]);if(!b)return null;var d=b.getNode();d.isSymlink()?(a=d.symlink.concat(a.slice(c+1)),b=this.root,c=0):c++}return b};a.prototype.getResolvedLinkOrThrow=function(a,b){var c=this.getResolvedLink(a);
c||k("ENOENT",b,a);return c};a.prototype.resolveSymlinks=function(a){return this.getResolvedLink(a.steps.slice(1))};a.prototype.getLinkAsDirOrThrow=function(a,b){var c=this.getLinkOrThrow(a,b);c.getNode().isDirectory()||k("ENOTDIR",b,a);return c};a.prototype.getLinkParent=function(a){return this.root.walk(a,a.length-1)};a.prototype.getLinkParentAsDirOrThrow=function(a,b){a=a instanceof Array?a:v(a);var c=this.getLinkParent(a);c||k("ENOENT",b,W+a.join(W));c.getNode().isDirectory()||k("ENOTDIR",b,W+
a.join(W));return c};a.prototype.getFileByFd=function(a){return this.fds[String(a)]};a.prototype.getFileByFdOrThrow=function(a,b){if(a>>>0!==a)throw TypeError(w.FD);(a=this.getFileByFd(a))||k("EBADF",b);return a};a.prototype.getNodeByIdOrCreate=function(a,b,c){if("number"===typeof a){a=this.getFileByFd(a);if(!a)throw Error("File nto found");return a.node}var d=x(a),e=this.getLink(d);if(e)return e.getNode();if(b&M&&(b=this.getLinkParent(d)))return e=this.createLink(b,d[d.length-1],!1,c),e.getNode();
k("ENOENT","getNodeByIdOrCreate",r(a))};a.prototype.wrapAsync=function(a,b,c){var d=this;t(c);qc.default(function(){try{c(null,a.apply(d,b))}catch(rb){c(rb)}})};a.prototype._toJSON=function(a,b,c){void 0===a&&(a=this.root);void 0===b&&(b={});var d=!0,e;for(e in a.children){d=!1;var f=a.getChild(e),g=f.getNode();g.isFile()?(f=f.getPath(),c&&(f=nj(c,f)),b[f]=g.getString()):g.isDirectory()&&this._toJSON(f,b,c)}a=a.getPath();c&&(a=nj(c,a));a&&d&&(b[a]=null);return b};a.prototype.toJSON=function(a,b,c){void 0===
b&&(b={});void 0===c&&(c=!1);var d=[];if(a){a instanceof Array||(a=[a]);for(var e=0;e<a.length;e++){var f=r(a[e]);(f=this.getResolvedLink(f))&&d.push(f)}}else d.push(this.root);if(!d.length)return b;for(e=0;e<d.length;e++)f=d[e],this._toJSON(f,b,c?f.getPath():"");return b};a.prototype.fromJSON=function(a,b){void 0===b&&(b=xa.default.cwd());for(var d in a){var e=a[d];if("string"===typeof e){d=c(d,b);var f=v(d);1<f.length&&(f=W+f.slice(0,f.length-1).join(W),this.mkdirpBase(f,511));this.writeFileSync(d,
e)}else this.mkdirpBase(d,511)}};a.prototype.reset=function(){this.ino=0;this.inodes={};this.releasedInos=[];this.fds={};this.releasedFds=[];this.openFiles=0;this.root=this.createLink();this.root.setNode(this.createNode(!0))};a.prototype.mountSync=function(a,b){this.fromJSON(b,a)};a.prototype.openLink=function(a,b,c){void 0===c&&(c=!0);if(this.openFiles>=this.maxFiles)throw h("EMFILE","open",a.getPath());var d=a;c&&(d=this.resolveSymlinks(a));d||k("ENOENT","open",a.getPath());c=d.getNode();c.isDirectory()&&
b!==Z.r&&k("EISDIR","open",a.getPath());b&Y||c.canRead()||k("EACCES","open",a.getPath());a=new this.props.File(a,c,b,this.newFdNumber());this.fds[a.fd]=a;this.openFiles++;b&ba&&a.truncate();return a};a.prototype.openFile=function(a,b,c,d){void 0===d&&(d=!0);var e=v(a),f=d?this.getResolvedLink(e):this.getLink(e);if(!f&&b&M){var g=this.getResolvedLink(e.slice(0,e.length-1));g||k("ENOENT","open",W+e.join(W));b&M&&"number"===typeof c&&(f=this.createLink(g,e[e.length-1],!1,c))}if(f)return this.openLink(f,
b,d);k("ENOENT","open",a)};a.prototype.openBase=function(a,b,c,d){void 0===d&&(d=!0);(b=this.openFile(a,b,c,d))||k("ENOENT","open",a);return b.fd};a.prototype.openSync=function(a,b,c){void 0===c&&(c=438);c=C(c);a=r(a);b=n(b);return this.openBase(a,b,c)};a.prototype.open=function(a,b,c,d){var e=c;"function"===typeof c&&(e=438,d=c);c=C(e||438);a=r(a);b=n(b);this.wrapAsync(this.openBase,[a,b,c],d)};a.prototype.closeFile=function(a){this.fds[a.fd]&&(this.openFiles--,delete this.fds[a.fd],this.releasedFds.push(a.fd))};
a.prototype.closeSync=function(a){E(a);a=this.getFileByFdOrThrow(a,"close");this.closeFile(a)};a.prototype.close=function(a,b){E(a);this.wrapAsync(this.closeSync,[a],b)};a.prototype.openFileOrGetById=function(a,b,c){if("number"===typeof a){a=this.fds[a];if(!a)throw h("ENOENT");return a}return this.openFile(r(a),b,c)};a.prototype.readBase=function(a,b,c,d,e){return this.getFileByFdOrThrow(a).read(b,Number(c),Number(d),e)};a.prototype.readSync=function(a,b,c,d,e){E(a);return this.readBase(a,b,c,d,e)};
a.prototype.read=function(a,b,c,d,e,f){var g=this;t(f);if(0===d)return xa.default.nextTick(function(){f&&f(null,0,b)});qc.default(function(){try{var h=g.readBase(a,b,c,d,e);f(null,h,b)}catch(Il){f(Il)}})};a.prototype.readFileBase=function(a,b,c){var d="number"===typeof a&&a>>>0===a;if(!d){var e=r(a);e=v(e);(e=this.getResolvedLink(e))&&e.getNode().isDirectory()&&k("EISDIR","open",e.getPath());a=this.openSync(a,b)}try{var f=B(this.getFileByFdOrThrow(a).getBuffer(),c)}finally{d||this.closeSync(a)}return f};
a.prototype.readFileSync=function(a,b){b=pa(b);var c=n(b.flag);return this.readFileBase(a,c,b.encoding)};a.prototype.readFile=function(a,b,c){c=u(pa)(b,c);b=c[0];c=c[1];var d=n(b.flag);this.wrapAsync(this.readFileBase,[a,d,b.encoding],c)};a.prototype.writeBase=function(a,b,c,d,e){return this.getFileByFdOrThrow(a,"write").write(b,c,d,e)};a.prototype.writeSync=function(a,b,c,d,e){E(a);var f="string"!==typeof b;if(f){var g=c|0,h=d;c=e}else var k=d;b=A(b,k);f?"undefined"===typeof h&&(h=b.length):(g=0,
h=b.length);return this.writeBase(a,b,g,h,c)};a.prototype.write=function(a,b,c,d,e,f){var g=this;E(a);var h=typeof b,k=typeof c,m=typeof d,G=typeof e;if("string"!==h)if("function"===k)var Q=c;else if("function"===m){var n=c|0;Q=d}else if("function"===G){n=c|0;var p=d;Q=e}else{n=c|0;p=d;var cc=e;Q=f}else if("function"===k)Q=c;else if("function"===m)cc=c,Q=d;else if("function"===G){cc=c;var q=d;Q=e}var r=A(b,q);"string"!==h?"undefined"===typeof p&&(p=r.length):(n=0,p=r.length);t(Q);qc.default(function(){try{var c=
g.writeBase(a,r,n,p,cc);"string"!==h?Q(null,c,r):Q(null,c,b)}catch(Jl){Q(Jl)}})};a.prototype.writeFileBase=function(a,b,c,d){var e="number"===typeof a;a=e?a:this.openBase(r(a),c,d);d=0;var f=b.length;c=c&ea?null:0;try{for(;0<f;){var g=this.writeSync(a,b,d,f,c);d+=g;f-=g;null!==c&&(c+=g)}}finally{e||this.closeSync(a)}};a.prototype.writeFileSync=function(a,b,c){var d=ra(c);c=n(d.flag);var e=C(d.mode);b=A(b,d.encoding);this.writeFileBase(a,b,c,e)};a.prototype.writeFile=function(a,b,c,d){var e=c;"function"===
typeof c&&(e=qa,d=c);var f=ra(e);c=n(f.flag);e=C(f.mode);b=A(b,f.encoding);this.wrapAsync(this.writeFileBase,[a,b,c,e],d)};a.prototype.linkBase=function(a,b){var c=v(a),d=this.getLink(c);d||k("ENOENT","link",a,b);var e=v(b);(c=this.getLinkParent(e))||k("ENOENT","link",a,b);e=e[e.length-1];c.getChild(e)&&k("EEXIST","link",a,b);a=d.getNode();a.nlink++;c.createChild(e,a)};a.prototype.copyFileBase=function(a,b,c){var d=this.readFileSync(a);c&oa&&this.existsSync(b)&&k("EEXIST","copyFile",a,b);c&m&&k("ENOSYS",
"copyFile",a,b);this.writeFileBase(b,d,Z.w,438)};a.prototype.copyFileSync=function(a,b,c){a=r(a);b=r(b);return this.copyFileBase(a,b,c|0)};a.prototype.copyFile=function(a,b,c,d){a=r(a);b=r(b);if("function"===typeof c)var e=0;else e=c,c=d;t(c);this.wrapAsync(this.copyFileBase,[a,b,e],c)};a.prototype.linkSync=function(a,b){a=r(a);b=r(b);this.linkBase(a,b)};a.prototype.link=function(a,b,c){a=r(a);b=r(b);this.wrapAsync(this.linkBase,[a,b],c)};a.prototype.unlinkBase=function(a){var b=v(a);(b=this.getLink(b))||
k("ENOENT","unlink",a);if(b.length)throw Error("Dir not empty...");this.deleteLink(b);a=b.getNode();a.nlink--;0>=a.nlink&&this.deleteNode(a)};a.prototype.unlinkSync=function(a){a=r(a);this.unlinkBase(a)};a.prototype.unlink=function(a,b){a=r(a);this.wrapAsync(this.unlinkBase,[a],b)};a.prototype.symlinkBase=function(a,b){var c=v(b),d=this.getLinkParent(c);d||k("ENOENT","symlink",a,b);c=c[c.length-1];d.getChild(c)&&k("EEXIST","symlink",a,b);b=d.createChild(c);b.getNode().makeSymlink(v(a));return b};
a.prototype.symlinkSync=function(a,b){a=r(a);b=r(b);this.symlinkBase(a,b)};a.prototype.symlink=function(a,b,c,d){c=I(c,d)[1];a=r(a);b=r(b);this.wrapAsync(this.symlinkBase,[a,b],c)};a.prototype.realpathBase=function(a,b){var c=v(a);(c=this.getLink(c))||k("ENOENT","realpath",a);(c=this.resolveSymlinks(c))||k("ENOENT","realpath",a);return Ka.strToEncoding(c.getPath(),b)};a.prototype.realpathSync=function(a,b){return this.realpathBase(r(a),ua(b).encoding)};a.prototype.realpath=function(a,b,c){c=ya(b,
c);b=c[0];c=c[1];a=r(a);this.wrapAsync(this.realpathBase,[a,b.encoding],c)};a.prototype.lstatBase=function(a,b){void 0===b&&(b=!1);var c=this.getLink(v(a));c||k("ENOENT","lstat",a);return oc.default.build(c.getNode(),b)};a.prototype.lstatSync=function(a,b){return this.lstatBase(r(a),e(b).bigint)};a.prototype.lstat=function(a,b,c){c=d(b,c);b=c[0];c=c[1];this.wrapAsync(this.lstatBase,[r(a),b.bigint],c)};a.prototype.statBase=function(a,b){void 0===b&&(b=!1);var c=this.getLink(v(a));c||k("ENOENT","stat",
a);(c=this.resolveSymlinks(c))||k("ENOENT","stat",a);return oc.default.build(c.getNode(),b)};a.prototype.statSync=function(a,b){return this.statBase(r(a),e(b).bigint)};a.prototype.stat=function(a,b,c){c=d(b,c);b=c[0];c=c[1];this.wrapAsync(this.statBase,[r(a),b.bigint],c)};a.prototype.fstatBase=function(a,b){void 0===b&&(b=!1);(a=this.getFileByFd(a))||k("EBADF","fstat");return oc.default.build(a.node,b)};a.prototype.fstatSync=function(a,b){return this.fstatBase(a,e(b).bigint)};a.prototype.fstat=function(a,
b,c){b=d(b,c);this.wrapAsync(this.fstatBase,[a,b[0].bigint],b[1])};a.prototype.renameBase=function(a,b){var c=this.getLink(v(a));c||k("ENOENT","rename",a,b);var d=v(b),e=this.getLinkParent(d);e||k("ENOENT","rename",a,b);(a=c.parent)&&a.deleteChild(c);c.steps=e.steps.concat([d[d.length-1]]);e.setChild(c.getName(),c)};a.prototype.renameSync=function(a,b){a=r(a);b=r(b);this.renameBase(a,b)};a.prototype.rename=function(a,b,c){a=r(a);b=r(b);this.wrapAsync(this.renameBase,[a,b],c)};a.prototype.existsBase=
function(a){return!!this.statBase(a)};a.prototype.existsSync=function(a){try{return this.existsBase(r(a))}catch(Q){return!1}};a.prototype.exists=function(a,b){var c=this,d=r(a);if("function"!==typeof b)throw Error(w.CB);qc.default(function(){try{b(c.existsBase(d))}catch(rb){b(!1)}})};a.prototype.accessBase=function(a){this.getLinkOrThrow(a,"access")};a.prototype.accessSync=function(a,b){void 0===b&&(b=ma);a=r(a);this.accessBase(a,b|0)};a.prototype.access=function(a,b,c){var d=b;"function"===typeof d&&
(d=ma,c=b);a=r(a);this.wrapAsync(this.accessBase,[a,d|0],c)};a.prototype.appendFileSync=function(a,b,c){void 0===c&&(c=sa);c=ta(c);c.flag&&a>>>0!==a||(c.flag="a");this.writeFileSync(a,b,c)};a.prototype.appendFile=function(a,b,c,d){d=va(c,d);c=d[0];d=d[1];c.flag&&a>>>0!==a||(c.flag="a");this.writeFile(a,b,c,d)};a.prototype.readdirBase=function(a,b){var c=v(a);(c=this.getResolvedLink(c))||k("ENOENT","readdir",a);c.getNode().isDirectory()||k("ENOTDIR","scandir",a);if(b.withFileTypes){var d=[];for(e in c.children)d.push(zf.default.build(c.children[e],
b.encoding));la||"buffer"===b.encoding||d.sort(function(a,b){return a.name<b.name?-1:a.name>b.name?1:0});return d}var e=[];for(d in c.children)e.push(Ka.strToEncoding(d,b.encoding));la||"buffer"===b.encoding||e.sort();return e};a.prototype.readdirSync=function(a,b){b=Aa(b);a=r(a);return this.readdirBase(a,b)};a.prototype.readdir=function(a,b,c){c=Ea(b,c);b=c[0];c=c[1];a=r(a);this.wrapAsync(this.readdirBase,[a,b],c)};a.prototype.readlinkBase=function(a,b){var c=this.getLinkOrThrow(a,"readlink").getNode();
c.isSymlink()||k("EINVAL","readlink",a);a=W+c.symlink.join(W);return Ka.strToEncoding(a,b)};a.prototype.readlinkSync=function(a,b){b=ja(b);a=r(a);return this.readlinkBase(a,b.encoding)};a.prototype.readlink=function(a,b,c){c=na(b,c);b=c[0];c=c[1];a=r(a);this.wrapAsync(this.readlinkBase,[a,b.encoding],c)};a.prototype.fsyncBase=function(a){this.getFileByFdOrThrow(a,"fsync")};a.prototype.fsyncSync=function(a){this.fsyncBase(a)};a.prototype.fsync=function(a,b){this.wrapAsync(this.fsyncBase,[a],b)};a.prototype.fdatasyncBase=
function(a){this.getFileByFdOrThrow(a,"fdatasync")};a.prototype.fdatasyncSync=function(a){this.fdatasyncBase(a)};a.prototype.fdatasync=function(a,b){this.wrapAsync(this.fdatasyncBase,[a],b)};a.prototype.ftruncateBase=function(a,b){this.getFileByFdOrThrow(a,"ftruncate").truncate(b)};a.prototype.ftruncateSync=function(a,b){this.ftruncateBase(a,b)};a.prototype.ftruncate=function(a,b,c){b=I(b,c);this.wrapAsync(this.ftruncateBase,[a,b[0]],b[1])};a.prototype.truncateBase=function(a,b){a=this.openSync(a,
"r+");try{this.ftruncateSync(a,b)}finally{this.closeSync(a)}};a.prototype.truncateSync=function(a,b){if(a>>>0===a)return this.ftruncateSync(a,b);this.truncateBase(a,b)};a.prototype.truncate=function(a,b,c){if(a>>>0===a)return this.ftruncate(a,b,c);b=I(b,c,0);this.wrapAsync(this.truncateBase,[a,b[0]],b[1])};a.prototype.futimesBase=function(a,b,c){a=this.getFileByFdOrThrow(a,"futimes").node;a.atime=new Date(1E3*b);a.mtime=new Date(1E3*c)};a.prototype.futimesSync=function(a,b,c){this.futimesBase(a,F(b),
F(c))};a.prototype.futimes=function(a,b,c,d){this.wrapAsync(this.futimesBase,[a,F(b),F(c)],d)};a.prototype.utimesBase=function(a,b,c){a=this.openSync(a,"r+");try{this.futimesBase(a,b,c)}finally{this.closeSync(a)}};a.prototype.utimesSync=function(a,b,c){this.utimesBase(r(a),F(b),F(c))};a.prototype.utimes=function(a,b,c,d){this.wrapAsync(this.utimesBase,[r(a),F(b),F(c)],d)};a.prototype.mkdirBase=function(a,b){var c=v(a);c.length||k("EISDIR","mkdir",a);var d=this.getLinkParentAsDirOrThrow(a,"mkdir");
c=c[c.length-1];d.getChild(c)&&k("EEXIST","mkdir",a);d.createChild(c,this.createNode(!0,b))};a.prototype.mkdirpBase=function(a,b){a=v(a);for(var c=this.root,d=0;d<a.length;d++){var e=a[d];c.getNode().isDirectory()||k("ENOTDIR","mkdir",c.getPath());var f=c.getChild(e);f?f.getNode().isDirectory()?c=f:k("ENOTDIR","mkdir",f.getPath()):c=c.createChild(e,this.createNode(!0,b))}};a.prototype.mkdirSync=function(a,b){b=f(b);var c=C(b.mode,511);a=r(a);b.recursive?this.mkdirpBase(a,c):this.mkdirBase(a,c)};a.prototype.mkdir=
function(a,b,c){c=I(b,c);b=c[1];c=f(c[0]);var d=C(c.mode,511);a=r(a);c.recursive?this.wrapAsync(this.mkdirpBase,[a,d],b):this.wrapAsync(this.mkdirBase,[a,d],b)};a.prototype.mkdirpSync=function(a,b){this.mkdirSync(a,{mode:b,recursive:!0})};a.prototype.mkdirp=function(a,b,c){b=I(b,c);this.mkdir(a,{mode:b[0],recursive:!0},b[1])};a.prototype.mkdtempBase=function(a,b,c){void 0===c&&(c=5);var d=a+this.genRndStr();try{return this.mkdirBase(d,511),Ka.strToEncoding(d,b)}catch(rb){if("EEXIST"===rb.code)if(1<
c)this.mkdtempBase(a,b,c-1);else throw Error("Could not create temp dir.");else throw rb;}};a.prototype.mkdtempSync=function(a,b){b=ja(b).encoding;if(!a||"string"!==typeof a)throw new TypeError("filename prefix is required");if(D(a))return this.mkdtempBase(a,b)};a.prototype.mkdtemp=function(a,b,c){c=na(b,c);b=c[0].encoding;c=c[1];if(!a||"string"!==typeof a)throw new TypeError("filename prefix is required");D(a)&&this.wrapAsync(this.mkdtempBase,[a,b],c)};a.prototype.rmdirBase=function(a){var b=this.getLinkAsDirOrThrow(a,
"rmdir");b.length&&k("ENOTEMPTY","rmdir",a);this.deleteLink(b)};a.prototype.rmdirSync=function(a){this.rmdirBase(r(a))};a.prototype.rmdir=function(a,b){this.wrapAsync(this.rmdirBase,[r(a)],b)};a.prototype.fchmodBase=function(a,b){this.getFileByFdOrThrow(a,"fchmod").chmod(b)};a.prototype.fchmodSync=function(a,b){this.fchmodBase(a,C(b))};a.prototype.fchmod=function(a,b,c){this.wrapAsync(this.fchmodBase,[a,C(b)],c)};a.prototype.chmodBase=function(a,b){a=this.openSync(a,"r+");try{this.fchmodBase(a,b)}finally{this.closeSync(a)}};
a.prototype.chmodSync=function(a,b){b=C(b);a=r(a);this.chmodBase(a,b)};a.prototype.chmod=function(a,b,c){b=C(b);a=r(a);this.wrapAsync(this.chmodBase,[a,b],c)};a.prototype.lchmodBase=function(a,b){a=this.openBase(a,V,0,!1);try{this.fchmodBase(a,b)}finally{this.closeSync(a)}};a.prototype.lchmodSync=function(a,b){b=C(b);a=r(a);this.lchmodBase(a,b)};a.prototype.lchmod=function(a,b,c){b=C(b);a=r(a);this.wrapAsync(this.lchmodBase,[a,b],c)};a.prototype.fchownBase=function(a,b,c){this.getFileByFdOrThrow(a,
"fchown").chown(b,c)};a.prototype.fchownSync=function(a,b,c){L(b);P(c);this.fchownBase(a,b,c)};a.prototype.fchown=function(a,b,c,d){L(b);P(c);this.wrapAsync(this.fchownBase,[a,b,c],d)};a.prototype.chownBase=function(a,b,c){this.getResolvedLinkOrThrow(a,"chown").getNode().chown(b,c)};a.prototype.chownSync=function(a,b,c){L(b);P(c);this.chownBase(r(a),b,c)};a.prototype.chown=function(a,b,c,d){L(b);P(c);this.wrapAsync(this.chownBase,[r(a),b,c],d)};a.prototype.lchownBase=function(a,b,c){this.getLinkOrThrow(a,
"lchown").getNode().chown(b,c)};a.prototype.lchownSync=function(a,b,c){L(b);P(c);this.lchownBase(r(a),b,c)};a.prototype.lchown=function(a,b,c,d){L(b);P(c);this.wrapAsync(this.lchownBase,[r(a),b,c],d)};a.prototype.watchFile=function(a,b,c){a=r(a);var d=b;"function"===typeof d&&(c=b,d=null);if("function"!==typeof c)throw Error('"watchFile()" requires a listener function');b=5007;var e=!0;d&&"object"===typeof d&&("number"===typeof d.interval&&(b=d.interval),"boolean"===typeof d.persistent&&(e=d.persistent));
(d=this.statWatchers[a])||(d=new this.StatWatcher,d.start(a,e,b),this.statWatchers[a]=d);d.addListener("change",c);return d};a.prototype.unwatchFile=function(a,b){a=r(a);var c=this.statWatchers[a];c&&("function"===typeof b?c.removeListener("change",b):c.removeAllListeners("change"),0===c.listenerCount("change")&&(c.stop(),delete this.statWatchers[a]))};a.prototype.createReadStream=function(a,b){return new this.ReadStream(a,b)};a.prototype.createWriteStream=function(a,b){return new this.WriteStream(a,
b)};a.prototype.watch=function(a,b,c){a=r(a);"function"===typeof b&&(c=b,b=null);var d=ja(b);b=d.persistent;var e=d.recursive;d=d.encoding;void 0===b&&(b=!0);void 0===e&&(e=!1);var f=new this.FSWatcher;f.start(a,b,e,d);c&&f.addListener("change",c);return f};a.fd=2147483647;return a}();b.Volume=a;var Ca=function(a){function b(b){var c=a.call(this)||this;c.vol=null;c.timeoutRef=null;c.prev=null;c.onInterval=function(){try{var a=c.vol.statSync(c.filename);c.hasChanged(a)&&(c.emit("change",a,c.prev),
c.prev=a)}finally{c.loop()}};c.vol=b;return c}R(b,a);b.prototype.loop=function(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)};b.prototype.hasChanged=function(a){return a.mtimeMs>this.prev.mtimeMs||a.nlink!==this.prev.nlink?!0:!1};b.prototype.start=function(a,b,c){void 0===b&&(b=!0);void 0===c&&(c=5007);this.filename=r(a);this.setTimeout=b?setTimeout:oj.default;this.interval=c;this.prev=this.vol.statSync(this.filename);this.loop()};b.prototype.stop=function(){clearTimeout(this.timeoutRef);
xa.default.nextTick(T,this)};return b}(O.EventEmitter);b.StatWatcher=Ca;var Ja;Od.inherits(J,ia.Readable);b.ReadStream=J;J.prototype.open=function(){var a=this;this._vol.open(this.path,this.flags,this.mode,function(b,c){b?(a.autoClose&&a.destroy&&a.destroy(),a.emit("error",b)):(a.fd=c,a.emit("open",c),a.read())})};J.prototype._read=function(a){if("number"!==typeof this.fd)return this.once("open",function(){this._read(a)});if(!this.destroyed){if(!Ja||128>Ja.length-Ja.used)Ja=Ga.Buffer.allocUnsafe(this._readableState.highWaterMark),
Ja.used=0;var b=Ja,c=Math.min(Ja.length-Ja.used,a),d=Ja.used;void 0!==this.pos&&(c=Math.min(this.end-this.pos+1,c));if(0>=c)return this.push(null);var e=this;this._vol.read(this.fd,Ja,Ja.used,c,this.pos,function(a,c){a?(e.autoClose&&e.destroy&&e.destroy(),e.emit("error",a)):(a=null,0<c&&(e.bytesRead+=c,a=b.slice(d,d+c)),e.push(a))});void 0!==this.pos&&(this.pos+=c);Ja.used+=c}};J.prototype._destroy=function(a,b){this.close(function(c){b(a||c)})};J.prototype.close=function(a){var b=this;if(a)this.once("close",
a);if(this.closed||"number"!==typeof this.fd){if("number"!==typeof this.fd){this.once("open",U);return}return xa.default.nextTick(function(){return b.emit("close")})}this.closed=!0;this._vol.close(this.fd,function(a){a?b.emit("error",a):b.emit("close")});this.fd=null};Od.inherits(K,ia.Writable);b.WriteStream=K;K.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,function(a,b){a?(this.autoClose&&this.destroy&&this.destroy(),this.emit("error",a)):(this.fd=b,this.emit("open",b))}.bind(this))};
K.prototype._write=function(a,b,c){if(!(a instanceof Ga.Buffer))return this.emit("error",Error("Invalid data"));if("number"!==typeof this.fd)return this.once("open",function(){this._write(a,b,c)});var d=this;this._vol.write(this.fd,a,0,a.length,this.pos,function(a,b){if(a)return d.autoClose&&d.destroy&&d.destroy(),c(a);d.bytesWritten+=b;c()});void 0!==this.pos&&(this.pos+=a.length)};K.prototype._writev=function(a,b){if("number"!==typeof this.fd)return this.once("open",function(){this._writev(a,b)});
for(var c=this,d=a.length,e=Array(d),f=0,g=0;g<d;g++){var h=a[g].chunk;e[g]=h;f+=h.length}d=Ga.Buffer.concat(e);this._vol.write(this.fd,d,0,d.length,this.pos,function(a,d){if(a)return c.destroy&&c.destroy(),b(a);c.bytesWritten+=d;b()});void 0!==this.pos&&(this.pos+=f)};K.prototype._destroy=J.prototype._destroy;K.prototype.close=J.prototype.close;K.prototype.destroySoon=K.prototype.end;var Da=function(a){function b(b){var c=a.call(this)||this;c._filename="";c._steps=null;c._filenameEncoded="";c._recursive=
!1;c._encoding=Ka.ENCODING_UTF8;c._link=null;c._onNodeChange=function(){c._emit("change")};c._onParentChild=function(a){a.getName()===c._getName()&&c._emit("rename")};c._emit=function(a){c.emit("change",a,c._filenameEncoded)};c._persist=function(){c._timer=setTimeout(c._persist,1E6)};c._vol=b;return c}R(b,a);b.prototype._getName=function(){return this._steps[this._steps.length-1]};b.prototype.start=function(a,b,c,d){void 0===b&&(b=!0);void 0===c&&(c=!1);void 0===d&&(d=Ka.ENCODING_UTF8);this._filename=
r(a);this._steps=v(this._filename);this._filenameEncoded=Ka.strToEncoding(this._filename);this._recursive=c;this._encoding=d;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(mc){throw b=Error("watch "+this._filename+" "+mc.code),b.code=mc.code,b.errno=mc.code,b;}this._link.getNode().on("change",this._onNodeChange);if(a=this._link.parent)a.on("child:delete",this._onParentChild);b&&this._persist()};b.prototype.close=function(){clearTimeout(this._timer);this._link.getNode().removeListener("change",
this._onNodeChange);var a=this._link.parent;a&&a.removeListener("child:delete",this._onParentChild)};return b}(O.EventEmitter);b.FSWatcher=Da});qa(Sc);var jm=Sc.Volume,Ff=W(function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.fsProps="constants F_OK R_OK W_OK X_OK Stats".split(" ");b.fsSyncMethods="renameSync ftruncateSync truncateSync chownSync fchownSync lchownSync chmodSync fchmodSync lchmodSync statSync lstatSync fstatSync linkSync symlinkSync readlinkSync realpathSync unlinkSync rmdirSync mkdirSync mkdirpSync readdirSync closeSync openSync utimesSync futimesSync fsyncSync writeSync readSync readFileSync writeFileSync appendFileSync existsSync accessSync fdatasyncSync mkdtempSync copyFileSync createReadStream createWriteStream".split(" ");
b.fsAsyncMethods="rename ftruncate truncate chown fchown lchown chmod fchmod lchmod stat lstat fstat link symlink readlink realpath unlink rmdir mkdir mkdirp readdir close open utimes futimes fsync write read readFile writeFile appendFile exists access fdatasync mkdtemp copyFile watchFile unwatchFile watch".split(" ")});qa(Ff);var vj=W(function(a,b){function c(a){for(var b={F_OK:g,R_OK:h,W_OK:k,X_OK:n,constants:N.constants,Stats:oc.default,Dirent:zf.default},c=0,d=e;c<d.length;c++){var p=d[c];"function"===
typeof a[p]&&(b[p]=a[p].bind(a))}c=0;for(d=f;c<d.length;c++)p=d[c],"function"===typeof a[p]&&(b[p]=a[p].bind(a));b.StatWatcher=a.StatWatcher;b.FSWatcher=a.FSWatcher;b.WriteStream=a.WriteStream;b.ReadStream=a.ReadStream;b.promises=a.promises;b._toUnixTimestamp=Sc.toUnixTimestamp;return b}var d=wa&&wa.__assign||function(){d=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return d.apply(this,
arguments)};Object.defineProperty(b,"__esModule",{value:!0});var e=Ff.fsSyncMethods,f=Ff.fsAsyncMethods,g=N.constants.F_OK,h=N.constants.R_OK,k=N.constants.W_OK,n=N.constants.X_OK;b.Volume=Sc.Volume;b.vol=new Sc.Volume;b.createFsFromVolume=c;b.fs=c(b.vol);a.exports=d({},a.exports,b.fs);a.exports.semantic=!0});qa(vj);var km=vj.createFsFromVolume,lm=function(){function a(){this.volume=jm.fromJSON({"/dev/stdin":"","/dev/stdout":"","/dev/stderr":""});this.volume.releasedFds=[0,1,2];var a=this.volume.openSync("/dev/stderr",
"w"),c=this.volume.openSync("/dev/stdout","w"),d=this.volume.openSync("/dev/stdin","r");if(2!==a)throw Error("invalid handle for stderr: "+a);if(1!==c)throw Error("invalid handle for stdout: "+c);if(0!==d)throw Error("invalid handle for stdin: "+d);this.fs=km(this.volume)}a.prototype.getStdOut=function(){return Wj(this,void 0,void 0,function(){var a,c=this;return Xj(this,function(){a=new Promise(function(a){a(c.fs.readFileSync("/dev/stdout","utf8"))});return[2,a]})})};return a}(),mm=function(){function a(a){var b=
a.env;this.args=a.args;this.env=b}a.prototype.run=function(){throw Error("Not implemented");};a.prototype.instantiate=function(a,c){throw Error("Not implemented");};a.prototype.getStdout=function(){throw Error("Not implemented");};a.prototype.kill=function(){return da(this,void 0,void 0,function(){return ea(this,function(a){return[2]})})};return a}();Hb.prototype=Object.create(null);L.EventEmitter=L;L.usingDomains=!1;L.prototype.domain=void 0;L.prototype._events=void 0;L.prototype._maxListeners=void 0;
L.defaultMaxListeners=10;L.init=function(){this.domain=null;this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Hb,this._eventsCount=0);this._maxListeners=this._maxListeners||void 0};L.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');this._maxListeners=a;return this};L.prototype.getMaxListeners=function(){return void 0===this._maxListeners?L.defaultMaxListeners:this._maxListeners};
L.prototype.emit=function(a){var b,c;var d="error"===a;if(b=this._events)d=d&&null==b.error;else if(!d)return!1;var e=this.domain;if(d){b=arguments[1];if(e)b||(b=Error('Uncaught, unspecified "error" event')),b.domainEmitter=this,b.domain=e,b.domainThrown=!1,e.emit("error",b);else{if(b instanceof Error)throw b;e=Error('Uncaught, unspecified "error" event. ('+b+")");e.context=b;throw e;}return!1}e=b[a];if(!e)return!1;b="function"===typeof e;var f=arguments.length;switch(f){case 1:if(b)e.call(this);
else for(b=e.length,e=Gc(e,b),d=0;d<b;++d)e[d].call(this);break;case 2:d=arguments[1];if(b)e.call(this,d);else for(b=e.length,e=Gc(e,b),f=0;f<b;++f)e[f].call(this,d);break;case 3:d=arguments[1];f=arguments[2];if(b)e.call(this,d,f);else for(b=e.length,e=Gc(e,b),c=0;c<b;++c)e[c].call(this,d,f);break;case 4:d=arguments[1];f=arguments[2];c=arguments[3];if(b)e.call(this,d,f,c);else{b=e.length;e=Gc(e,b);for(var g=0;g<b;++g)e[g].call(this,d,f,c)}break;default:d=Array(f-1);for(c=1;c<f;c++)d[c-1]=arguments[c];
if(b)e.apply(this,d);else for(b=e.length,e=Gc(e,b),f=0;f<b;++f)e[f].apply(this,d)}return!0};L.prototype.addListener=function(a,b){return Kh(this,a,b,!1)};L.prototype.on=L.prototype.addListener;L.prototype.prependListener=function(a,b){return Kh(this,a,b,!0)};L.prototype.once=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');this.on(a,Lh(this,a,b));return this};L.prototype.prependOnceListener=function(a,b){if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');
this.prependListener(a,Lh(this,a,b));return this};L.prototype.removeListener=function(a,b){var c;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');var d=this._events;if(!d)return this;var e=d[a];if(!e)return this;if(e===b||e.listener&&e.listener===b)0===--this._eventsCount?this._events=new Hb:(delete d[a],d.removeListener&&this.emit("removeListener",a,e.listener||b));else if("function"!==typeof e){var f=-1;for(c=e.length;0<c--;)if(e[c]===b||e[c].listener&&e[c].listener===
b){var g=e[c].listener;f=c;break}if(0>f)return this;if(1===e.length){e[0]=void 0;if(0===--this._eventsCount)return this._events=new Hb,this;delete d[a]}else{c=f+1;for(var h=e.length;c<h;f+=1,c+=1)e[f]=e[c];e.pop()}d.removeListener&&this.emit("removeListener",a,g||b)}return this};L.prototype.removeAllListeners=function(a){var b=this._events;if(!b)return this;if(!b.removeListener)return 0===arguments.length?(this._events=new Hb,this._eventsCount=0):b[a]&&(0===--this._eventsCount?this._events=new Hb:
delete b[a]),this;if(0===arguments.length){b=Object.keys(b);for(var c=0,d;c<b.length;++c)d=b[c],"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events=new Hb;this._eventsCount=0;return this}b=b[a];if("function"===typeof b)this.removeListener(a,b);else if(b){do this.removeListener(a,b[b.length-1]);while(b[0])}return this};L.prototype.listeners=function(a){var b=this._events;if(b)if(a=b[a])if("function"===typeof a)a=[a.listener||a];else{b=Array(a.length);
for(var c=0;c<b.length;++c)b[c]=a[c].listener||a[c];a=b}else a=[];else a=[];return a};L.listenerCount=function(a,b){return"function"===typeof a.listenerCount?a.listenerCount(b):Mh.call(a,b)};L.prototype.listenerCount=Mh;L.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var Xa=[],Ya=[],Uk="undefined"!==typeof Uint8Array?Uint8Array:Array,Ee=!1,nm={}.toString,Sh=Array.isArray||function(a){return"[object Array]"==nm.call(a)};x.TYPED_ARRAY_SUPPORT=void 0!==
za.TYPED_ARRAY_SUPPORT?za.TYPED_ARRAY_SUPPORT:!0;var om=x.TYPED_ARRAY_SUPPORT?2147483647:1073741823;x.poolSize=8192;x._augment=function(a){a.__proto__=x.prototype;return a};x.from=function(a,b,c){return Ph(null,a,b,c)};x.TYPED_ARRAY_SUPPORT&&(x.prototype.__proto__=Uint8Array.prototype,x.__proto__=Uint8Array);x.alloc=function(a,b,c){Rh(a);a=0>=a?nb(null,a):void 0!==b?"string"===typeof c?nb(null,a).fill(b,c):nb(null,a).fill(b):nb(null,a);return a};x.allocUnsafe=function(a){return Fe(null,a)};x.allocUnsafeSlow=
function(a){return Fe(null,a)};x.isBuffer=Ie;x.compare=function(a,b){if(!Za(a)||!Za(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,f=Math.min(c,d);e<f;++e)if(a[e]!==b[e]){c=a[e];d=b[e];break}return c<d?-1:d<c?1:0};x.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};
x.concat=function(a,b){if(!Sh(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return x.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=x.allocUnsafe(b);var d=0;for(c=0;c<a.length;++c){var e=a[c];if(!Za(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(b,d);d+=e.length}return b};x.byteLength=Qh;x.prototype._isBuffer=!0;x.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");
for(var b=0;b<a;b+=2)Ib(this,b,b+1);return this};x.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)Ib(this,b,b+3),Ib(this,b+1,b+2);return this};x.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var b=0;b<a;b+=8)Ib(this,b,b+7),Ib(this,b+1,b+6),Ib(this,b+2,b+5),Ib(this,b+3,b+4);return this};x.prototype.toString=function(){var a=
this.length|0;return 0===a?"":0===arguments.length?Uh(this,0,a):Sk.apply(this,arguments)};x.prototype.equals=function(a){if(!Za(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===x.compare(this,a)};x.prototype.inspect=function(){var a="";0<this.length&&(a=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(a+=" ... "));return"<Buffer "+a+">"};x.prototype.compare=function(a,b,c,d,e){if(!Za(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);
void 0===c&&(c=a?a.length:0);void 0===d&&(d=0);void 0===e&&(e=this.length);if(0>b||c>a.length||0>d||e>this.length)throw new RangeError("out of range index");if(d>=e&&b>=c)return 0;if(d>=e)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;d>>>=0;e>>>=0;if(this===a)return 0;var f=e-d,g=c-b,h=Math.min(f,g);d=this.slice(d,e);a=a.slice(b,c);for(b=0;b<h;++b)if(d[b]!==a[b]){f=d[b];g=a[b];break}return f<g?-1:g<f?1:0};x.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};x.prototype.indexOf=function(a,
b,c){return Vh(this,a,b,c,!0)};x.prototype.lastIndexOf=function(a,b,c){return Vh(this,a,b,c,!1)};x.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===d&&(d="utf8")):(d=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var e=this.length-b;if(void 0===c||c>e)c=e;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");
d||(d="utf8");for(e=!1;;)switch(d){case "hex":a:{b=Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw new TypeError("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;++d){e=parseInt(a.substr(2*d,2),16);if(isNaN(e)){a=d;break a}this[b+d]=e}a=d}return a;case "utf8":case "utf-8":return Hc(vd(a,this.length-b),this,b,c);case "ascii":return Hc(Yh(a),this,b,c);case "latin1":case "binary":return Hc(Yh(a),this,b,c);case "base64":return Hc(Th(a),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=
a;e=this.length-b;for(var f=[],g=0;g<d.length&&!(0>(e-=2));++g){var h=d.charCodeAt(g);a=h>>8;h%=256;f.push(h);f.push(a)}return Hc(f,this,b,c);default:if(e)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase();e=!0}};x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Xh=4096;x.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(x.TYPED_ARRAY_SUPPORT)b=
this.subarray(a,b),b.__proto__=x.prototype;else{c=b-a;b=new x(c,void 0);for(var d=0;d<c;++d)b[d]=this[d+a]}return b};x.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||Z(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=this[a+e]*d;return c};x.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||Z(a,b,this.length);c=this[a+--b];for(var d=1;0<b&&(d*=256);)c+=this[a+--b]*d;return c};x.prototype.readUInt8=function(a,b){b||Z(a,1,this.length);return this[a]};x.prototype.readUInt16LE=function(a,
b){b||Z(a,2,this.length);return this[a]|this[a+1]<<8};x.prototype.readUInt16BE=function(a,b){b||Z(a,2,this.length);return this[a]<<8|this[a+1]};x.prototype.readUInt32LE=function(a,b){b||Z(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};x.prototype.readUInt32BE=function(a,b){b||Z(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};x.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||Z(a,b,this.length);c=this[a];for(var d=1,e=0;++e<b&&(d*=256);)c+=
this[a+e]*d;c>=128*d&&(c-=Math.pow(2,8*b));return c};x.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||Z(a,b,this.length);c=b;for(var d=1,e=this[a+--c];0<c&&(d*=256);)e+=this[a+--c]*d;e>=128*d&&(e-=Math.pow(2,8*b));return e};x.prototype.readInt8=function(a,b){b||Z(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};x.prototype.readInt16LE=function(a,b){b||Z(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};x.prototype.readInt16BE=function(a,b){b||Z(a,2,this.length);
a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};x.prototype.readInt32LE=function(a,b){b||Z(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};x.prototype.readInt32BE=function(a,b){b||Z(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};x.prototype.readFloatLE=function(a,b){b||Z(a,4,this.length);return td(this,a,!0,23,4)};x.prototype.readFloatBE=function(a,b){b||Z(a,4,this.length);return td(this,a,!1,23,4)};x.prototype.readDoubleLE=function(a,b){b||
Z(a,8,this.length);return td(this,a,!0,52,8)};x.prototype.readDoubleBE=function(a,b){b||Z(a,8,this.length);return td(this,a,!1,52,8)};x.prototype.writeUIntLE=function(a,b,c,d){a=+a;b|=0;c|=0;d||ya(this,a,b,c,Math.pow(2,8*c)-1,0);d=1;var e=0;for(this[b]=a&255;++e<c&&(d*=256);)this[b+e]=a/d&255;return b+c};x.prototype.writeUIntBE=function(a,b,c,d){a=+a;b|=0;c|=0;d||ya(this,a,b,c,Math.pow(2,8*c)-1,0);d=c-1;var e=1;for(this[b+d]=a&255;0<=--d&&(e*=256);)this[b+d]=a/e&255;return b+c};x.prototype.writeUInt8=
function(a,b,c){a=+a;b|=0;c||ya(this,a,b,1,255,0);x.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};x.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||ya(this,a,b,2,65535,0);x.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):wd(this,a,b,!0);return b+2};x.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||ya(this,a,b,2,65535,0);x.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):wd(this,a,b,!1);return b+2};x.prototype.writeUInt32LE=function(a,b,c){a=+a;b|=0;c||ya(this,a,
b,4,4294967295,0);x.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):xd(this,a,b,!0);return b+4};x.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||ya(this,a,b,4,4294967295,0);x.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):xd(this,a,b,!1);return b+4};x.prototype.writeIntLE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),ya(this,a,b,c,d-1,-d));d=0;var e=1,f=0;for(this[b]=a&255;++d<c&&(e*=256);)0>a&&0===f&&0!==this[b+
d-1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};x.prototype.writeIntBE=function(a,b,c,d){a=+a;b|=0;d||(d=Math.pow(2,8*c-1),ya(this,a,b,c,d-1,-d));d=c-1;var e=1,f=0;for(this[b+d]=a&255;0<=--d&&(e*=256);)0>a&&0===f&&0!==this[b+d+1]&&(f=1),this[b+d]=(a/e>>0)-f&255;return b+c};x.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||ya(this,a,b,1,127,-128);x.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};x.prototype.writeInt16LE=function(a,b,c){a=+a;b|=0;c||ya(this,a,b,2,
32767,-32768);x.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):wd(this,a,b,!0);return b+2};x.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||ya(this,a,b,2,32767,-32768);x.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):wd(this,a,b,!1);return b+2};x.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||ya(this,a,b,4,2147483647,-2147483648);x.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):xd(this,a,b,!0);return b+4};x.prototype.writeInt32BE=function(a,
b,c){a=+a;b|=0;c||ya(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);x.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):xd(this,a,b,!1);return b+4};x.prototype.writeFloatLE=function(a,b,c){c||yd(this,a,b,4);ud(this,a,b,!0,23,4);return b+4};x.prototype.writeFloatBE=function(a,b,c){c||yd(this,a,b,4);ud(this,a,b,!1,23,4);return b+4};x.prototype.writeDoubleLE=function(a,b,c){c||yd(this,a,b,8);ud(this,a,b,!0,52,8);return b+8};x.prototype.writeDoubleBE=function(a,
b,c){c||yd(this,a,b,8);ud(this,a,b,!1,52,8);return b+8};x.prototype.copy=function(a,b,c,d){c||(c=0);d||0===d||(d=this.length);b>=a.length&&(b=a.length);b||(b=0);0<d&&d<c&&(d=c);if(d===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>d)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length);a.length-b<d-c&&(d=a.length-b+c);var e=d-c;if(this===a&&c<b&&
b<d)for(d=e-1;0<=d;--d)a[d+b]=this[d+c];else if(1E3>e||!x.TYPED_ARRAY_SUPPORT)for(d=0;d<e;++d)a[d+b]=this[d+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+e),b);return e};x.prototype.fill=function(a,b,c,d){if("string"===typeof a){"string"===typeof b?(d=b,b=0,c=this.length):"string"===typeof c&&(d=c,c=this.length);if(1===a.length){var e=a.charCodeAt(0);256>e&&(a=e)}if(void 0!==d&&"string"!==typeof d)throw new TypeError("encoding must be a string");if("string"===typeof d&&!x.isEncoding(d))throw new TypeError("Unknown encoding: "+
d);}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(d=b;d<c;++d)this[d]=a;else for(a=Za(a)?a:vd((new x(a,d)).toString()),e=a.length,d=0;d<c-b;++d)this[d+b]=a[d%e];return this};var Tk=/[^+\/0-9A-Za-z-_]/g,Qd=Object.freeze({__proto__:null,INSPECT_MAX_BYTES:50,kMaxLength:om,Buffer:x,SlowBuffer:function(a){+a!=a&&(a=0);return x.alloc(+a)},isBuffer:Ie}),
Jb=$h,Kb=ai;"function"===typeof za.setTimeout&&(Jb=setTimeout);"function"===typeof za.clearTimeout&&(Kb=clearTimeout);var ob=[],ac=!1,bc,zd=-1;di.prototype.run=function(){this.fun.apply(null,this.array)};var sc="function"===typeof Object.create?function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},Yk=/%[sdj%]/g,
Rd={},Gf;zb.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};zb.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};Lb.prototype.push=function(a){a={data:a,next:null};0<this.length?this.tail.next=a:this.head=a;this.tail=a;++this.length};Lb.prototype.unshift=function(a){a={data:a,
next:this.head};0===this.length&&(this.tail=a);this.head=a;++this.length};Lb.prototype.shift=function(){if(0!==this.length){var a=this.head.data;this.head=1===this.length?this.tail=null:this.head.next;--this.length;return a}};Lb.prototype.clear=function(){this.head=this.tail=null;this.length=0};Lb.prototype.join=function(a){if(0===this.length)return"";for(var b=this.head,c=""+b.data;b=b.next;)c+=a+b.data;return c};Lb.prototype.concat=function(a){if(0===this.length)return x.alloc(0);if(1===this.length)return this.head.data;
a=x.allocUnsafe(a>>>0);for(var b=this.head,c=0;b;)b.data.copy(a,c),c+=b.data.length,b=b.next;return a};var Oe=C(function(a,b){function c(a,b){for(var c in a)b[c]=a[c]}function d(a,b,c){return e(a,b,c)}var e=Qd.Buffer;e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?a.exports=Qd:(c(Qd,b),b.Buffer=d);c(e,d);d.from=function(a,b,c){if("number"===typeof a)throw new TypeError("Argument must not be a number");return e(a,b,c)};d.alloc=function(a,b,c){if("number"!==typeof a)throw new TypeError("Argument must be a number");
a=e(a);void 0!==b?"string"===typeof c?a.fill(b,c):a.fill(b):a.fill(0);return a};d.allocUnsafe=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return e(a)};d.allocUnsafeSlow=function(a){if("number"!==typeof a)throw new TypeError("Argument must be a number");return Qd.SlowBuffer(a)}}).Buffer,gi=Oe.isEncoding||function(a){a=""+a;switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;
default:return!1}},ii=Jc;Jc.prototype.write=function(a){if(0===a.length)return"";if(this.lastNeed){var b=this.fillLast(a);if(void 0===b)return"";var c=this.lastNeed;this.lastNeed=0}else c=0;return c<a.length?b?b+this.text(a,c):this.text(a,c):b||""};Jc.prototype.end=function(a){a=a&&a.length?this.write(a):"";return this.lastNeed?a+"\ufffd":a};Jc.prototype.text=function(a,b){var c=ml(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;c=a.length-(c-this.lastNeed);a.copy(this.lastChar,
0,c);return a.toString("utf8",b,c)};Jc.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length);this.lastNeed-=a.length};Y.ReadableState=hi;var P=function(a){Ab(Gf)&&(Gf="");a=a.toUpperCase();Rd[a]||((new RegExp("\\b"+a+"\\b","i")).test(Gf)?Rd[a]=function(){var b=Xk.apply(null,arguments);console.error("%s %d: %s",
a,0,b)}:Rd[a]=function(){});return Rd[a]}("stream");sc(Y,L);Y.prototype.push=function(a,b){var c=this._readableState;c.objectMode||"string"!==typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=x.from(a,b),b=""));return ji(this,c,a,b,!1)};Y.prototype.unshift=function(a){return ji(this,this._readableState,a,"",!0)};Y.prototype.isPaused=function(){return!1===this._readableState.flowing};Y.prototype.setEncoding=function(a){this._readableState.decoder=new ii(a);this._readableState.encoding=a;return this};
Y.prototype.read=function(a){P("read",a);a=parseInt(a,10);var b=this._readableState,c=a;0!==a&&(b.emittedReadable=!1);if(0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return P("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?Re(this):Bd(this),null;a=ki(a,b);if(0===a&&b.ended)return 0===b.length&&Re(this),null;var d=b.needReadable;P("need readable",d);if(0===b.length||b.length-a<b.highWaterMark)d=!0,P("length less than watermark",d);b.ended||b.reading?P("reading or ended",
!1):d&&(P("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1,b.reading||(a=ki(c,b)));d=0<a?mi(a,b):null;null===d?(b.needReadable=!0,a=0):b.length-=a;0===b.length&&(b.ended||(b.needReadable=!0),c!==a&&b.ended&&Re(this));null!==d&&this.emit("data",d);return d};Y.prototype._read=function(a){this.emit("error",Error("not implemented"))};Y.prototype.pipe=function(a,b){function c(a){P("onunpipe");a===p&&e()}function d(){P("onend");a.end()}function e(){P("cleanup");
a.removeListener("close",h);a.removeListener("finish",k);a.removeListener("drain",t);a.removeListener("error",g);a.removeListener("unpipe",c);p.removeListener("end",d);p.removeListener("end",e);p.removeListener("data",f);u=!0;!q.awaitDrain||a._writableState&&!a._writableState.needDrain||t()}function f(b){P("ondata");r=!1;!1!==a.write(b)||r||((1===q.pipesCount&&q.pipes===a||1<q.pipesCount&&-1!==ni(q.pipes,a))&&!u&&(P("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++,
r=!0),p.pause())}function g(b){P("onerror",b);n();a.removeListener("error",g);0===a.listeners("error").length&&a.emit("error",b)}function h(){a.removeListener("finish",k);n()}function k(){P("onfinish");a.removeListener("close",h);n()}function n(){P("unpipe");p.unpipe(a)}var p=this,q=this._readableState;switch(q.pipesCount){case 0:q.pipes=a;break;case 1:q.pipes=[q.pipes,a];break;default:q.pipes.push(a)}q.pipesCount+=1;P("pipe count=%d opts=%j",q.pipesCount,b);b=b&&!1===b.end?e:d;if(q.endEmitted)$a(b);
else p.once("end",b);a.on("unpipe",c);var t=pl(p);a.on("drain",t);var u=!1,r=!1;p.on("data",f);nl(a,"error",g);a.once("close",h);a.once("finish",k);a.emit("pipe",p);q.flowing||(P("pipe resume"),p.resume());return a};Y.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this);return this}if(!a){a=b.pipes;var c=b.pipesCount;b.pipes=null;b.pipesCount=
0;b.flowing=!1;for(b=0;b<c;b++)a[b].emit("unpipe",this);return this}c=ni(b.pipes,a);if(-1===c)return this;b.pipes.splice(c,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this);return this};Y.prototype.on=function(a,b){b=L.prototype.on.call(this,a,b);"data"===a?!1!==this._readableState.flowing&&this.resume():"readable"===a&&(a=this._readableState,a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&Bd(this):$a(ql,
this)));return b};Y.prototype.addListener=Y.prototype.on;Y.prototype.resume=function(){var a=this._readableState;a.flowing||(P("resume"),a.flowing=!0,a.resumeScheduled||(a.resumeScheduled=!0,$a(rl,this,a)));return this};Y.prototype.pause=function(){P("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};Y.prototype.wrap=function(a){var b=this._readableState,c=!1,d=this;a.on("end",function(){P("wrapped end");
if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&d.push(a)}d.push(null)});a.on("data",function(e){P("wrapped data");b.decoder&&(e=b.decoder.write(e));b.objectMode&&(null===e||void 0===e)||!(b.objectMode||e&&e.length)||d.push(e)||(c=!0,a.pause())});for(var e in a)void 0===this[e]&&"function"===typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));tl(["error","close","destroy","pause","resume"],function(b){a.on(b,d.emit.bind(d,b))});d._read=function(b){P("wrapped _read",
b);c&&(c=!1,a.resume())};return d};Y._fromList=mi;va.WritableState=Se;sc(va,L);Se.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};va.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))};va.prototype.write=function(a,b,c){var d=this._writableState,e=!1;"function"===typeof b&&(c=b,b=null);x.isBuffer(a)?b="buffer":b||(b=d.defaultEncoding);"function"!==typeof c&&(c=ul);if(d.ended)d=c,a=Error("write after end"),this.emit("error",
a),$a(d,a);else{var f=c,g=!0,h=!1;null===a?h=new TypeError("May not write null values to stream"):x.isBuffer(a)||"string"===typeof a||void 0===a||d.objectMode||(h=new TypeError("Invalid non-string/buffer chunk"));h&&(this.emit("error",h),$a(f,h),g=!1);g&&(d.pendingcb++,e=b,d.objectMode||!1===d.decodeStrings||"string"!==typeof a||(a=x.from(a,e)),x.isBuffer(a)&&(e="buffer"),f=d.objectMode?1:a.length,d.length+=f,b=d.length<d.highWaterMark,b||(d.needDrain=!0),d.writing||d.corked?(f=d.lastBufferedRequest,
d.lastBufferedRequest=new vl(a,e,c),f?f.next=d.lastBufferedRequest:d.bufferedRequest=d.lastBufferedRequest,d.bufferedRequestCount+=1):Te(this,d,!1,f,a,e,c),e=b)}return e};va.prototype.cork=function(){this._writableState.corked++};va.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||pi(this,a))};va.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+
"").toLowerCase())))throw new TypeError("Unknown encoding: "+a);this._writableState.defaultEncoding=a;return this};va.prototype._write=function(a,b,c){c(Error("not implemented"))};va.prototype._writev=null;va.prototype.end=function(a,b,c){var d=this._writableState;"function"===typeof a?(c=a,b=a=null):"function"===typeof b&&(c=b,b=null);null!==a&&void 0!==a&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending&&!d.finished){a=c;d.ending=!0;si(this,d);if(a)if(d.finished)$a(a);else this.once("finish",
a);d.ended=!0;this.writable=!1}};sc(Oa,Y);for(var wj=Object.keys(va.prototype),Hf=0;Hf<wj.length;Hf++){var If=wj[Hf];Oa.prototype[If]||(Oa.prototype[If]=va.prototype[If])}sc(eb,Oa);eb.prototype.push=function(a,b){this._transformState.needTransform=!1;return Oa.prototype.push.call(this,a,b)};eb.prototype._transform=function(a,b,c){throw Error("Not implemented");};eb.prototype._write=function(a,b,c){var d=this._transformState;d.writecb=c;d.writechunk=a;d.writeencoding=b;d.transforming||(a=this._readableState,
(d.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};eb.prototype._read=function(a){a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0};sc(lc,eb);lc.prototype._transform=function(a,b,c){c(null,a)};sc(ab,L);ab.Readable=Y;ab.Writable=va;ab.Duplex=Oa;ab.Transform=eb;ab.PassThrough=lc;ab.Stream=ab;ab.prototype.pipe=function(a,b){function c(b){a.writable&&
!1===a.write(b)&&k.pause&&k.pause()}function d(){k.readable&&k.resume&&k.resume()}function e(){n||(n=!0,a.end())}function f(){n||(n=!0,"function"===typeof a.destroy&&a.destroy())}function g(a){h();if(0===L.listenerCount(this,"error"))throw a;}function h(){k.removeListener("data",c);a.removeListener("drain",d);k.removeListener("end",e);k.removeListener("close",f);k.removeListener("error",g);a.removeListener("error",g);k.removeListener("end",h);k.removeListener("close",h);a.removeListener("close",h)}
var k=this;k.on("data",c);a.on("drain",d);a._isStdio||b&&!1===b.end||(k.on("end",e),k.on("close",f));var n=!1;k.on("error",g);a.on("error",g);k.on("end",h);k.on("close",h);a.on("close",h);a.emit("pipe",k);return a};var pm=function(){for(var a,b,c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var e=new lc,f=c.length;try{for(var g=Jf(c),h=g.next();!h.done;h=g.next()){var k=h.value;e=k.pipe(e,{end:!1});k.once("end",function(){return 0===--f&&e.emit("end")})}}catch(n){a={error:n}}finally{try{h&&!h.done&&
(b=g.return)&&b.call(g)}finally{if(a)throw a.error;}}return e},qm=function(a){function b(b,d,e){var c=a.call(this,b)||this;c.wasmFs=new lm;c.wasmFs.volume.fds[0].read=c.stdinRead.bind(c);c.wasmFs.volume.fds[1].write=c.stdoutWrite.bind(c);c.wasmFs.volume.fds[2].write=c.stdoutWrite.bind(c);c.sharedStdin=d;c.startStdinReadCallback=e;c.readStdinCounter=0;c.pipedStdin="";c.stdoutLog="";c.wasi=new mj({preopenDirectories:{"/":"/"},env:b.env,args:b.args,bindings:Qa(Qa({},mj.defaultBindings),{fs:c.wasmFs.fs})});
if(!b.module)throw Error("Did not find a WebAssembly.Module for the WASI Command");c.promisedInstance=WebAssembly.instantiate(b.module,{wasi_unstable:c.wasi.wasiImport});return c}xj(b,a);b.prototype.instantiate=function(a,b){return da(this,void 0,void 0,function(){var c,d,g,h;return ea(this,function(e){switch(e.label){case 0:return[4,this.promisedInstance];case 1:return this.instance=c=e.sent(),d=this.wasmFs.fs.createReadStream("/dev/stdout"),g=this.wasmFs.fs.createReadStream("/dev/stderr"),this.stdoutCallback=
a,b&&(this.pipedStdin=(new TextDecoder("utf-8")).decode(b)),h=pm(d,g),[2,h]}})})};b.prototype.run=function(){if(!this.instance)throw Error("You need to call instantiate first.");this.wasi.start(this.instance)};b.prototype.stdoutWrite=function(a,b,e,f){this.stdoutCallback&&this.stdoutCallback(a);b=(new TextDecoder("utf-8")).decode(a);this.stdoutLog+=b;return a.length};b.prototype.stdinRead=function(a,b,e,f){if(0<this.readStdinCounter)return this.readStdinCounter--,0;this.readStdinCounter=1;if(this.pipedStdin)b=
this.pipedStdin+"\n",this.pipedStdin="",this.readStdinCounter++;else if(this.sharedStdin&&this.startStdinReadCallback){this.startStdinReadCallback();Atomics.wait(this.sharedStdin,0,-1);b=this.sharedStdin[0];this.sharedStdin[0]=-1;e=new Uint8Array(b);for(f=0;f<b;f++)e[f]=this.sharedStdin[1+f];b=(new TextDecoder("utf-8")).decode(e)}else{b=prompt;e=0<this.stdoutLog.length?this.stdoutLog.replace(/[\u001B\u009B][[\]()#;?]*(?:(?:(?:[a-zA-Z\d]*(?:;[-a-zA-Z\d\/#&.:=?%@~_]*)*)?\u0007)|(?:(?:\d{1,4}(?:;\d{0,4})*)?[\dA-PR-TZcf-ntqry=><~]))/g,
""):"Please enter text for stdin:";b=b(e);if(null===b)throw a=Error("Process killed by user"),a.user=!0,a;b+="\n"}if(!b)return 0;b=(new TextEncoder).encode(b);for(e=0;e<b.length;++e)a[e]=b[e];return b.length};return b}(mm),rm=function(){function a(a,c,d,e,f,g){this.commandOptions=a;this.dataCallback=c;this.endCallback=d;this.errorCallback=e;c=void 0;f&&(c=new Int32Array(f));a.module?this.wasiCommand=new qm(a,c,g):this.callbackCommand=a.callback}a.prototype.start=function(a){return da(this,void 0,
void 0,function(){return ea(this,function(b){switch(b.label){case 0:return this.wasiCommand?[4,this.startWASICommand(a)]:[3,2];case 1:return b.sent(),[3,4];case 2:return this.callbackCommand?[4,this.startCallbackCommand(a)]:[3,4];case 3:b.sent(),b.label=4;case 4:return[2]}})})};a.prototype.startWASICommand=function(a){return da(this,void 0,void 0,function(){var b,d,e=this;return ea(this,function(c){switch(c.label){case 0:if(!this.wasiCommand)throw Error("There is no wasi command on this process");
return[4,this.wasiCommand.instantiate(this.dataCallback,a)];case 1:b=c.sent();b.on("end",function(){e.endCallback()});try{this.wasiCommand.run()}catch(g){d="Unknown Error",void 0!==g.code?d="exited with code: "+g.code:void 0!==g.signal?d="killed with signal: "+g.signal:void 0!==g.user&&(d=g.message),this.errorCallback(d)}return[2]}})})};a.prototype.startCallbackCommand=function(a){return da(this,void 0,void 0,function(){var b,d,e;return ea(this,function(c){switch(c.label){case 0:if(!this.callbackCommand)throw Error("There is no callback command on this process");
b="";a&&(b=(new TextDecoder("utf-8")).decode(a));c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.callbackCommand(this.commandOptions.args,b)];case 2:return d=c.sent(),e=(new TextEncoder).encode(d+"\n"),this.dataCallback(e),this.endCallback(),[3,4];case 3:return c.sent(),this.errorCallback("There was an error running the callback command"),[3,4];case 4:return[2]}})})};return a}(),Sd,sm=function(){function a(a,c,d,e,f){this.wasmTerminalConfig=a;this.commandString=c;this.commandStartReadCallback=
d;this.commandEndCallback=e;f&&(this.wasmTty=f);this.commandOptionsForProcessesToRun=[];this.spawnedProcessObjects=[];this.spawnedProcesses=0;this.pipedStdinDataForNextProcess=new Uint8Array;this.isRunning=!1;this.supportsSharedArrayBuffer=this.wasmTerminalConfig.processWorkerUrl&&window.SharedArrayBuffer&&window.Atomics}a.prototype.runCommand=function(){return da(this,void 0,void 0,function(){var a,c,d;return ea(this,function(b){switch(b.label){case 0:a=bj(this.commandString),b.label=1;case 1:b.trys.push([1,
3,,4]);if(1<a.length)throw Error("Only one command permitted");if("command"!==a[0].type)throw Error("Only commands allowed");c=this;return[4,this._getCommandOptionsFromAST(a[0],this.wasmTerminalConfig,this.wasmTty)];case 2:return c.commandOptionsForProcessesToRun=b.sent(),[3,4];case 3:return d=b.sent(),this.wasmTty&&(this.wasmTty.print("\r\n"),this.wasmTty.print("wasm shell: parse error ("+d.toString()+")\r\n")),console.error(d),this.commandEndCallback(),[2];case 4:return this.isRunning=!0,[4,this._tryToSpawnProcess(0)];
case 5:return b.sent(),[2]}})})};a.prototype.kill=function(){this.isRunning&&(this.spawnedProcessObjects.forEach(function(a){a.worker&&a.worker.terminate()}),this.commandOptionsForProcessesToRun=[],this.spawnedProcessObjects=[],this.isRunning=!1,this.commandEndCallback())};a.prototype._addStdinToSharedStdin=function(a,c){var b=this.spawnedProcessObjects[c].sharedStdin,e=1;0<b[0]&&(e=b[0]);a.forEach(function(a,c){b[e+c]=a});b[0]=e+a.length-1;Atomics.notify(b,0,1)};a.prototype._tryToSpawnProcess=function(a){return da(this,
void 0,void 0,function(){return ea(this,function(b){switch(b.label){case 0:if(!(a+1>this.spawnedProcesses&&2>this.spawnedProcessObjects.length&&a<this.commandOptionsForProcessesToRun.length))return[3,2];this.spawnedProcesses++;return[4,this._spawnProcess(a)];case 1:b.sent(),b.label=2;case 2:return[2]}})})};a.prototype._spawnProcess=function(a){return da(this,void 0,void 0,function(){var b,d;return ea(this,function(c){switch(c.label){case 0:return b=void 0,this.commandOptionsForProcessesToRun[a].module&&
this.supportsSharedArrayBuffer?[4,this._spawnProcessAsWorker(a)]:[3,2];case 1:return b=c.sent(),[3,4];case 2:return[4,this._spawnProcessAsService(a)];case 3:b=c.sent(),c.label=4;case 4:return this.spawnedProcessObjects.push(b),b.process.start(0<this.pipedStdinDataForNextProcess.length?this.pipedStdinDataForNextProcess:void 0),0<this.pipedStdinDataForNextProcess.length&&(this.pipedStdinDataForNextProcess=new Uint8Array),d=!1,this.commandOptionsForProcessesToRun.length>a+1&&(d=void 0!==this.commandOptionsForProcessesToRun[a+
1].callback),this.supportsSharedArrayBuffer&&!d&&this._tryToSpawnProcess(a+1),[2]}})})};a.prototype._spawnProcessAsWorker=function(a){return da(this,void 0,void 0,function(){var b,d,e,f,g,h;return ea(this,function(c){switch(c.label){case 0:if(!this.wasmTerminalConfig.processWorkerUrl)throw Error("Terminal Config missing the Process Worker URL");return[4,this._getBlobUrlForProcessWorker(this.wasmTerminalConfig.processWorkerUrl,this.wasmTty)];case 1:return b=c.sent(),d=new Worker(b),e=Uc(d),f=new SharedArrayBuffer(8192),
[4,new e(this.commandOptionsForProcessesToRun[a],tc(this._processDataCallback.bind(this,a)),tc(this._processEndCallback.bind(this,a,d)),tc(this._processErrorCallback.bind(this,a)),f,tc(this._processStartStdinReadCallback.bind(this)))];case 2:return g=c.sent(),h=new Int32Array(f),h[0]=-1,[2,{process:g,worker:d,sharedStdin:h}]}})})};a.prototype._spawnProcessAsService=function(a){return da(this,void 0,void 0,function(){var b;return ea(this,function(c){b=new rm(this.commandOptionsForProcessesToRun[a],
this._processDataCallback.bind(this,a),this._processEndCallback.bind(this,a),this._processErrorCallback.bind(this,a));return[2,{process:b}]})})};a.prototype._processDataCallback=function(a,c){this.isRunning&&(a<this.commandOptionsForProcessesToRun.length-1?this.supportsSharedArrayBuffer&&1<this.spawnedProcessObjects.length?this._addStdinToSharedStdin(c,1):(a=new Uint8Array(c.length+this.pipedStdinDataForNextProcess.length),a.set(this.pipedStdinDataForNextProcess),a.set(c,this.pipedStdinDataForNextProcess.length),
this.pipedStdinDataForNextProcess=a):(c=(new TextDecoder("utf-8")).decode(c),this.wasmTty&&this.wasmTty.print(c)))};a.prototype._processEndCallback=function(a,c){c&&c.terminate();a<this.commandOptionsForProcessesToRun.length-1?this._tryToSpawnProcess(a+1):(this.isRunning=!1,this.commandEndCallback());this.spawnedProcessObjects.shift()};a.prototype._processErrorCallback=function(a,c){this.wasmTty&&this.wasmTty.print("Program "+this.commandOptionsForProcessesToRun[a].args[0]+": "+c+"\r\n");this.kill();
this.commandEndCallback()};a.prototype._processStartStdinReadCallback=function(){var a=this;this.commandStartReadCallback().then(function(b){b=(new TextEncoder).encode(b+"\n");a._addStdinToSharedStdin(b,0)})};a.prototype._getBlobUrlForProcessWorker=function(a,c){return da(this,void 0,void 0,function(){var b,e;return ea(this,function(d){switch(d.label){case 0:if(Sd)return[2,Sd];c&&(c.print("\u001b[s"),c.print("[INFO] Downloading the process Web Worker (This happens once)..."));return[4,Promise.all([fetch(a).then(function(a){return a.text()}),
new Promise(function(a){return setTimeout(a,500)})]).then(function(a){return a[0]})];case 1:return b=d.sent(),c&&(c.print("\u001b[u"),c.print("\u001b[1000D"),c.print("\u001b[0J")),e=new Blob([b]),Sd=window.URL.createObjectURL(e),[2,Sd]}})})};a.prototype._getCommandOptionsFromAST=function(a,c,d){return da(this,void 0,void 0,function(){var b,f,g,h,k,n,p,q,t,u,r,v,x=this;return ea(this,function(e){switch(e.label){case 0:return b=[],f=a.command.value,g=a.args.map(function(a){return a.value}),h=Tc([f],
g),k=Object.entries(a.env).map(function(a){a=sb(a,2);return[a[0],a[1].value]}),n={},k.forEach(function(a,b){n[b]=a}),d&&(p=d.getTermSize(),q=p.rows,t=p.cols,n.LINES=q,n.COLUMNS=t),u=function(){return da(x,void 0,void 0,function(){var e,f;return ea(this,function(g){switch(g.label){case 0:return a.redirects?(e=a.redirects[0])&&"pipe"===e.type?[4,this._getCommandOptionsFromAST(e.command,c,d)]:[3,2]:[3,2];case 1:f=g.sent(),b=b.concat(f),g.label=2;case 2:return[2]}})})},[4,u()];case 1:return e.sent(),
[4,c.fetchCommand(f)];case 2:return r=e.sent(),r instanceof Uint8Array?[4,WebAssembly.compile(r)]:[3,4];case 3:return v=e.sent(),b.unshift({args:h,env:n,module:v}),[3,5];case 4:b.unshift({args:h,env:n,callback:r}),e.label=5;case 5:return[2,b]}})})};return a}(),tm=function(){function a(a,c,d){var b=this;void 0===d&&(d={historySize:10,maxAutocompleteEntries:100});this.handleCursorMove=function(a){0<a?(a=Math.min(a,b.wasmTty.getInput().length-b.wasmTty.getCursor()),b.wasmTty.setCursorDirectly(b.wasmTty.getCursor()+
a)):0>a&&(a=Math.max(a,-b.wasmTty.getCursor()),b.wasmTty.setCursorDirectly(b.wasmTty.getCursor()+a))};this.handleCursorErase=function(a){a?0>=b.wasmTty.getCursor()||(a=b.wasmTty.getInput().substr(0,b.wasmTty.getCursor()-1)+b.wasmTty.getInput().substr(b.wasmTty.getCursor()),b.wasmTty.clearInput(),b.wasmTty.setCursorDirectly(b.wasmTty.getCursor()-1),b.wasmTty.setInput(a,!0)):(a=b.wasmTty.getInput().substr(0,b.wasmTty.getCursor())+b.wasmTty.getInput().substr(b.wasmTty.getCursor()+1),b.wasmTty.setInput(a))};
this.handleCursorInsert=function(a){var c=b.wasmTty.getInput().substr(0,b.wasmTty.getCursor())+a+b.wasmTty.getInput().substr(b.wasmTty.getCursor());b.wasmTty.setCursorDirectly(b.wasmTty.getCursor()+a.length);b.wasmTty.setInput(c)};this.handleReadComplete=function(){b._activePrompt&&b._activePrompt.resolve&&(b._activePrompt.resolve(b.wasmTty.getInput()),b._activePrompt=void 0);b.wasmTty.print("\r\n");b._active=!1};this.handleTermData=function(a){if(b._active||"\u0003"===a){if(b.wasmTty.getFirstInit()&&
b._activePrompt){var c=b.wasmTty.getBuffer().getLine(b.wasmTty.getBuffer().cursorY+b.wasmTty.getBuffer().baseY).translateToString(!1,0,b.wasmTty.getBuffer().cursorX);b._activePrompt.promptPrefix=c;b.wasmTty.setPromptPrefix(c);b.wasmTty.setFirstInit(!1)}b._activeCharPrompt&&b._activeCharPrompt.resolve?(b._activeCharPrompt.resolve(a),b._activeCharPrompt=void 0,b.wasmTty.print("\r\n")):3<a.length&&27!==a.charCodeAt(0)?(a=a.replace(/[\r\n]+/g,"\r"),Array.from(a).forEach(function(a){return b.handleData(a)})):
b.handleData(a)}};this.handleData=function(a){if(b._active||"\u0003"===a){var c=a.charCodeAt(0);if(27===c)switch(a.substr(1)){case "[A":b.history&&(a=b.history.getPrevious())&&(b.wasmTty.setInput(a),b.wasmTty.setCursor(a.length));break;case "[B":b.history&&((a=b.history.getNext())||(a=""),b.wasmTty.setInput(a),b.wasmTty.setCursor(a.length));break;case "[D":b.handleCursorMove(-1);break;case "[C":b.handleCursorMove(1);break;case "[3~":b.handleCursorErase(!1);break;case "[F":b.wasmTty.setCursor(b.wasmTty.getInput().length);
break;case "[H":b.wasmTty.setCursor(0);break;case "b":(a=Lf(b.wasmTty.getInput(),b.wasmTty.getCursor()))&&b.wasmTty.setCursor(a);break;case "f":(a=zj(b.wasmTty.getInput(),b.wasmTty.getCursor()))&&b.wasmTty.setCursor(a);break;case "\u007f":if(a=Lf(b.wasmTty.getInput(),b.wasmTty.getCursor()))b.wasmTty.setInput(b.wasmTty.getInput().substr(0,a)+b.wasmTty.getInput().substr(b.wasmTty.getCursor())),b.wasmTty.setCursor(a)}else if(32>c||127===c)switch(a){case "\r":case "\n":case "\r":Aj(b.wasmTty.getInput())?
b.handleCursorInsert("\n"):b.handleReadComplete();break;case "\u007f":case "\b":case "\u0004":b.handleCursorErase(!0);break;case "\t":if(0<b._autocompleteHandlers.length){a=b.wasmTty.getInput().substr(0,b.wasmTty.getCursor());c=Vd(a);var d=Cj(b._autocompleteHandlers,a);d.sort();0===d.length?c||b.handleCursorInsert(" "):1===d.length?(a=Bj(a),b.handleCursorInsert(d[0].substr(a.length)+" ")):d.length<=b.maxAutocompleteEntries?b.printAndRestartPrompt(function(){b.wasmTty.printWide(d)}):b.printAndRestartPrompt(function(){return b.wasmTty.readChar("Display all "+
d.length+" possibilities? (y or n)").promise.then(function(a){"y"!==a&&"Y"!==a||b.wasmTty.printWide(d)})})}else b.handleCursorInsert("    ");break;case "\u0001":b.wasmTty.setCursor(0);break;case "\u0002":b.handleCursorMove(-1);break;case "\u0003":case "\u001a":b.wasmTty.setCursor(b.wasmTty.getInput().length);b.wasmTty.setInput("");b.wasmTty.setCursorDirectly(0);b.wasmTty.print("^C\r\n");b.history&&b.history.rewind();b._activePrompt=void 0;b.commandRunner&&(b.commandRunner.kill(),b.commandRunner=void 0);
break;case "\u0005":b.wasmTty.setCursor(b.wasmTty.getInput().length);break;case "\u0006":b.handleCursorMove(1);break;case "\u0007":b.history&&b.history.rewind();b.wasmTty.setInput("");break;case "\x0B":b.wasmTty.setInput(b.wasmTty.getInput().substring(0,b.wasmTty.getCursor()));b.wasmTty.setCursor(b.wasmTty.getInput().length);break;case "\f":b.wasmTty.clearTty();b.wasmTty.print("$ "+b.wasmTty.getInput());break;case "\u000e":b.history&&((a=b.history.getNext())||(a=""),b.wasmTty.setInput(a),b.wasmTty.setCursor(a.length));
break;case "\u0010":b.history&&(a=b.history.getPrevious())&&(b.wasmTty.setInput(a),b.wasmTty.setCursor(a.length));break;case "\u0015":b.wasmTty.setInput(b.wasmTty.getInput().substring(b.wasmTty.getCursor())),b.wasmTty.setCursor(0)}else b.handleCursorInsert(a)}};this.wasmTerminalConfig=a;this.wasmTty=c;this.history=new El(d.historySize);this.commandRunner=void 0;this.maxAutocompleteEntries=d.maxAutocompleteEntries;this._autocompleteHandlers=[function(a,c){return b.history.entries}];this._active=!1}
a.prototype.prompt=function(){return da(this,void 0,void 0,function(){var a,c;return ea(this,function(b){switch(b.label){case 0:if(this._activePrompt)return[2];b.label=1;case 1:return b.trys.push([1,4,,5]),this._activePrompt=this.wasmTty.read("$ "),this._active=!0,[4,this._activePrompt.promise];case 2:a=b.sent();this.commandRunner&&this.commandRunner.kill();if("!!"===a)if(this.history&&0<this.history.entries.length)a=this.history.entries[this.history.entries.length-1];else throw Error("No Previous command in History");
else this.history&&this.history.push(this.wasmTty.getInput());this.commandRunner=this.getCommandRunner(a);return[4,this.commandRunner.runCommand()];case 3:return b.sent(),[3,5];case 4:return c=b.sent(),this.wasmTty.println(""+c.toString()),this.prompt(),[3,5];case 5:return[2]}})})};a.prototype.isPrompting=function(){return this._active};a.prototype.getCommandRunner=function(a){var b=this;return new sm(this.wasmTerminalConfig,a,function(){return da(b,void 0,void 0,function(){return ea(this,function(a){this._activePrompt=
this.wasmTty.read("");this._active=!0;return[2,this._activePrompt.promise]})})},function(){setTimeout(function(){b.prompt()})},this.wasmTty)};a.prototype.printAndRestartPrompt=function(a){var b=this;this.wasmTty.getCursor();this.wasmTty.setCursor(this.wasmTty.getInput().length);this.wasmTty.print("\r\n");var d=function(){b.wasmTty.setCursor(b.wasmTty.getCursor());b.wasmTty.setInput(b.wasmTty.getInput())};(a=a())?a.then(d):d()};a.prototype.abortRead=function(a){void 0===a&&(a="aborted");(this._activePrompt||
this._activeCharPrompt)&&this.wasmTty.print("\r\n");this._activePrompt&&this._activePrompt.reject&&(this._activePrompt.reject(Error(a)),this._activePrompt=void 0);this._activeCharPrompt&&this._activeCharPrompt.reject&&(this._activeCharPrompt.reject(Error(a)),this._activeCharPrompt=void 0);this._active=!1};return a}();Yi.applyAddon(Al);var um=function(){function a(a){var b=this;this.handleTermResize=function(a){var c=a.rows;a=a.cols;b.wasmTty.clearInput();b.wasmTty.setTermSize(a,c);b.wasmTty.setInput(b.wasmTty.getInput(),
!0)};this.xterm=new Yi;this.pasteEvent=this.xterm.on("paste",this.onPaste);this.resizeEvent=this.xterm.on("resize",this.handleTermResize);this.webLinksAddon=new Bl;this.xterm.loadAddon(this.webLinksAddon);this.wasmTerminalConfig=new Cl(a);this.wasmTty=new Dl(this.xterm);this.wasmShell=new tm(this.wasmTerminalConfig,this.wasmTty);this.dataEvent=this.xterm.on("data",this.wasmShell.handleTermData);this.isOpen=!1;this.pendingPrintOnOpen=""}a.prototype.open=function(a){var b=this;this.xterm.open(a);this.isOpen=
!0;setTimeout(function(){b.pendingPrintOnOpen&&(b.wasmTty.print(b.pendingPrintOnOpen+"\n"),b.pendingPrintOnOpen="");b.wasmShell.prompt()})};a.prototype.fit=function(){this.xterm.fit()};a.prototype.focus=function(){this.xterm.focus()};a.prototype.print=function(a){var b=this;a=a.replace(/\n\n/g,"\n \n");this.isOpen?this.wasmShell.isPrompting?this.wasmShell.printAndRestartPrompt(function(){b.wasmTty.print(a+"\n")}):this.wasmTty.print(a):this.pendingPrintOnOpen=this.pendingPrintOnOpen?this.pendingPrintOnOpen+
a:a};a.prototype.runCommand=function(a){this.wasmShell.isPrompting()&&(this.wasmTty.setInput(a),this.wasmShell.handleReadComplete())};a.prototype.destroy=function(){this.xterm.off("paste",this.onPaste);this.xterm.off("resize",this.handleTermResize);this.xterm.off("data",this.wasmShell.handleTermData);this.xterm.destroy();delete this.xterm};a.prototype.onPaste=function(a){this.wasmTty.print(a)};return a}(),vm=function(a){return da(void 0,void 0,void 0,function(){var b,c,d,e;return ea(this,function(f){switch(f.label){case 0:return[4,
fetch("https://registry.wapm.io/graphql",{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({operationName:"shellGetCommandQuery",query:"query shellGetCommandQuery($command: String!) {\n  command: getCommand(name: $command) {\n    command\n    module {\n      abi\n      publicUrl\n    }\n    packageVersion {\n      package {\n        displayName\n      }\n    }\n  }\n}",variables:{command:a}})})];case 1:return b=f.sent(),[4,b.json()];
case 2:c=f.sent();d=function(a,b){a=a[b[0]];b.shift();return a?1<b.length?d(a,b):!0:!1};if(d(c,["data","command","module","publicUrl"])){e=c.data.command.module;if("wasi"!==e.abi)throw Error(a+" does not use the wasi abi. Currently, only the wasi abi is supported on the wapm shell.");return[2,e.publicUrl]}throw Error("command not found "+a);}})})},wm=function(a){return da(void 0,void 0,void 0,function(){var b,c;return ea(this,function(d){switch(d.label){case 0:return[4,fetch(a)];case 1:return b=d.sent(),
[4,b.arrayBuffer()];case 2:return c=d.sent(),[2,new Uint8Array(c)]}})})};Td.default=um;Td.fetchCommandFromWAPM=function(a){return da(void 0,void 0,void 0,function(){var b;return ea(this,function(c){switch(c.label){case 0:return[4,vm(a)];case 1:return b=c.sent(),[4,wm(b)];case 2:return[2,c.sent()]}})})};return Td}({});
